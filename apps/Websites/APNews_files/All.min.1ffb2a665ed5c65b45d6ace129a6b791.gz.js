/*! For license information please see All.min.js.LICENSE.txt */
!function(){var e,t,i={307:function(e){var t;t=()=>(()=>{"use strict";var e={935:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Arcs=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i=t.canvas,a=i.height,r=i.width,l=new s.Shapes(t),c=new o.AudioData(e),d=a/2,h=r/2;this._options=n({count:30,diameter:a/3,lineWidth:3,frequencyBand:"mids",rounded:!0},this._options),this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(r,a));for(var u=0;u<=this._options.count/2;u++){var p=Math.floor(c.data.length/this._options.count)*u,g=c.data[p],m=(r-this._options.diameter)/this._options.count*u,f=180-45/(255/g/2),v=180+45/(255/g/2),y=2*g;l.arc(m+y/2,d,y,f,v,this._options)}var b=Math.floor(c.data.length/2),w=c.data[b];for(l.circle(h,d,this._options.diameter*(w/255),this._options),u=this._options.count/2;u<=this._options.count;u++){var S=Math.floor(c.data.length/this._options.count)*u,E=c.data[S];m=(r-this._options.diameter)/this._options.count*u+this._options.diameter,f=180-45/(255/E/2),v=180+45/(255/E/2),y=2*E,l.arc(m-y/2,d,y,f+180,v+180,this._options)}},e}();t.Arcs=a},519:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Circles=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i=t.canvas,a=i.height,r=i.width,l=new s.Shapes(t),c=new o.AudioData(e),d=r/2,h=a/2;this._options=n({count:40,diameter:0,fillColor:"rgba(0,0,0,0)",frequencyBand:"mids"},this._options),this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(r,a));for(var u=0;u<this._options.count;u++){var p=Math.floor(c.data.length/this._options.count)*u,g=c.data[p];l.circle(d,h,this._options.diameter+g,this._options)}},e}();t.Circles=a},938:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Cubes=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i,a,r,l,c,d,h,u,p,g,m,f,v=t.canvas,y=v.height,b=v.width,w=new s.Shapes(t),S=new o.AudioData(e);this._options=n({count:20,frequencyBand:"mids",gap:5},this._options);var E=Math.floor((b-this._options.gap*this._options.count)/this._options.count);if((null===(i=this._options)||void 0===i?void 0:i.cubeHeight)||(this._options.cubeHeight=E),this._options.frequencyBand&&S.setFrequencyBand(this._options.frequencyBand),S.scaleData(Math.min(b,y)),null===(a=this._options)||void 0===a?void 0:a.mirroredX)for(var k=1,_=Math.ceil(S.data.length/2);_<S.data.length;_++)S.data[_]=S.data[Math.ceil(S.data.length/2)-k],k++;if(null===(r=this._options)||void 0===r?void 0:r.top)for(_=0;_<this._options.count;_++)for(var C=Math.floor(S.data.length/this._options.count)*_,A=S.data[C],L=(this._options.gap+E)*_,P=Math.ceil(A/E),x=0;x<P;x++){var I=x*(this._options.cubeHeight+this._options.gap);w.rectangle(L,I,E,this._options.cubeHeight,this._options)}if(null===(l=this._options)||void 0===l?void 0:l.right)for(_=0;_<this._options.count;_++)for(C=Math.floor(S.data.length/this._options.count)*_,A=S.data[C],I=_*(this._options.cubeHeight+this._options.gap),P=Math.ceil(A/E),x=0;x<P;x++)L=b-(this._options.gap+E)*x,w.rectangle(L,I,E,this._options.cubeHeight,this._options);if((null===(c=this._options)||void 0===c?void 0:c.bottom)||!(null===(d=this._options)||void 0===d?void 0:d.top)&&!(null===(h=this._options)||void 0===h?void 0:h.right)&&!(null===(u=this._options)||void 0===u?void 0:u.left)&&!(null===(p=this._options)||void 0===p?void 0:p.center))for(_=0;_<this._options.count;_++)for(C=Math.floor(S.data.length/this._options.count)*_,A=S.data[C],L=(this._options.gap+E)*_,P=Math.ceil(A/E),x=0;x<P;x++)I=y-x*(this._options.cubeHeight+this._options.gap),w.rectangle(L,I,E,this._options.cubeHeight,this._options);if(null===(g=this._options)||void 0===g?void 0:g.left)for(_=0;_<this._options.count;_++)for(C=Math.floor(S.data.length/this._options.count)*_,A=S.data[C],I=_*(this._options.cubeHeight+this._options.gap),P=Math.ceil(A/E),x=0;x<P;x++)L=(this._options.gap+E)*x,w.rectangle(L,I,E,this._options.cubeHeight,this._options);if(null===(m=this._options)||void 0===m?void 0:m.center){for(_=0;_<this._options.count;_++)for(C=Math.floor(S.data.length/this._options.count)*_,A=S.data[C],L=(this._options.gap+E)*_,P=Math.ceil(A/E),x=0;x<P;x++)I=y/2-x*(this._options.cubeHeight+this._options.gap),w.rectangle(L,I,E,this._options.cubeHeight,this._options);if(null===(f=this._options)||void 0===f?void 0:f.mirroredY)for(_=0;_<this._options.count;_++)for(C=Math.floor(S.data.length/this._options.count)*_,A=S.data[C],L=(this._options.gap+E)*_,P=Math.ceil(A/E),x=0;x<P;x++)I=y/2+x*(this._options.cubeHeight+this._options.gap),w.rectangle(L,I,E,this._options.cubeHeight,this._options)}},e}();t.Cubes=a},540:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Flower=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i=t.canvas,a=i.height,r=i.width,l=new s.Shapes(t),c=new o.AudioData(e);this._options=n({count:20,diameter:a/3,frequencyBand:"mids",rotate:0},this._options);var d=r/2,h=a/2,u=360/this._options.count;this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(r,a));for(var p=0;p<this._options.count;p++){var g=Math.floor(c.data.length/this._options.count)*p,m=c.data[g],f=l.toRadians(u*p+this._options.rotate),v=l.toRadians(u*(p+1)+this._options.rotate),y=this._options.diameter/2*Math.cos(f)+d,b=this._options.diameter/2*Math.sin(f)+h,w=this._options.diameter/2*Math.cos(v)+d,S=this._options.diameter/2*Math.sin(v)+h,E=this._options.diameter+m,k=E/2*Math.cos(f)+d,_=E/2*Math.sin(f)+h,C=E/2*Math.cos(v)+d,A=E/2*Math.sin(v)+h;l.polygon([{x:y,y:b},{x:k,y:_},{x:C,y:A},{x:w,y:S}],this._options)}},e}();t.Flower=a},522:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Glob=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i,a=t.canvas,r=a.height,l=a.width,c=new s.Shapes(t),d=new o.AudioData(e),h=l/2,u=r/2;if(this._options=n({count:100,diameter:r/3,frequencyBand:"mids",rounded:!0},this._options),this._options.frequencyBand&&d.setFrequencyBand(this._options.frequencyBand),d.scaleData(Math.min(l,r)),null===(i=this._options)||void 0===i?void 0:i.mirroredX)for(var p=1,g=Math.ceil(d.data.length/2);g<d.data.length;g++)d.data[g]=d.data[Math.ceil(d.data.length/2)-p],p++;var m=[];for(g=0;g<this._options.count;g++){var f=Math.floor(d.data.length/this._options.count)*g,v=d.data[f],y=360/this._options.count,b=this._options.diameter+v,w=h+b/2*Math.cos(c.toRadians(y*g)),S=u+b/2*Math.sin(c.toRadians(y*g));m.push({x:w,y:S})}m.push(m[0]),c.polygon(m,this._options)},e}();t.Glob=a},658:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Lines=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i,a,r,l,c,d,h,u,p,g,m,f=t.canvas,v=f.height,y=f.width,b=new s.Shapes(t),w=new o.AudioData(e);if(this._options=n({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&w.setFrequencyBand(this._options.frequencyBand),w.scaleData(Math.min(y,v)),null===(i=this._options)||void 0===i?void 0:i.mirroredX)for(var S=1,E=Math.ceil(w.data.length/2);E<w.data.length;E++)w.data[E]=w.data[Math.ceil(w.data.length/2)-S],S++;if(null===(a=this._options)||void 0===a?void 0:a.top)for(E=1;E<=this._options.count;E++){var k=Math.floor(w.data.length/this._options.count)*E,_=w.data[k],C=0,A=P=y/this._options.count*E,L=_;b.line(P,C,A,L,this._options)}if(null===(r=this._options)||void 0===r?void 0:r.right)for(E=1;E<=this._options.count;E++){k=Math.floor(w.data.length/this._options.count)*E;var P=y;A=y-(_=w.data[k]),L=C=v/this._options.count*E,b.line(P,C,A,L,this._options)}if((null===(l=this._options)||void 0===l?void 0:l.bottom)||!(null===(c=this._options)||void 0===c?void 0:c.top)&&!(null===(d=this._options)||void 0===d?void 0:d.right)&&!(null===(h=this._options)||void 0===h?void 0:h.left)&&!(null===(u=this._options)||void 0===u?void 0:u.center))for(E=1;E<=this._options.count;E++)k=Math.floor(w.data.length/this._options.count)*E,_=w.data[k],A=P=y/this._options.count*E,L=(C=v)-_,b.line(P,C,A,L,this._options);if(null===(p=this._options)||void 0===p?void 0:p.left)for(E=1;E<=this._options.count;E++)k=Math.floor(w.data.length/this._options.count)*E,P=0,A=_=w.data[k],L=C=v/this._options.count*E,b.line(P,C,A,L,this._options);if(null===(g=this._options)||void 0===g?void 0:g.center)for(E=1;E<=this._options.count;E++)k=Math.floor(w.data.length/this._options.count)*E,_=w.data[k],A=P=y/this._options.count*E,L=(C=v/2)-_,b.line(P,C,A,L,this._options),(null===(m=this._options)||void 0===m?void 0:m.mirroredY)&&(A=P=y/this._options.count*E,L=(C=v/2)+_,b.line(P,C,A,L,this._options))},e}();t.Lines=a},817:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Shine=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i,a=t.canvas,r=a.height,l=a.width,c=new s.Shapes(t),d=new o.AudioData(e);this._options=n({count:30,rotate:0,diameter:r/3,frequencyBand:"mids"},this._options);var h=l/2,u=r/2,p=360/this._options.count;this._options.frequencyBand&&d.setFrequencyBand(this._options.frequencyBand),d.scaleData(Math.min(l,r));for(var g=0;g<this._options.count;g++){var m=Math.floor(d.data.length/this._options.count)*g,f=d.data[m],v=c.toRadians(p*g+this._options.rotate),y=(null===(i=this._options)||void 0===i?void 0:i.offset)?this._options.diameter-f/2:this._options.diameter,b=this._options.diameter+f,w=y/2*Math.cos(v)+h,S=y/2*Math.sin(v)+u,E=b/2*Math.cos(v)+h,k=b/2*Math.sin(v)+u;c.line(w,S,E,k,this._options)}},e}();t.Shine=a},123:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Square=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i=t.canvas,a=i.height,r=i.width,l=new s.Shapes(t),c=new o.AudioData(e);this._options=n({count:40,diameter:a/3,frequencyBand:"mids"},this._options);var d=this._options.count/4,h=r/2,u=a/2;this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(r,a));for(var p=0;p<d;p++){var g=Math.floor(c.data.length/this._options.count)*p,m=c.data[g],f=this._options.diameter/d,v=h-this._options.diameter/2+f*p,y=u-this._options.diameter/2;l.line(v,y,v,y-m,this._options)}for(p=0;p<d;p++){g=Math.floor(c.data.length/this._options.count)*(2*p),m=c.data[g];var b=this._options.diameter/d;v=h+this._options.diameter/2,y=u-this._options.diameter/2+b*p,l.line(v,y,v+m,y,this._options)}for(p=0;p<d;p++)g=Math.floor(c.data.length/this._options.count)*(3*p),m=c.data[g],f=this._options.diameter/d,v=h-this._options.diameter/2+f*p,y=u+this._options.diameter/2,l.line(v,y,v,y+m,this._options);for(p=0;p<d;p++)g=Math.floor(c.data.length/this._options.count)*(4*p),m=c.data[g],b=this._options.diameter/d,v=h-this._options.diameter/2,y=u-this._options.diameter/2+b*p,l.line(v,y,v-m,y,this._options)},e}();t.Square=a},270:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Turntable=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i=t.canvas,a=i.height,r=i.width,l=new s.Shapes(t),c=new o.AudioData(e);this._options=n({count:20,rotate:0,diameter:a/3,cubeHeight:20,frequencyBand:"mids",gap:5},this._options);var d=r/2,h=a/2,u=360/this._options.count;this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(r,a));for(var p=0;p<this._options.count;p++)for(var g=Math.floor(c.data.length/this._options.count)*p,m=c.data[g],f=0;f<m/this._options.cubeHeight;f++){var v=this._options.diameter+this._options.cubeHeight*f+this._options.gap,y=this._options.diameter+this._options.cubeHeight*(f+1),b=l.toRadians(u*p+this._options.rotate+this._options.gap/4),w=l.toRadians(u*(p+1)+this._options.rotate),S=v/2*Math.cos(b)+d,E=v/2*Math.sin(b)+h,k=v/2*Math.cos(w)+d,_=v/2*Math.sin(w)+h,C=y/2*Math.cos(b)+d,A=y/2*Math.sin(b)+h,L=y/2*Math.cos(w)+d,P=y/2*Math.sin(w)+h;l.polygon([{x:S,y:E},{x:C,y:A},{x:L,y:P},{x:k,y:_}],this._options)}},e}();t.Turntable=a},857:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Wave=void 0;var s=i(426),o=i(941),a=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var i=t.canvas,a=i.height,r=i.width,l=new o.AudioData(e),c=new s.Shapes(t);if(this._options=n({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&l.setFrequencyBand(this._options.frequencyBand),l.scaleData(Math.min(r,a)),this._options.mirroredX)for(var d=1,h=Math.ceil(l.data.length/2);h<l.data.length;h++)l.data[h]=l.data[Math.ceil(l.data.length/2)-d],d++;if(this._options.top){var u=[{x:0,y:0}];for(h=0;h<=this._options.count;h++){var p=Math.floor(l.data.length/this._options.count)*h,g=l.data[p];u.push({x:Math.floor(r/this._options.count)*h,y:g})}u.push({x:r,y:0}),c.polygon(u,this._options)}if(this._options.right){for(u=[{x:r,y:0}],h=0;h<=this._options.count;h++)p=Math.floor(l.data.length/this._options.count)*h,g=l.data[p],u.push({x:r-g,y:Math.floor(r/this._options.count)*h});u.push({x:r,y:a}),c.polygon(u,this._options)}if(this._options.bottom||!this._options.top&&!this._options.right&&!this._options.left&&!this._options.center){for(u=[{x:0,y:a}],h=0;h<=this._options.count;h++)p=Math.floor(l.data.length/this._options.count)*h,g=l.data[p],u.push({x:Math.floor(r/this._options.count)*h,y:a-g});u.push({x:r,y:a}),c.polygon(u,this._options)}if(this._options.left){for(u=[{x:0,y:0}],h=0;h<=this._options.count;h++)p=Math.floor(l.data.length/this._options.count)*h,g=l.data[p],u.push({x:g,y:Math.floor(r/this._options.count)*h});u.push({x:0,y:a}),c.polygon(u,this._options)}if(this._options.center){for(u=[{x:0,y:a/2}],h=0;h<=this._options.count;h++)p=Math.floor(l.data.length/this._options.count)*h,g=l.data[p],u.push({x:Math.floor(r/this._options.count)*h,y:a/2-g});if(u.push({x:r,y:a/2}),c.polygon(u,this._options),this._options.mirroredY){for(u=[{x:0,y:a/2}],h=0;h<=this._options.count;h++)p=Math.floor(l.data.length/this._options.count)*h,g=l.data[p],u.push({x:Math.floor(r/this._options.count)*h,y:a/2+g});u.push({x:r,y:a/2}),c.polygon(u,this._options)}}},e}();t.Wave=a},941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AudioData=void 0;var i=function(){function e(e){this.data=e}return e.prototype.setFrequencyBand=function(e){var t=Math.floor(.0625*this.data.length),i=Math.floor(.0625*this.data.length),n=Math.floor(.375*this.data.length),s={base:this.data.slice(0,t),lows:this.data.slice(t+1,t+i),mids:this.data.slice(t+i+1,t+i+n),highs:this.data.slice(t+i+n+1)};this.data=s[e]},e.prototype.scaleData=function(e){e<255&&(this.data=this.data.map((function(t){var i=Math.round(t/255*100)/100;return e*i})))},e}();t.AudioData=i},426:function(e,t){var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var i,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Shapes=void 0;var s=function(){function e(e){this._canvasContext=e}return e.prototype.toRadians=function(e){return e*Math.PI/180},e.prototype.toDegrees=function(e){return 180*e/Math.PI},e.prototype._rotatePoint=function(e,t,i,n,s){var o=this.toRadians(s);return{x:Math.cos(o)*(i-e)-Math.sin(o)*(n-t)+e,y:Math.sin(o)*(i-e)+Math.cos(o)*(n-t)+t}},e.prototype._makeGradient=function(e,t){var i=0,n=this._canvasContext.canvas.height/2,s=this._canvasContext.canvas.width,o=this._canvasContext.canvas.height/2;if(t){var a=this._canvasContext.canvas.width/2,r=this._canvasContext.canvas.height/2,l=this._rotatePoint(a,r,i,n,t);i=l.x,n=l.y;var c=this._rotatePoint(a,r,s,o,t);s=c.x,o=c.y}var d=this._canvasContext.createLinearGradient(i,n,s,o);return e.forEach((function(t,i){d.addColorStop(1/e.length*i,t)})),d},e.prototype._makeImage=function(e){return i(this,void 0,void 0,(function(){var t,i=this;return n(this,(function(n){return(t=new Image).src=e,[2,new Promise((function(e,n){t.onload=function(){var n=i._canvasContext.createPattern(t,"repeat");e(n)}}))]}))}))},e.prototype._implementOptions=function(e,t){var i,n,s,o,a,r,l,c,d,h,u,p,g=this;void 0===t&&(t=!0),"string"==typeof(null==e?void 0:e.lineColor)?this._canvasContext.strokeStyle=e.lineColor:(null===(i=null==e?void 0:e.lineColor)||void 0===i?void 0:i.gradient)?this._canvasContext.strokeStyle=this._makeGradient(e.lineColor.gradient,e.lineColor.rotate):(null===(n=null==e?void 0:e.lineColor)||void 0===n?void 0:n.image)?this._makeImage(null===(s=null==e?void 0:e.lineColor)||void 0===s?void 0:s.image).then((function(e){return g._canvasContext.strokeStyle=e})):this._canvasContext.strokeStyle="#000","string"==typeof(null==e?void 0:e.fillColor)?this._canvasContext.fillStyle=e.fillColor:(null===(o=null==e?void 0:e.fillColor)||void 0===o?void 0:o.gradient)?this._canvasContext.fillStyle=this._makeGradient(e.fillColor.gradient,e.fillColor.rotate):(null===(a=null==e?void 0:e.fillColor)||void 0===a?void 0:a.image)?this._makeImage(null===(r=null==e?void 0:e.fillColor)||void 0===r?void 0:r.image).then((function(e){return g._canvasContext.fillStyle=e})):this._canvasContext.fillStyle="#000",this._canvasContext.lineCap=null!==(l=(null==e?void 0:e.rounded)?"round":"butt")&&void 0!==l?l:"butt",this._canvasContext.lineWidth=null!==(c=null==e?void 0:e.lineWidth)&&void 0!==c?c:1,this._canvasContext.shadowColor=null!==(h=null===(d=null==e?void 0:e.glow)||void 0===d?void 0:d.color)&&void 0!==h?h:"rgba(0,0,0,0)",this._canvasContext.shadowBlur=null!==(p=null===(u=null==e?void 0:e.glow)||void 0===u?void 0:u.strength)&&void 0!==p?p:0,this._canvasContext.shadowOffsetX=0,this._canvasContext.shadowOffsetY=0,t&&this._canvasContext.closePath(),this._canvasContext.stroke(),t&&this._canvasContext.fill()},e.prototype.arc=function(e,t,i,n,s,o){return this._canvasContext.beginPath(),this._canvasContext.arc(e,t,i/2,this.toRadians(n),this.toRadians(s)),this._implementOptions(o,!1),this},e.prototype.circle=function(e,t,i,n){return this._canvasContext.beginPath(),this._canvasContext.arc(e,t,i/2,0,2*Math.PI),this._implementOptions(n),this},e.prototype.line=function(e,t,i,n,s){return this._canvasContext.beginPath(),this._canvasContext.moveTo(e,t),this._canvasContext.lineTo(i,n),this._implementOptions(s),this},e.prototype.polygon=function(e,t){var i;this._canvasContext.beginPath(),this._canvasContext.moveTo(e[0].x,e[0].y);for(var n=0;n<e.length;n++){var s=e[n],o=null!==(i=e[n+1])&&void 0!==i?i:s,a=(s.x+o.x)/2,r=(s.y+o.y)/2;(null==t?void 0:t.rounded)?this._canvasContext.quadraticCurveTo(e[n].x,e[n].y,a,r):this._canvasContext.lineTo(e[n].x,e[n].y)}return this._implementOptions(t),this},e.prototype.rectangle=function(e,t,i,n,s){var o,a=null!==(o=null==s?void 0:s.radius)&&void 0!==o?o:0;return i<2*a&&(a=i/2),n<2*a&&(a=n/2),this._canvasContext.beginPath(),this._canvasContext.moveTo(e+a,t),this._canvasContext.arcTo(e+i,t,e+i,t+n,a),this._canvasContext.arcTo(e+i,t+n,e,t+n,a),this._canvasContext.arcTo(e,t+n,e,t,a),this._canvasContext.arcTo(e,t,e+i,t,a),this._implementOptions(s),this},e}();t.Shapes=s}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Wave=void 0;var t=i(935),s=i(519),o=i(938),a=i(540),r=i(522),l=i(658),c=i(817),d=i(123),h=i(270),u=i(857),p=function(){function e(e,i,n){void 0===n&&(n=!1);var p=this;this.animations={Arcs:t.Arcs,Circles:s.Circles,Cubes:o.Cubes,Flower:a.Flower,Glob:r.Glob,Lines:l.Lines,Shine:c.Shine,Square:d.Square,Turntable:h.Turntable,Wave:u.Wave},this._activeAnimations=[],this._canvasElement=i,this._canvasContext=this._canvasElement.getContext("2d"),this._muteAudio=n,e instanceof HTMLAudioElement?(this._audioElement=e,this._audioElement.addEventListener("play",(function(){p._audioContext=new AudioContext,p._audioSource=p._audioContext.createMediaElementSource(p._audioElement),p._audioAnalyser=p._audioContext.createAnalyser(),p._play()}),{once:!0})):(this._audioContext=e.context,this._audioSource=e.source,this._audioAnalyser=this._audioContext.createAnalyser(),this._play())}return e.prototype._play=function(){var e=this;this._audioSource.connect(this._audioAnalyser),this._muteAudio||this._audioSource.connect(this._audioContext.destination),this._audioAnalyser.smoothingTimeConstant=.85,this._audioAnalyser.fftSize=1024;var t=new Uint8Array(this._audioAnalyser.frequencyBinCount),i=function(){e._audioAnalyser.getByteFrequencyData(t),e._canvasContext.clearRect(0,0,e._canvasContext.canvas.width,e._canvasContext.canvas.height),e._activeAnimations.forEach((function(i){i.draw(t,e._canvasContext)})),window.requestAnimationFrame(i)};i()},e.prototype.addAnimation=function(e){this._activeAnimations.push(e)},e.prototype.clearAnimations=function(){this._activeAnimations=[]},e}();e.Wave=p})(),n})(),e.exports=t()},741:function(e,t,i){var n,s;!function(o,a){"use strict";void 0===(s="function"==typeof(n=a)?n.call(t,i,t,e):n)||(e.exports=s)}(window,(function(){"use strict";var e=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i]+"MatchesSelector";if(e[n])return n}}();return function(t,i){return t[e](i)}}))},158:function(e,t,i){var n,s;"undefined"!=typeof window&&window,void 0===(s="function"==typeof(n=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],s=0;s<i.length;s++){var o=i[s];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?n.call(t,i,t,e):n)||(e.exports=s)},47:function(e,t,i){var n,s;!function(o,a){n=[i(741)],s=function(e){return function(e,t){"use strict";var i={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t}},n=Array.prototype.slice;i.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?n.call(e):[e]},i.removeFrom=function(e,t){var i=e.indexOf(t);-1!=i&&e.splice(i,1)},i.getParent=function(e,i){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,t(e,i))return e},i.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},i.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.filterFindElements=function(e,n){e=i.makeArray(e);var s=[];return e.forEach((function(e){if(e instanceof HTMLElement)if(n){t(e,n)&&s.push(e);for(var i=e.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}else s.push(e)})),s},i.debounceMethod=function(e,t,i){i=i||100;var n=e.prototype[t],s=t+"Timeout";e.prototype[t]=function(){var e=this[s];clearTimeout(e);var t=arguments,o=this;this[s]=setTimeout((function(){n.apply(o,t),delete o[s]}),i)}},i.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},i.toDashed=function(e){return e.replace(/(.)([A-Z])/g,(function(e,t,i){return t+"-"+i})).toLowerCase()};var s=e.console;return i.htmlInit=function(t,n){i.docReady((function(){var o=i.toDashed(n),a="data-"+o,r=document.querySelectorAll("["+a+"]"),l=document.querySelectorAll(".js-"+o),c=i.makeArray(r).concat(i.makeArray(l)),d=a+"-options",h=e.jQuery;c.forEach((function(e){var i,o=e.getAttribute(a)||e.getAttribute(d);try{i=o&&JSON.parse(o)}catch(t){return void(s&&s.error("Error parsing "+a+" on "+e.className+": "+t))}var r=new t(e,i);h&&h.data(e,n,r)}))}))},i}(o,e)}.apply(t,n),void 0===s||(e.exports=s)}(window)},597:function(e,t,i){var n,s;window,n=[i(217),i(47)],void 0===(s=function(e,t){return function(e,t,i){"use strict";var n=t.prototype;return n.insert=function(e,t){var i=this._makeCells(e);if(i&&i.length){var n=this.cells.length;t=void 0===t?n:t;var s=function(e){var t=document.createDocumentFragment();return e.forEach((function(e){t.appendChild(e.element)})),t}(i),o=t==n;if(o)this.slider.appendChild(s);else{var a=this.cells[t].element;this.slider.insertBefore(s,a)}if(0===t)this.cells=i.concat(this.cells);else if(o)this.cells=this.cells.concat(i);else{var r=this.cells.splice(t,n-t);this.cells=this.cells.concat(i).concat(r)}this._sizeCells(i),this.cellChange(t,!0)}},n.append=function(e){this.insert(e,this.cells.length)},n.prepend=function(e){this.insert(e,0)},n.remove=function(e){var t=this.getCells(e);if(t&&t.length){var n=this.cells.length-1;t.forEach((function(e){e.remove();var t=this.cells.indexOf(e);n=Math.min(t,n),i.removeFrom(this.cells,e)}),this),this.cellChange(n,!0)}},n.cellSizeChange=function(e){var t=this.getCell(e);if(t){t.getSize();var i=this.cells.indexOf(t);this.cellChange(i)}},n.cellChange=function(e,t){var i=this.selectedElement;this._positionCells(e),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(i);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[e]),this.select(this.selectedIndex),t&&this.positionSliderAtSelected()},t}(0,e,t)}.apply(t,n))||(e.exports=s)},880:function(e,t,i){var n,s;window,n=[i(47)],void 0===(s=function(e){return function(e,t){"use strict";return{startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var e=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(e),this.isAnimating){var t=this;requestAnimationFrame((function(){t.animate()}))}},positionSlider:function(){var e=this.x;this.options.wrapAround&&this.cells.length>1&&(e=t.modulo(e,this.slideableWidth),e-=this.slideableWidth,this.shiftWrapCells(e)),this.setTranslateX(e,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(e,t){e+=this.cursorPosition,e=this.options.rightToLeft?-e:e;var i=this.getPositionValue(e);this.slider.style.transform=t?"translate3d("+i+",0,0)":"translateX("+i+")"},dispatchScrollEvent:function(){var e=this.slides[0];if(e){var t=-this.x-e.target,i=t/this.slidesWidth;this.dispatchEvent("scroll",null,[i,t])}},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(e){return this.options.percentPosition?.01*Math.round(e/this.size.innerWidth*1e4)+"%":Math.round(e)+"px"},settle:function(e){!this.isPointerDown&&Math.round(100*this.x)==Math.round(100*e)&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(e){var t=this.cursorPosition+e;this._shiftCells(this.beforeShiftCells,t,-1);var i=this.size.innerWidth-(e+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},_shiftCells:function(e,t,i){for(var n=0;n<e.length;n++){var s=e[n],o=t>0?i:0;s.wrapShift(o),t-=s.size.outerWidth}},_unshiftCells:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)e[t].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(e){this.velocity+=e},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){if(this.isDraggable&&this.isPointerDown){var e=this.dragX-this.x-this.velocity;this.applyForce(e)}},applySelectedAttraction:function(){if((!this.isDraggable||!this.isPointerDown)&&!this.isFreeScrolling&&this.slides.length){var e=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction;this.applyForce(e)}}}}(0,e)}.apply(t,n))||(e.exports=s)},229:function(e,t,i){var n,s;window,n=[i(131)],void 0===(s=function(e){return function(e,t){"use strict";function i(e,t){this.element=e,this.parent=t,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var e=this.parent.originSide;this.element.style[e]="",this.element.removeAttribute("aria-hidden")},n.getSize=function(){this.size=t(this.element)},n.setPosition=function(e){this.x=e,this.updateTarget(),this.renderPosition(e)},n.updateTarget=n.setDefaultTarget=function(){var e="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[e]+this.size.width*this.parent.cellAlign},n.renderPosition=function(e){var t=this.parent.originSide;this.element.style[t]=this.parent.getPositionValue(e)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(e){this.shift=e,this.renderPosition(this.x+this.parent.slideableWidth*e)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}(0,e)}.apply(t,n))||(e.exports=s)},690:function(e,t,i){var n,s;!function(o,a){n=[i(217),i(842),i(47)],s=function(e,t,i){return function(e,t,i,n){"use strict";n.extend(t.defaults,{draggable:">1",dragThreshold:3}),t.createMethods.push("_createDrag");var s=t.prototype;n.extend(s,i.prototype),s._touchActionValue="pan-y";var o="createTouch"in document,a=!1;s._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),o&&!a&&(e.addEventListener("touchmove",(function(){})),a=!0)},s.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},s.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},s.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},s.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},s.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},s._uiChangeDrag=function(){delete this.isFreeScrolling},s.pointerDown=function(t,i){this.isDraggable?this.okayPointerDown(t)&&(this._pointerDownPreventDefault(t),this.pointerDownFocus(t),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=l(),e.addEventListener("scroll",this),this._pointerDownDefault(t,i)):this._pointerDownDefault(t,i)},s._pointerDownDefault=function(e,t){this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},this._bindPostStartEvents(e),this.dispatchEvent("pointerDown",e,[t])};var r={INPUT:!0,TEXTAREA:!0,SELECT:!0};function l(){return{x:e.pageXOffset,y:e.pageYOffset}}return s.pointerDownFocus=function(e){r[e.target.nodeName]||this.focus()},s._pointerDownPreventDefault=function(e){var t="touchstart"==e.type,i="touch"==e.pointerType,n=r[e.target.nodeName];t||i||n||e.preventDefault()},s.hasDragStarted=function(e){return Math.abs(e.x)>this.options.dragThreshold},s.pointerUp=function(e,t){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},s.pointerDone=function(){e.removeEventListener("scroll",this),delete this.pointerDownScroll},s.dragStart=function(t,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),e.removeEventListener("scroll",this),this.dispatchEvent("dragStart",t,[i]))},s.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,i]),this._dragMove(e,t,i)},s.dragMove=function(e,t,i){if(this.isDraggable){e.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x%=this.slideableWidth);var s=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);s=s>o?.5*(s+o):s;var a=Math.min(-this.getLastSlide().target,this.dragStartPosition);s=s<a?.5*(s+a):s}this.dragX=s,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",e,[t,i])}},s.dragEnd=function(e,t){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",e,[t])}},s.dragEndRestingSelect=function(){var e=this.getRestingPosition(),t=Math.abs(this.getSlideDistance(-e,this.selectedIndex)),i=this._getClosestResting(e,t,1),n=this._getClosestResting(e,t,-1);return i.distance<n.distance?i.index:n.index},s._getClosestResting=function(e,t,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(e,t){return e<=t}:function(e,t){return e<t};o(t,s)&&(n+=i,s=t,null!==(t=this.getSlideDistance(-e,n)));)t=Math.abs(t);return{distance:s,index:n-i}},s.getSlideDistance=function(e,t){var i=this.slides.length,s=this.options.wrapAround&&i>1,o=s?n.modulo(t,i):t,a=this.slides[o];if(!a)return null;var r=s?this.slideableWidth*Math.floor(t/i):0;return e-(a.target+r)},s.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var e=this.getSlideDistance(-this.dragX,this.selectedIndex),t=this.previousDragX-this.dragX;return e>0&&t>0?1:e<0&&t<0?-1:0},s.staticClick=function(e,t){var i=this.getParentCell(e.target),n=i&&i.element,s=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",e,[t,n,s])},s.onscroll=function(){var e=l(),t=this.pointerDownScroll.x-e.x,i=this.pointerDownScroll.y-e.y;(Math.abs(t)>3||Math.abs(i)>3)&&this._pointerDone()},t}(o,e,t,i)}.apply(t,n),void 0===s||(e.exports=s)}(window)},217:function(e,t,i){var n,s;!function(o,a){n=[i(158),i(131),i(47),i(229),i(714),i(880)],s=function(e,t,i,n,s,a){return function(e,t,i,n,s,o,a){"use strict";var r=e.jQuery,l=e.getComputedStyle,c=e.console;function d(e,t){for(e=n.makeArray(e);e.length;)t.appendChild(e.shift())}var h=0,u={};function p(e,t){var i=n.getQueryElement(e);if(i){if(this.element=i,this.element.flickityGUID){var s=u[this.element.flickityGUID];return s&&s.option(t),s}r&&(this.$element=r(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(t),this._create()}else c&&c.error("Bad element for Flickity: "+(i||e))}p.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},p.createMethods=[];var g=p.prototype;n.extend(g,t.prototype),g._create=function(){var t=this.guid=++h;for(var i in this.element.flickityGUID=t,u[t]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&e.addEventListener("resize",this),this.options.on){var n=this.options.on[i];this.on(i,n)}p.createMethods.forEach((function(e){this[e]()}),this),this.options.watchCSS?this.watchCSS():this.activate()},g.option=function(e){n.extend(this.options,e)},g.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),d(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},g._createSlider=function(){var e=document.createElement("div");e.className="flickity-slider",e.style[this.originSide]=0,this.slider=e},g._filterFindCellElements=function(e){return n.filterFindElements(e,this.options.cellSelector)},g.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},g._makeCells=function(e){return this._filterFindCellElements(e).map((function(e){return new s(e,this)}),this)},g.getLastCell=function(){return this.cells[this.cells.length-1]},g.getLastSlide=function(){return this.slides[this.slides.length-1]},g.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},g._positionCells=function(e){e=e||0,this.maxCellHeight=e&&this.maxCellHeight||0;var t=0;if(e>0){var i=this.cells[e-1];t=i.x+i.size.outerWidth}for(var n=this.cells.length,s=e;s<n;s++){var o=this.cells[s];o.setPosition(t),t+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=t,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},g._sizeCells=function(e){e.forEach((function(e){e.getSize()}))},g.updateSlides=function(){if(this.slides=[],this.cells.length){var e=new o(this);this.slides.push(e);var t="left"==this.originSide?"marginRight":"marginLeft",i=this._getCanCellFit();this.cells.forEach((function(n,s){if(e.cells.length){var a=e.outerWidth-e.firstMargin+(n.size.outerWidth-n.size[t]);i.call(this,s,a)||(e.updateTarget(),e=new o(this),this.slides.push(e)),e.addCell(n)}else e.addCell(n)}),this),e.updateTarget(),this.updateSelectedSlide()}},g._getCanCellFit=function(){var e=this.options.groupCells;if(!e)return function(){return!1};if("number"==typeof e){var t=parseInt(e,10);return function(e){return e%t!=0}}var i="string"==typeof e&&e.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(e,t){return t<=(this.size.innerWidth+1)*n}},g._init=g.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},g.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var m={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return g.setCellAlign=function(){var e=m[this.options.cellAlign];this.cellAlign=e?e[this.originSide]:this.options.cellAlign},g.setGallerySize=function(){if(this.options.setGallerySize){var e=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=e+"px"}},g._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var e=this.cursorPosition,t=this.cells.length-1;this.beforeShiftCells=this._getGapCells(e,t,-1),e=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(e,0,1)}},g._getGapCells=function(e,t,i){for(var n=[];e>0;){var s=this.cells[t];if(!s)break;n.push(s),t+=i,e-=s.size.outerWidth}return n},g._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var e=this.options.rightToLeft,t=e?"marginRight":"marginLeft",i=e?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],s=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[t],a=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach((function(e){s?e.target=n*this.cellAlign:(e.target=Math.max(e.target,o),e.target=Math.min(e.target,a))}),this)}},g.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;if(this.emitEvent(e,n),r&&this.$element){var s=e+=this.options.namespaceJQueryEvents?".flickity":"";if(t){var o=new r.Event(t);o.type=e,s=o}this.$element.trigger(s,i)}},g.select=function(e,t,i){if(this.isActive&&(e=parseInt(e,10),this._wrapSelect(e),(this.options.wrapAround||t)&&(e=n.modulo(e,this.slides.length)),this.slides[e])){var s=this.selectedIndex;this.selectedIndex=e,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[e]),e!=s&&this.dispatchEvent("change",null,[e]),this.dispatchEvent("cellSelect")}},g._wrapSelect=function(e){var t=this.slides.length;if(!(this.options.wrapAround&&t>1))return e;var i=n.modulo(e,t),s=Math.abs(i-this.selectedIndex),o=Math.abs(i+t-this.selectedIndex),a=Math.abs(i-t-this.selectedIndex);!this.isDragSelect&&o<s?e+=t:!this.isDragSelect&&a<s&&(e-=t),e<0?this.x-=this.slideableWidth:e>=t&&(this.x+=this.slideableWidth)},g.previous=function(e,t){this.select(this.selectedIndex-1,e,t)},g.next=function(e,t){this.select(this.selectedIndex+1,e,t)},g.updateSelectedSlide=function(){var e=this.slides[this.selectedIndex];e&&(this.unselectSelectedSlide(),this.selectedSlide=e,e.select(),this.selectedCells=e.cells,this.selectedElements=e.getCellElements(),this.selectedCell=e.cells[0],this.selectedElement=this.selectedElements[0])},g.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},g.selectInitialIndex=function(){var e=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(e&&"string"==typeof e&&this.queryCell(e))return void this.selectCell(e,!1,!0);var t=0;e&&this.slides[e]&&(t=e),this.select(t,!1,!0)}},g.selectCell=function(e,t,i){var n=this.queryCell(e);if(n){var s=this.getCellSlideIndex(n);this.select(s,t,i)}},g.getCellSlideIndex=function(e){for(var t=0;t<this.slides.length;t++)if(-1!=this.slides[t].cells.indexOf(e))return t},g.getCell=function(e){for(var t=0;t<this.cells.length;t++){var i=this.cells[t];if(i.element==e)return i}},g.getCells=function(e){e=n.makeArray(e);var t=[];return e.forEach((function(e){var i=this.getCell(e);i&&t.push(i)}),this),t},g.getCellElements=function(){return this.cells.map((function(e){return e.element}))},g.getParentCell=function(e){return this.getCell(e)||(e=n.getParent(e,".flickity-slider > *"),this.getCell(e))},g.getAdjacentCellElements=function(e,t){if(!e)return this.selectedSlide.getCellElements();t=void 0===t?this.selectedIndex:t;var i=this.slides.length;if(1+2*e>=i)return this.getCellElements();for(var s=[],o=t-e;o<=t+e;o++){var a=this.options.wrapAround?n.modulo(o,i):o,r=this.slides[a];r&&(s=s.concat(r.getCellElements()))}return s},g.queryCell=function(e){if("number"==typeof e)return this.cells[e];if("string"==typeof e){if(e.match(/^[#.]?[\d/]/))return;e=this.element.querySelector(e)}return this.getCell(e)},g.uiChange=function(){this.emitEvent("uiChange")},g.childUIPointerDown=function(e){"touchstart"!=e.type&&e.preventDefault(),this.focus()},g.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(p,"onresize",150),g.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var e=this.selectedElements&&this.selectedElements[0];this.selectCell(e,!1,!0)}},g.watchCSS=function(){this.options.watchCSS&&(-1!=l(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},g.onkeydown=function(e){var t=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!t){var i=p.keyboardHandlers[e.keyCode];i&&i.call(this)}},p.keyboardHandlers={37:function(){var e=this.options.rightToLeft?"next":"previous";this.uiChange(),this[e]()},39:function(){var e=this.options.rightToLeft?"previous":"next";this.uiChange(),this[e]()}},g.focus=function(){var t=e.pageYOffset;this.element.focus({preventScroll:!0}),e.pageYOffset!=t&&e.scrollTo(e.pageXOffset,t)},g.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach((function(e){e.destroy()})),this.element.removeChild(this.viewport),d(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},g.destroy=function(){this.deactivate(),e.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),r&&this.$element&&r.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete u[this.guid]},n.extend(g,a),p.data=function(e){var t=(e=n.getQueryElement(e))&&e.flickityGUID;return t&&u[t]},n.htmlInit(p,"flickity"),r&&r.bridget&&r.bridget("flickity",p),p.setJQuery=function(e){r=e},p.Cell=s,p.Slide=o,p}(o,e,t,i,n,s,a)}.apply(t,n),void 0===s||(e.exports=s)}(window)},442:function(e,t,i){var n,s,o;window,s=[i(217),i(690),i(410),i(573),i(516),i(597),i(227)],void 0===(o="function"==typeof(n=function(e){return e})?n.apply(t,s):n)||(e.exports=o)},227:function(e,t,i){var n,s;window,n=[i(217),i(47)],void 0===(s=function(e,t){return function(e,t,i){"use strict";t.createMethods.push("_createLazyload");var n=t.prototype;function s(e,t){this.img=e,this.flickity=t,this.load()}return n._createLazyload=function(){this.on("select",this.lazyLoad)},n.lazyLoad=function(){var e=this.options.lazyLoad;if(e){var t="number"==typeof e?e:0,n=this.getAdjacentCellElements(t),o=[];n.forEach((function(e){var t=function(e){if("IMG"==e.nodeName){var t=e.getAttribute("data-flickity-lazyload"),n=e.getAttribute("data-flickity-lazyload-src"),s=e.getAttribute("data-flickity-lazyload-srcset");if(t||n||s)return[e]}var o=e.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset], source[data-flickity-lazyload-srcset]");return i.makeArray(o)}(e);o=o.concat(t)})),o.forEach((function(e){new s(e,this)}),this)}},s.prototype.handleEvent=i.handleEvent,s.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var e=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),t=this.img.getAttribute("data-flickity-lazyload-srcset");"img"===this.img.tagName.toLowerCase()&&e&&(this.img.src=e),t&&this.img.setAttribute("srcset",t),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},s.prototype.onload=function(e){this.complete(e,"flickity-lazyloaded")},s.prototype.onerror=function(e){this.complete(e,"flickity-lazyerror")},s.prototype.complete=function(e,t){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(t),this.flickity.dispatchEvent("lazyLoad",e,n)},t.LazyLoader=s,t}(0,e,t)}.apply(t,n))||(e.exports=s)},573:function(e,t,i){var n,s;window,n=[i(217),i(704),i(47)],void 0===(s=function(e,t,i){return function(e,t,i,n){"use strict";function s(e){this.parent=e,this._create()}s.prototype=Object.create(i.prototype),s.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},s.prototype.setDots=function(){var e=this.parent.slides.length-this.dots.length;e>0?this.addDots(e):e<0&&this.removeDots(-e)},s.prototype.addDots=function(e){for(var t=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+e,o=n;o<s;o++){var a=document.createElement("li");a.className="dot",a.setAttribute("aria-label","Page dot "+(o+1)),t.appendChild(a),i.push(a)}this.holder.appendChild(t),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(e){this.dots.splice(this.dots.length-e,e).forEach((function(e){this.holder.removeChild(e)}),this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=s.prototype.onClick=function(e){var t=e.target;if("LI"==t.nodeName){this.parent.uiChange();var i=this.dots.indexOf(t);this.parent.select(i)}},s.prototype.destroy=function(){this.deactivate(),this.allOff()},t.PageDots=s,n.extend(t.defaults,{pageDots:!0}),t.createMethods.push("_createPageDots");var o=t.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},t.PageDots=s,t}(0,e,t,i)}.apply(t,n))||(e.exports=s)},516:function(e,t,i){var n,s;window,n=[i(158),i(47),i(217)],void 0===(s=function(e,t,i){return function(e,t,i){"use strict";function n(e){this.parent=e,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}n.prototype=Object.create(e.prototype),n.prototype.play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){if("playing"==this.state){var e=this.parent.options.autoPlay;e="number"==typeof e?e:3e3;var t=this;this.clear(),this.timeout=setTimeout((function(){t.parent.next(!0),t.tick()}),e)}},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},t.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var s=i.prototype;return s._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},s.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},s.playPlayer=function(){this.player.play()},s.stopPlayer=function(){this.player.stop()},s.pausePlayer=function(){this.player.pause()},s.unpausePlayer=function(){this.player.unpause()},s.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},s.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},s.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}(e,t,i)}.apply(t,n))||(e.exports=s)},410:function(e,t,i){var n,s;window,n=[i(217),i(704),i(47)],void 0===(s=function(e,t,i){return function(e,t,i,n){"use strict";var s="http://www.w3.org/2000/svg";function o(e,t){this.direction=e,this.parent=t,this._create()}o.prototype=Object.create(i.prototype),o.prototype._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var e=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==e;var t=this.element=document.createElement("button");t.className="flickity-button flickity-prev-next-button",t.className+=this.isPrevious?" previous":" next",t.setAttribute("type","button"),this.disable(),t.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();t.appendChild(i),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},o.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},o.prototype.createSVG=function(){var e=document.createElementNS(s,"svg");e.setAttribute("class","flickity-button-icon"),e.setAttribute("viewBox","0 0 100 100");var t,i=document.createElementNS(s,"path"),n="string"==typeof(t=this.parent.options.arrowShape)?t:"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z";return i.setAttribute("d",n),i.setAttribute("class","arrow"),this.isLeft||i.setAttribute("transform","translate(100, 100) rotate(180) "),e.appendChild(i),e},o.prototype.handleEvent=n.handleEvent,o.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var e=this.isPrevious?"previous":"next";this.parent[e]()}},o.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},o.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},o.prototype.update=function(){var e=this.parent.slides;if(this.parent.options.wrapAround&&e.length>1)this.enable();else{var t=e.length?e.length-1:0,i=this.isPrevious?0:t;this[this.parent.selectedIndex==i?"disable":"enable"]()}},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(t.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),t.createMethods.push("_createPrevNextButtons");var a=t.prototype;return a._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new o(-1,this),this.nextButton=new o(1,this),this.on("activate",this.activatePrevNextButtons))},a.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},a.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},t.PrevNextButton=o,t}(0,e,t,i)}.apply(t,n))||(e.exports=s)},714:function(e,t,i){var n,s;window,void 0===(s="function"==typeof(n=function(){"use strict";function e(e){this.parent=e,this.isOriginLeft="left"==e.originSide,this.cells=[],this.outerWidth=0,this.height=0}var t=e.prototype;return t.addCell=function(e){if(this.cells.push(e),this.outerWidth+=e.size.outerWidth,this.height=Math.max(e.size.outerHeight,this.height),1==this.cells.length){this.x=e.x;var t=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=e.size[t]}},t.updateTarget=function(){var e=this.isOriginLeft?"marginRight":"marginLeft",t=this.getLastCell(),i=t?t.size[e]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},t.getLastCell=function(){return this.cells[this.cells.length-1]},t.select=function(){this.cells.forEach((function(e){e.select()}))},t.unselect=function(){this.cells.forEach((function(e){e.unselect()}))},t.getCellElements=function(){return this.cells.map((function(e){return e.element}))},e})?n.call(t,i,t,e):n)||(e.exports=s)},131:function(e,t,i){var n,s;window,void 0===(s="function"==typeof(n=function(){"use strict";function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n=i.length;function s(e){var i=getComputedStyle(e);return i||t("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),i}var o,a=!1;function r(t){if(function(){if(!a){a=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(t);var n=s(t);o=200==Math.round(e(n.width)),r.isBoxSizeOuter=o,i.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var l=s(t);if("none"==l.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<n;t++)e[i[t]]=0;return e}();var c={};c.width=t.offsetWidth,c.height=t.offsetHeight;for(var d=c.isBorderBox="border-box"==l.boxSizing,h=0;h<n;h++){var u=i[h],p=l[u],g=parseFloat(p);c[u]=isNaN(g)?0:g}var m=c.paddingLeft+c.paddingRight,f=c.paddingTop+c.paddingBottom,v=c.marginLeft+c.marginRight,y=c.marginTop+c.marginBottom,b=c.borderLeftWidth+c.borderRightWidth,w=c.borderTopWidth+c.borderBottomWidth,S=d&&o,E=e(l.width);!1!==E&&(c.width=E+(S?0:m+b));var k=e(l.height);return!1!==k&&(c.height=k+(S?0:f+w)),c.innerWidth=c.width-(m+b),c.innerHeight=c.height-(f+w),c.outerWidth=c.width+v,c.outerHeight=c.height+y,c}}return r})?n.call(t,i,t,e):n)||(e.exports=s)},876:function(e,t,i){!function(t){"use strict";var n=i(529),s=function(e,t,i){var s,o,a,r,l={},c=0,d=0,h={sensitivity:7,interval:100,timeout:0};function u(t,i,n){var l=function(e){s=e.clientX,o=e.clientY};return d&&(d=clearTimeout(d)),n?(a=t.clientX,r=t.clientY,e.addEventListener("mousemove",l,!1),1!==c&&(d=setTimeout((function(){p(e,i,t)}),h.interval))):(e.removeEventListener("mousemove",l,!1),1===c&&(d=setTimeout((function(){!function(e,t,i){d&&(d=clearTimeout(d)),c=0,t.call(e,i)}(e,i,t)}),h.timeout))),this}function p(e,t,i){if(d&&(d=clearTimeout(d)),Math.abs(a-s)+Math.abs(r-o)<h.sensitivity)return c=1,t.call(e,i);a=s,r=o,d=setTimeout((function(){p(e,t,i)}),h.interval)}function g(e){u(e,t,!0)}function m(e){u(e,i)}return l.options=function(e){h=n({},h,e)},l.remove=function(){e&&(e.removeEventListener("mouseover",g,!1),e.removeEventListener("mouseout",m,!1))},e&&(e.addEventListener("mouseover",g,!1),e.addEventListener("mouseout",m,!1)),l};t.hoverintent=s,e.exports&&(e.exports=s)}(this)},842:function(e,t,i){var n,s;!function(o,a){n=[i(704)],s=function(e){return function(e,t){"use strict";function i(){}var n=i.prototype=Object.create(t.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(t){for(var i=(t=void 0===t||t)?"addEventListener":"removeEventListener",n=t?this._touchActionValue:"",s=0;s<this.handles.length;s++){var o=this.handles[s];this._bindStartEvent(o,t),o[i]("click",this),e.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var s={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(e){var t=s[e.target.nodeName],i=o[e.target.type],n=!t||i;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},n.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,i]),this._dragMove(e,t,i)},n._dragPointerMove=function(e,t){var i={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(e,t),i},n.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},n._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},n._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},n.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},n._dragMove=function(e,t,i){this.isDragging&&this.dragMove(e,t,i)},n.dragMove=function(e,t,i){e.preventDefault(),this.emitEvent("dragMove",[e,t,i])},n._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},n.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},n.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},n._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},i.getPointerPoint=t.getPointerPoint,i}(o,e)}.apply(t,n),void 0===s||(e.exports=s)}(window)},704:function(e,t,i){var n,s;!function(o,a){n=[i(158)],s=function(e){return function(e,t){"use strict";function i(){}var n=i.prototype=Object.create(t.prototype);n.bindStartEvent=function(e){this._bindStartEvent(e,!0)},n.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},n._bindStartEvent=function(t,i){var n=(i=void 0===i||i)?"addEventListener":"removeEventListener",s="mousedown";"ontouchstart"in e?s="touchstart":e.PointerEvent&&(s="pointerdown"),t[n](s,this)},n.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.getTouch=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.identifier==this.pointerIdentifier)return i}},n.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},n.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},n.onpointerdown=function(e){this._pointerDown(e,e)},n._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},n.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var s={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return n._bindPostStartEvents=function(t){if(t){var i=s[t.type];i.forEach((function(t){e.addEventListener(t,this)}),this),this._boundPointerEvents=i}},n._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach((function(t){e.removeEventListener(t,this)}),this),delete this._boundPointerEvents)},n.onmousemove=function(e){this._pointerMove(e,e)},n.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},n.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},n._pointerMove=function(e,t){this.pointerMove(e,t)},n.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},n.onmouseup=function(e){this._pointerUp(e,e)},n.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},n.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},n._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},n._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},n._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},n.pointerDone=function(){},n.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},n.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},n._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},n.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},i.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},i}(o,e)}.apply(t,n),void 0===s||(e.exports=s)}(window)},529:function(e){e.exports=function(){for(var e={},i=0;i<arguments.length;i++){var n=arguments[i];for(var s in n)t.call(n,s)&&(e[s]=n[s])}return e};var t=Object.prototype.hasOwnProperty}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return i[e].call(o.exports,o,o.exports,s),o.exports}s.m=i,s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))},s.u=function(e){return e+".ffedc718d34e5bacbc39.js"},s.miniCssF=function(e){},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="bundle-default:",s.l=function(i,n,o,a){if(e[i])e[i].push(n);else{var r,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+o){r=h;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",t+o),r.src=i),e[i]=[n];var u=function(t,n){r.onerror=r.onload=null,clearTimeout(p);var s=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),l&&document.head.appendChild(r)}},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",function(){var e={330:0};s.f.j=function(t,i){var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise((function(i,s){n=e[t]=[i,s]}));i.push(n[2]=o);var a=s.p+s.u(t),r=new Error;s.l(a,(function(i){if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",r.name="ChunkLoadError",r.type=o,r.request=a,n[1](r)}}),"chunk-"+t,t)}};var t=function(t,i){var n,o,a=i[0],r=i[1],l=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);l&&l(s)}for(t&&t(i);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkbundle_default=self.webpackChunkbundle_default||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";class e extends HTMLElement{static get observedAttributes(){return["data-expanded"]}get headerElement(){return this.querySelector("[data-accordion-header]")}get bodyElement(){return this.querySelector("[data-accordion-body]")}get expanded(){return this.hasAttribute("data-expanded")}set expanded(e){e?this.setAttribute("data-expanded",""):this.removeAttribute("data-expanded")}attributeChangedCallback(e){"data-expanded"===e&&this.toggle()}connectedCallback(){this.headerElement.addEventListener("click",(e=>{e.preventDefault(),this.expanded=!this.expanded})),this.expanded&&(this.bodyElement.style.height="auto")}transition(e,t,i){this.bodyElement.style.height=`${e}px`,window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{this.bodyElement.style.height=`${t}px`,this.bodyElement.style.visibility=i}))}))}toggle(){const e=this.bodyElement.scrollHeight;this.expanded?this.transition(0,e,"visible"):this.transition(e,0,"hidden")}}const t="AudioPlayer:play";class i extends window.HTMLElement{set playing(e){e?this.setAttribute("playing",""):this.removeAttribute("playing")}get playing(){return this.getAttribute("playing")}connectedCallback(){this.audioElement=this.querySelector("audio"),this.progress=this.querySelector("progress"),this.durationElement=this.querySelector("[data-duration]"),this.buttonElement=this.querySelector("[data-click]"),this.minutesAbbreviation=this.getAttribute("data-minutes-abbreviation"),this.hoursAbbreviation=this.getAttribute("data-hours-abbreviation"),this.registerListeners(),this.render()}registerListeners(){this.addEventListener("click",this),this.audioElement.addEventListener("play",this),this.audioElement.addEventListener("pause",this),this.audioElement.addEventListener("loadedmetadata",this),this.audioElement.addEventListener("timeupdate",this),document.addEventListener(t,this)}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new window.CustomEvent(e,{bubbles:!0,detail:t});this.dispatchEvent(i)}handleClick(e){(e.target.matches('[data-click="playPause"]')||e.target.closest('[data-click="playPause"]'))&&this.playPause(),(e.target.matches("progress")||e.target.closest("progress"))&&this.handleProgressbarClick(e)}handleProgressbarClick(e){const t=e.offsetX/this.progress.offsetWidth;this.audioElement.currentTime=t*this.audioElement.duration,this.progress.value=Math.floor(100*t),this.render()}updateProgress(){const e=this.audioElement.currentTime/this.audioElement.duration;this.progress.value=Math.floor(100*e),this.render()}handleEvent(e){"click"!==e.type?"loadedmetadata"!==e.type?"timeupdate"!==e.type?e.type!==t||e.target===this?["play","pause"].includes(e.type)&&(this.playing=!e.target.paused):this.pause():this.updateProgress():this.render():this.handleClick(e)}playPause(){this.audioElement.paused?this.play():this.pause()}play(){this.pauseVideoPlayer(),this.emit(t),this.buttonElement.classList.remove("pause"),this.buttonElement.classList.add("play"),this.audioElement.play()}pause(){this.emit("AudioPlayer:pause"),this.buttonElement.classList.remove("play"),this.buttonElement.classList.add("pause"),this.audioElement.pause()}render(){this.durationElement&&(this.durationElement.innerText=this.getFormatedDuration())}getFormatedDuration(){if(this.audioElement.readyState<1)return;const e=[],t=Math.floor(this.audioElement.currentTime/60),i=Math.floor(this.audioElement.currentTime-60*t);null!=t&&e.push(t),null!=i&&e.push(("0"+i).slice(-2));const n=[],s=Math.floor(this.audioElement.duration/60),o=Math.floor(this.audioElement.duration-60*s);return s&&n.push(s),o&&n.push(("0"+o).slice(-2)),`${e.join(":")} / ${n.join(":")}`}pauseVideoPlayer(){document.querySelectorAll("bsp-jw-player").forEach((function(e){e.pause&&e.pause()})),document.querySelectorAll("iframe").forEach((function(e){e.contentWindow.postMessage('{"method":"pause"}',"*"),e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}))}}function n(e,t,i){let n=e.target;(t=n.matches(t)?n:n.closest(t))&&(e.delegateTarget=t,i(e))}var o=s(307);function a(e){!e.target.closest("[data-playpause]")&&document.parentPlayer.playing&&(document.parentPlayer.playing=!1,this.playing=!0),document.documentElement.removeEventListener("click",a.bind(this))}class r extends window.HTMLElement{connectedCallback(){this.elAudio=this.querySelector("audio"),this.elCanvas=this.querySelector("canvas"),this.elAudio.onplaying=function(){this.playing=!0},this.elAudio.onpause=function(){this.playing=!1},this.setupWaveForm(),document.parentPlayer&&document.documentElement.addEventListener("click",a.bind(this)),this.addEventListener("click",(e=>{n.call(this,e,"[data-playpause]",(()=>{this.pauseVideoPlayer(),this.playing=!this.playing})),n.call(this,e,"[data-makepopup]",(()=>{r.elPopup?(r.elPopup.close(),delete r.elPopup):(this.createPopup(),this.openSyncPlayer())}))}))}createPopup(){r.elPopup||(r.elPopup=window.open("about:blank","hello","width=599,height=100, resizeable=no"))}openSyncPlayer(){let e=this.outerHTML;e=e.replace('data-isplaying="true"',""),r.elPopup.document.write(`\n      <!DOCTYPE html>\n        <html lang="en" class="AudioSyncPlayerPopUp">\n          <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <meta http-equiv="X-UA-Compatible" content="ie=edge">\n            <title>HTML 5 Boilerplate</title>\n            <link rel="stylesheet" href="${document.querySelector("[data-bsp-main-css]").href}">\n            <script src="${document.querySelector("[data-bsp-main-js]").src}"><\/script>\n          </head>\n          <body>\n            <svg xmlns="http://www.w3.org/2000/svg" style="display:none" id="iconsMap">\n              <symbol id="play-icon" viewBox="0 0 50 50"  xmlns="http://www.w3.org/2000/svg" >\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <g transform="translate(-341.000000, -11574.000000)" fill-rule="nonzero">\n                          <g transform="translate(320.000000, 11422.000000)">\n                              <g transform="translate(21.000000, 152.000000)">\n                                  <circle id="Oval" fill="#FFFFFF" cx="25" cy="25" r="24"/>\n                                  <path d="M25,0 C11.2,0 0,11.2 0,25 C0,38.8 11.2,50 25,50 C38.8,50 50,38.8 50,25 C50,11.2 38.8,0 25,0 Z" fill="#EE0120"/>\n                                  <polygon fill="#FFFFFF" points="18 36.25 18 13.75 33 25"/>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </symbol>\n          \n              <symbol id="play-pause" viewBox="0 0 40 40"  xmlns="http://www.w3.org/2000/svg" >\n                  <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <g id="Radio/elements/pause-small" transform="translate(-52.000000, 0.000000)">\n                          <g id="Group-51" transform="translate(18.000000, 0.000000)">\n                              <g id="button/play/small-red" transform="translate(34.000000, 0.000000)">\n                                  <circle id="Oval" fill="#FF322E" cx="20" cy="20" r="20"></circle>\n                                  <g id="Group" transform="translate(13.750000, 12.500000)" fill="#FFFFFF">\n                                      <rect id="Rectangle" x="8.75" y="0" width="3.75" height="15" rx="1"></rect>\n                                      <rect id="Rectangle" x="0" y="0" width="3.75" height="15" rx="1"></rect>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </symbol>\n            </svg>\n            ${e}\n          </body>\n        </html>\n      `),r.elPopup.document.close(),r.elPopup.document.parentPlayer=this,r.elPopup.addEventListener("unload",(()=>{delete r.elPopup}))}pause(){this.playing=!1}pauseVideoPlayer(){document.querySelectorAll("bsp-jw-player").forEach((function(e){e.pause&&e.pause()})),document.querySelectorAll("iframe").forEach((function(e){e.contentWindow.postMessage('{"method":"pause"}',"*"),e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}))}setupWaveForm(){let e=new o.Wave(this.elAudio,this.elCanvas);e.addAnimation(new e.animations.Square({count:60,diamater:5e-6}))}set playing(e){this._playing!==e&&(this._playing=e,this.setAttribute("data-isplaying",e),e?this.elAudio.play():this.elAudio.pause(),e&&(document.parentPlayer?document.parentPlayer.playing=!1:r.elPopup&&(r.elPopup.document.querySelector("bsp-audio-wsync").playing&&(r.elPopup.document.querySelector("bsp-audio-wsync").playing=!1),r.elPopup.close())))}get playing(){return this._playing}}class l extends window.HTMLElement{connectedCallback(){const e=this.getAttribute("data-expiry-date"),t=e?new Date(e):null,i=new Date;if(!t||t<i)return void this.remove();const n=this.querySelector(".Banner-close");null==window.sessionStorage.getItem("banner")&&this.init(),n.addEventListener("click",this,!1)}handleEvent(e){"click"===e.type&&this.closeBanner()}init(){this.setAttribute("data-banner","show"),document.documentElement.style.setProperty("--bannerHeight",this.offsetHeight+"px")}closeBanner(){this.removeAttribute("data-banner"),this.remove(),window.sessionStorage.setItem("banner","hidden"),document.documentElement.style.setProperty("--bannerHeight","0px")}}const c={currentMediaId:"",ready:"VideoPlayer:ready",timeUpdate:"VideoPlayer:timeUpdate",play:"VideoPlayer:play",playing:"VideoPlayer:playing",pause:"VideoPlayer:paused",volumeChange:"VideoPlayer:volumeChange",enterFullscreen:"VideoPlayer:enterFullscreen",exitFullscreen:"VideoPlayer:exitFullscreen",ended:"VideoPlayer:ended",error:"VideoPlayer:error",quartileCompleted:"VideoPlayer:quartileCompleted",youTubePlayer:null},d={playingInterval:5,playbackPosition:0,quartilePosition:-1};class h extends window.HTMLElement{connectedCallback(){this.intervals={...d}}get videoId(){return this.getAttribute("video-id")}get videoTitle(){return this.getAttribute("video-title")}get playerId(){return this.getAttribute("player-id")}get autoplay(){return this.hasAttribute("autoplay")}get disableClickToPlay(){return this.hasAttribute("disable-click-to-play")}get muted(){return this.hasAttribute("muted")}get loop(){return this.hasAttribute("loop")}get poster(){return this.getAttribute("poster")}get video(){return{id:this.videoId,videoPlatform:this.platform,seekSeconds:this.seekSeconds,title:this.videoTitle,inPlaylist:document.querySelector("ps-playlist"),playListTagsosition:[...document.querySelectorAll("ps-playlist-item")].findIndex((e=>e.isCurrent)),duration:this.duration,playerWidth:this.getPlayerWidth(),playerHeight:this.getPlayerHeight(),playerResolution:this.getPlayerResolution(),isAutoPlay:this.getIsAutoPlay(),startVolume:this.getStartVolume(),volume:this.getVolume(),isFullscreen:this.onVideoFullscreen(),videoUuid:this.getVideoUuid(),videoFileType:this.getVideoFileType(),videoInitiation:this.getAttribute("data-playback-started")||!1,credit:this.getCredit(),ownerSite:this.getOwnerSite(),videoClassification:this.getCategory(),source:this.getSource(),location:this.getDateline(),videoStatus:this.getVideoStatus(),quartile:this.getDisplayQuartile(this.intervals.quartilePosition)}}init(){this.platform=this.getPlatformName()}onReady(){this.emit(c.ready)}onPlay(e){this.pauseAudioPlayer(e),this.emit(c.playing)}onTimeUpdate(){this.sendVideoPlaybackIntervalEvents(),this.emit(c.timeUpdate)}onMute(e){this.pauseAudioPlayer(e),this.emit(c.volumeChange)}onPause(){this.emit(c.pause)}onEnded(){this.intervals={...d},this.emit(c.ended)}onError(){this.emit(c.error)}onVolumneChange(){this.emit(c.volumeChange)}play(){}pause(){}playPause(){this.getAttribute("data-playback-paused")?this.play():this.pause()}sendVideoPlaybackIntervalEvents(){if(!this.duration||0===this.duration)return;const e=this.currentTime/this.duration*100;for(;this.currentTime>this.intervals&&this.intervals.playbackPosition+2*this.intervals.playingInterval;)this.intervals.playbackPosition+=this.intervals.playingInterval;if(this.currentTime>=this.intervals&&this.intervals.playbackPosition+this.intervals.playingInterval){this.intervals.playbackPosition+=this.intervals.playingInterval;const e=new window.CustomEvent("Video:onVideoTimeIntervalUpdate",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video,secondsElapsed:this.currentTime}});this.dispatchEvent(e)}let t=null;if(e>=this.intervals&&this.intervals.quartilePosition)if(-1===this.intervals.quartilePosition){if(e>=this.intervals.quartilePosition+25)for(this.intervals.quartilePosition=0;e>=this.intervals.quartilePosition;)this.intervals.quartilePosition+=25}else t=this.intervals.quartilePosition,this.intervals.quartilePosition+=25,100===this.intervals.quartilePosition&&(this.intervals.quartilePosition=95);null!==t&&(95===t&&(t=100),this.emit(c.quartileCompleted,{quartile:t}))}getDisplayQuartile(e){return-1===e?0:50===e?25:75===e?50:95===e?75:100}getCategory(){}getCredit(){}getDateline(){}getIsAutoPlay(){}getOwnerSite(){}getPlatformName(){}getPlayerHeight(){}getPlayerWidth(){}getPlayerResolution(){return this.getPlayerWidth()+" x "+this.getPlayerHeight()}getPlayListTagsosition(e){const t=document.querySelector("[data-playlist]"),i=t.querySelectorAll(".PlaylistItem"),n=t.querySelector(`[data-video-id='${e}']`);for(let e=0;e<i.length;e++)if(n===i[e])return e}getSource(){}getVideoFileType(){}getVideoStatus(){return this.getAttribute("data-playback-playing")?"Playing":this.getAttribute("data-playback-paused")?"Paused":this.getAttribute("data-playback-ended")?"Ended":null}getVideoUuid(){}getVolume(){}getStartVolume(){}onVideoFullscreen(){}onEnterFullScreen(){this.emit(c.enterFullscreen)}onExitFullscreen(){this.emit(c.exitFullscreen)}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new window.CustomEvent(e,{bubbles:!0,detail:t});this.dispatchEvent(i)}pauseAudioPlayer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{c.youTubePlayer&&"Youtube"!==e.currentPlayer&&(this.onPause(),c.youTubePlayer.pauseVideo(),c.youTubePlayer=null),document.querySelectorAll("bsp-jw-player").forEach((function(t){if(!e.currentMediaId)return;const i=e.currentMediaId.split("-")[0],n="playing"===e.newstate&&"buffering"===e.oldstate&&"repeat"===e.playReason;t.pause&&t.children.length&&i!=t.children[0].id.split("-")[0]&&!n&&t.pause()})),document.querySelectorAll("bsp-audio-wsync").forEach((function(e){e.pause&&e.pause()})),document.querySelectorAll("bsp-audio-player").forEach((function(e){e.pause&&e.pause()}))}catch(e){console.error("player, Got an error pauseAudioPlayer function",e)}}}class u extends h{constructor(){super(),this.playing=!1,this.player=null}connectedCallback(){if(super.init(),this.player=this,this.accountVId=this.player.getAttribute("data-account")||!1,this.playerVId=this.player.getAttribute("data-player")||!1,this.videoVId=this.player.getAttribute("data-video-id")||!1,!(this.accountVId&&this.playerVId&&this.videoVId))return console.info("Brightcove Video Player: Cannot play video, no account, player or video ID found"),!1;this.init()}disconnectedCallback(){window.videojs.getPlayers()["BrightcoveVideoPlayer-"+this.videoVId]&&delete window.videojs.getPlayers()["BrightcoveVideoPlayer-"+this.videoVId]}init(){this.loadBrightcoveApi(this.accountVId,this.playerVId)}loadBrightcoveApi(e,t){const i=document.createElement("script");i.src="https://players.brightcove.net/"+e+"/"+t+"_default/index.min.js",i.addEventListener("load",this.onBrightcoveAPIReady.bind(this));const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}onBrightcoveAPIReady(){this.videoPlayer=this.querySelector("video"),this.thePlayer=window.videojs(this.videoPlayer.id),void 0!==this.thePlayer&&(this.startVolume=this.thePlayer.volume(),this.playerEvents())}playerEvents(){this.onReady(),this.thePlayer.on("playing",(e=>{this.playing=!0,this.onPlay(e)})),this.thePlayer.on("pause",(e=>{this.onPause(e)})),this.thePlayer.on("timeUpdate",(e=>{this.currentTime=this.thePlayer.currentTime(),this.duration=this.thePlayer.duration(),this.onTimeUpdate(e)})),this.thePlayer.on("ended",(e=>{this.playing=!1,this.onEnded(e)}))}play(){this.thePlayer.play()}pause(){this.thePlayer.pause()}}function p(e,t){if(e<=0)return t;let i,n,s=0;return function(){if(n=arguments,i)return;const o=this,a=+Date.now(),r=e-a+s;r<=0?(s=a,t.apply(o,n)):i=setTimeout((function(){s=a,i=null,t.apply(o,n)}),r)}}const g="background: orange;color: white; padding: 4px;";function m(e,t){if(e)if(document.documentElement.hasAttribute("data-is-bsp-appview"))if(window.AnalyticsWebInterface)window.AnalyticsWebInterface.logEvent(e,JSON.stringify(t));else if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.firebase){var i={command:"logEvent",name:e,parameters:t};window.webkit.messageHandlers.firebase.postMessage(i)}else console.log("No native APIs found.");else console.log(`%cGTAG-${e}`,g,t),window.dataLayer&&window.dataLayer.push({event:e,eventModel:t})}function f(){var e=this;this.lastPointerX,this.cancelClick;const t=this.querySelector("[data-bsp-carousel-overlay-template]"),i=[...document.querySelectorAll("[data-module], bsp-lead-superlead-ui")].indexOf(this);t&&(this.elWrapperClassName=t.getAttribute("data-bsp-carousel-overlay-template"),this.addEventListener("pointerdown",(e=>{this.lastPointerX=e.pageX})),this.addEventListener("pointerup",(e=>{const t=Math.abs(this.lastPointerX-e.pageX);this.lastPointerX=e.pageX,this.cancelClick=t>30})),this.addEventListener("click",(e=>{this.cancelClick||n.call(this,e,"[data-openoverlay]",(async()=>{const t=e.delegateTarget.getAttribute("data-openoverlay-slide-number");await this.createOverlay(t),await this.overlayOpen(t),this.prepareTrapFocus(),s()}))}))),this.createOverlay=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const o=`CarouselOverlay_${i}`;document.getElementById(o)||(e.elOverlay=document.createElement("div"),e.elOverlay.className=`CarouselOverlay ${e.elWrapperClassName}`,e.elOverlay.id=o,t.content.querySelector("[data-bsp-overlay-carousel]").setAttribute("data-initial-slide",s),e.elOverlay.innerHTML=t.innerHTML,document.body.appendChild(e.elOverlay),e.elOverlay.addEventListener("click",(t=>{n.call(e,t,"[data-bsp-carousel-overlayclose]",(async()=>{e.overlayClose()}))})))},this.overlayOpen=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const i=e.elOverlay.querySelector("[data-bsp-overlay-carousel]").flickity;e.elOverlay.setAttribute("data-state","open"),document.documentElement.setAttribute("data-carousel-overlay","open");const n=new window.CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(n),i&&(i.select(t),i.resize())},this.overlayClose=()=>{this.elOverlay.setAttribute("data-state","false"),document.documentElement.removeAttribute("data-carousel-overlay"),this.querySelector("[tabindex], button, a").focus(),this.elOverlay.parentElement.removeChild(this.elOverlay),delete this.elOverlay},this.prepareTrapFocus=()=>{this.focusableSlide=this.elOverlay.querySelector(".VideoCarouselOverlay-slides.flickity-enabled"),this.focusableContent=this.elOverlay.querySelectorAll("button:not([data-openoverlay])"),this.focusableContent=Array.from(this.focusableContent),this.focusableContent=this.focusableContent.filter((e=>!e.classList.contains("ReadMore-more-button")&&!e.hasAttribute("disabled"))),this.firstFocusableElement=this.focusableContent[0],this.focusableSlide&&this.focusableSlide.focus(),this.lastFocusableElement=this.focusableContent[this.focusableContent.length-1],this.elOverlay.querySelectorAll(".CarouselOverlay-slides").forEach((e=>e.setAttribute("tabindex","-1"))),this.elOverlay.addEventListener("keydown",(e=>{let t="Tab"===e.key||9===e.keyCode;"Escape"!==e.key&&27!==e.keyCode?t&&(e.shiftKey?document.activeElement==this.firstFocusableElement&&(this.lastFocusableElement.focus(),e.preventDefault()):document.activeElement==this.lastFocusableElement&&(this.firstFocusableElement.focus(),e.preventDefault())):this.overlayClose()}))};const s=()=>{const e=this.elOverlay.querySelectorAll(".flickity-button"),t={attributes:!0,childList:!1,subtree:!1},i=new MutationObserver(o);e.forEach((e=>{i.observe(e,t)}))},o=e=>{for(const t of e)if("attributes"===t.type){if("disabled"!==t.attributeName)return;this.prepareTrapFocus()}}}var v=s(442),y=s.n(v);class b extends window.HTMLElement{async connectedCallback(){if(this.carouselSlides=this.querySelector('[class$="-slides"]')||this,f.call(this),this.carouselOptions={autoPlay:!1,adaptiveHeight:!1,imagesLoaded:!0,pageDots:!1,lazyLoad:3,dragThreshold:70,cellAlign:"left",arrowShape:"M45.92,75c.89,0,1.77-.38,2.37-1.13,1.07-1.31,.87-3.24-.44-4.31L6.43,35.79,47.73,5.53c1.36-1,1.66-2.92,.66-4.28-1-1.36-2.91-1.66-4.28-.66L2.28,31.24C.88,32.27,.05,33.87,0,35.62c-.05,1.76,.7,3.4,2.05,4.5l41.93,34.19c.57,.46,1.25,.69,1.93,.69ZM5.9,36.18h0Z",on:{ready:()=>{this.repositionArrows(),setTimeout(this.setImageDimensionsCssVars.bind(this),0)},change:e=>{const t=this.flickity.selectedCell.element;t&&t.querySelectorAll("bsp-carousel-read-more").forEach((e=>{e.checkIfToEnableButton()})),this.setImageDimensionsCssVars(),setTimeout((()=>{this.pauseLastVideos(e+1),this.pauseLastVideos(e-1)}),1500)},dragStart:e=>{this.startX=e.x,!this.startX&&e.changedTouches&&(this.startX=e.changedTouches[0].clientX)},dragEnd:e=>{let t=e.x;!t&&e.changedTouches&&(t=e.changedTouches[0].clientX),this.startX<t?this.onLeftRightToggleEvent("Right",!0):this.startX>t&&this.onLeftRightToggleEvent("Left",!0)}}},this.hasAttribute("data-blended")&&!("ontouchstart"in window||navigator.maxTouchPoints>0)&&window.innerWidth>1024&&(this.carouselOptions.draggable=!1),this.hasAttribute("data-flickity-notdraggable")&&(this.carouselOptions.draggable=!1),this.hasAttribute("data-native-dimensions")&&(this.carouselOptions.adaptiveHeight=!0),this.hasAttribute("data-autoscroll")){this.carouselOptions.wrapAround=!0;const e=parseFloat(this.getAttribute("data-autoscroll"));this.carouselOptions.autoPlay=!e||1e3*e}this.hasAttribute("data-blended")&&(this.isBlendGallery=!0),this.flickity=new(y())(this.carouselSlides,this.carouselOptions),this.flickity.select(this.getAttribute("data-initial-slide")||0),window.addEventListener("resize",p(50,(()=>{this.repositionArrows(),this.setImageDimensionsCssVars()}))),this.flickity.resize(),this.onExtendPhotoEvent(),this.buttonsEvent(),this.renderOverrideTitle(),window.addEventListener("scroll",p(50,(()=>{this.handleScroll(this)})))}getPhotoTitle(e){return this.querySelector(e)?this.querySelector(e).textContent.trim():null}isInViewport(e){const t=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,s=.1*t.height,o=.1*t.width,a=Math.max(0,-t.top),r=Math.max(0,t.bottom-i),l=Math.max(0,-t.left),c=Math.max(0,t.right-n);return a+r<=s&&l+c<=o}handleScroll(e){if(this.isBlendGallery){const t=this.flickity.selectedIndex,i=document.getElementsByClassName("flickity-slider");this.isInViewport(e)?this.flickity.selectCell(t):i[0].style.transform="none"}}onLeftRightToggleEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const i=t?"swiped":"toggle",n={state:"Extend Full Screen"};n[i]=e;let s=this.getPhotoTitle(".CarouselOverlay-slide.is-selected .CarouselOverlay-info-description");s||(n.state="Normal Screen",s=this.getPhotoTitle(".Carousel-slide.is-selected .CarouselSlide-infoDescription")),n.mediaTitle=s,this.isBlendGallery?m(`blendgallery_${i}`,n):n.mediaTitle&&m(`photogallery_${i}`,n)}catch(e){console.error("Got an eror on onLeftRightToggleEvent ",e)}}onExtendPhotoEvent(){try{const e=this.querySelector(".Carousel-slides");e&&e.addEventListener("click",(e=>{if(e.target.closest('[aria-label="Full screen button"]')){const e=this.getPhotoTitle(".Carousel-slide.is-selected .CarouselSlide-infoDescription");this.isBlendGallery?m("blendgallery_expand",{mediaTitle:e}):e&&m("photogallery_expand",{mediaTitle:e}),this.hasAttribute("data-autoscroll")&&setTimeout((()=>{this.flickity.playPlayer()}),1e3)}}))}catch(e){console.error("Got an error on onExtendPhotoEvent ",e)}}buttonsEvent(){const e=this.querySelector(".previous"),t=this.querySelector(".next");e.addEventListener("click",(()=>{this.onLeftRightToggleEvent("Left")})),t.addEventListener("click",(()=>{this.onLeftRightToggleEvent("Right")})),this.querySelectorAll("button[data-openoverlay]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-openoverlay-slide-number");this.pauseLastVideos(t)}))}))}pauseLastVideos(e){document.querySelectorAll(`div[data-slidenumber='${e}'] video`).forEach((e=>{!e.closest(".jwplayer")&&e.pause&&e.pause()})),this.isBlendGallery&&document.querySelectorAll("bsp-youtube-player iframe").forEach((function(e){e.contentWindow.postMessage('{"method":"pause"}',"*"),e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}))}setImageDimensionsCssVars(){const e=this.flickity.selectedCell.element;if(e){const t=e.querySelector("img");if(t)this?.style.setProperty("--aspectRatioWidth",`${t.clientWidth}px`),this?.style.setProperty("--aspectRatioHeight",`${t.clientHeight}px`);else if(this.flickity.size){const e=this.flickity.size?.innerWidth,t=this.flickity.size?.innerHeight;this?.style.setProperty("--aspectRatioWidth",`${e}px`),this?.style.setProperty("--aspectRatioHeight",`${t}px`)}}}repositionArrows(){const e=this.querySelector(".CarouselSlide-media")||this.querySelector(".GallerySlide-media");if(e){const t=e.offsetHeight;this.querySelectorAll(".flickity-prev-next-button").forEach((e=>{e.style.top=t/2+"px"}))}const t=this.querySelector(".flickity-prev-next-button.previous");t&&(t.style.zIndex=1);const i=this.querySelector(".flickity-prev-next-button.previous > svg");i&&(i.style.top="3px",i.style.left="3px"),t&&t.parentNode.insertBefore(t,t.previousSibling);const n=this.carouselSlides.getAttribute("data-slidescount"),s=this.getAttribute("data-native-dimensions"),o=this.querySelector(".CarouselSlide-slideCount"),a=document.querySelector('[aria-label="Full screen button"]');(s||n<2)&&(this.querySelectorAll(".flickity-prev-next-button").forEach((e=>{e.style.display="none"})),a&&(a.style.display="none"),o&&(o.style.display="none"))}renderOverrideTitle(){const e=document.querySelector("[data-named-page-type]");if(!e)return;const t=this.querySelector("[data-override-title]"),i=t?.getAttribute("data-override-title");if(!t||!i)return;const n=e.getAttribute("data-named-page-type");if("Article"===n){const e=this.closest("[data-carousel-enhancement]"),i=e?.getAttribute("data-override-title"),n=e?.getAttribute("data-hide-title");"true"==i&&"false"==n&&t.classList.remove("displayNone")}else-1!==["Hub","Section","Home page"].indexOf(n)&&t.classList.remove("displayNone")}disconnectedCallback(){this.flickity.destroy()}}class w extends window.HTMLElement{async connectedCallback(){this.status="unstarted",this.readMoreId=this.getAttribute("data-more-id"),this.readLessId=this.getAttribute("data-less-id"),this.flickityInstance=y().data(this.closest(".Carousel-slides")),this.getTextLength(),this.registerReadMore(),this.registerReadLess(),this.checkIfToEnableButton()}registerReadMore(){this.readMoreBtn=this.querySelector("["+this.readMoreId+"]"),this.readMoreBtn&&(this.readMoreBtn.className=this.getAttribute("data-main-class")+"-more-button",this.readMoreBtn.onclick=()=>{this.classList.add(this.getAttribute("data-expand")),this.status="isexpanded",this.flickityInstance&&this.flickityInstance.resize()})}registerReadLess(){this.readLessBtn=this.querySelector("["+this.readLessId+"]"),this.readLessBtn&&(this.readLessBtn.className=this.getAttribute("data-main-class")+"-less-button",this.readLessBtn.addEventListener("click",(()=>{this.classList.remove(this.getAttribute("data-expand")),this.status="unexpanded",this.flickityInstance&&this.flickityInstance.resize()})))}checkIfToEnableButton(){setTimeout((()=>{this.scrollHeight<=this.clientHeight||this.length<=110?this.status="nonexpandable":this.status="unexpanded"}),100)}getTextLength(){const e=this.getElementsByTagName("p");if(this.length=0,e&&e.length){const t=e[0].textContent;this.length=t.length}if(!e?.length){const e=this.querySelector('[class$="-description"]');if(e){const t=e.textContent;this.length=t.length}}}set status(e){e!==this._status&&(this._status,this.setAttribute("data-carousel-readmore-status",e))}get status(){return this._status}}const S="data-collapse-toggle",E={collapsed:!0,selGroup:!1};class k{constructor(e,t){this.settings=Object.assign({},E,JSON.parse(e.getAttribute(S)),t),this.el=e,this.el.collapseApi=this,this.toggle=this.toggle.bind(this),this.build()}resetSelectorSettings(){this.selectorSettings=Object.assign({},this.settings)}toggle(){this.collapsed=!this.collapsed}build(){this.resetSelectorSettings(),this.selectorSettings.active=!0,this.collapsed=this.settings.collapsed,this.el.addEventListener("click",this.toggle)}get collapsed(){return this._collapsed}set collapsed(e){e!==this._collapsed&&(this._collapsed=e,this.selectorSettings.state=e?"collapsed":"expanded",this.el.setAttribute(S,JSON.stringify(this.selectorSettings)),this.elGroup&&!e&&this.elGroup.collapseAll(this.el))}get elGroup(){return this.settings.selGroup&&(this._elGroup||(this._elGroup=[...document.querySelectorAll(this.settings.selGroup)],this._elGroup.collapseAll=e=>{this._elGroup.forEach((t=>{t.getAttribute(S)&&e!==t&&(t.collapseApi.collapsed=!0)}))})),this._elGroup}init(){this.build()}}class _ extends window.HTMLElement{connectedCallback(){this.CollapseObj=new k(this)}}class C extends window.HTMLElement{connectedCallback(){this.addEvents()}addEvents(){this.addEventListener("click",(()=>{this.copyLink()})),this.addEventListener("keydown",(e=>{"Space"!==e.code&&"Enter"!==e.code||(e.preventDefault(),this.copyLink())}))}copyLink(){const e=this.getAttribute("data-link");navigator.clipboard.writeText(e).then((()=>{this.setAttribute("data-success",!0),setTimeout((()=>{this.removeAttribute("data-success")}),2e3)}),(()=>{console.error("Unable to write to clipboard")}))}}class A extends HTMLElement{static get observedAttributes(){return["data-expanded"]}get headerEl(){return this.querySelector(".FaqQuestion-header")}get answerEl(){return this.querySelector(".FaqQuestion-answer")}get expanded(){return this.hasAttribute("data-expanded")}set expanded(e){e?this.setAttribute("data-expanded",""):this.removeAttribute("data-expanded")}attributeChangedCallback(e){"data-expanded"===e&&this.toggle()}connectedCallback(){this.headerEl.addEventListener("click",(e=>{e.preventDefault(),this.expanded=!this.expanded})),this.expanded&&(this.answerEl.style.height="auto")}transition(e,t){this.answerEl.style.height=`${e}px`,window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{this.answerEl.style.height=`${t}px`}))}))}toggle(){const e=this.answerEl.scrollHeight+20;this.expanded?this.transition(0,e):this.transition(e,0)}}class L extends window.HTMLElement{connectedCallback(){this.cacheElements(),this.init()}cacheElements(){this.form=this.querySelector("form"),this.formSubmit=this.querySelector("button[type=submit]"),this.inputs=this.querySelector("form").elements}init(){let e=null;this.form.addEventListener("keyup",(t=>{clearTimeout(e),this.setAttribute("invalid-form","false"),e=setTimeout((()=>{this.validateField(t.target)}),1e3)}),!0),this.formSubmit.addEventListener("click",(e=>{e.preventDefault(),this.setAttribute("invalid-form","false"),Array.from(this.querySelector("form").elements).forEach((e=>{this.validateField(e)})),"false"===this.getAttribute("invalid-form")&&this.form.submit()}),!0)}validateField(e){e.parentElement.parentElement.removeAttribute("data-invalid"),e.validity.valid||(e.reportValidity(),this.setAttribute("invalid-form","true"),e.parentElement.parentElement.setAttribute("data-invalid","true"))}disconnectedCallback(){return!1}}class P extends h{connectedCallback(){super.connectedCallback(),this.playButton=this.querySelector(".HTML5VideoPlayer-playIcon"),this.videoPlayer=this.querySelector(".HTML5VideoPlayer-video"),this.videoElement.addEventListener("play",(()=>{this.onPlay()})),this.videoElement.addEventListener("canplay",(()=>{this.onReady()})),this.videoElement.addEventListener("timeupdate",(()=>{this.onTimeUpdate()})),this.videoElement.addEventListener("volumechange",(()=>{this.onVolumneChange()})),this.videoElement.addEventListener("error",(()=>{this.onError()})),this.videoElement.addEventListener("ended",(()=>{this.onEnded()})),this.videoElement.addEventListener("pause",(()=>{this.onPause()})),this.handleClicks()}get videoElement(){return this.querySelector("video")}get ready(){return this.videoElement.readyState>=2}handleClicks(){this.playButton&&this.playButton.addEventListener("click",(()=>{this.hidePlayButton(),this.videoPlayer.setAttribute("controls",""),this.play()})),this.videoPlayer.addEventListener("click",(()=>{this.hidePlayButton(),this.videoPlayer.setAttribute("controls",""),this.playPause()}))}hidePlayButton(){this.playButton&&this.playButton.setAttribute("style","display:none;")}play(){this.videoElement.play()}}function x(e){e.el=e.el||this,e.callback=e.callback||function(){},e.checkMoreThanOnce=e.checkMoreThanOnce||!1,e.options=e.options||{threshold:.1};const t=new IntersectionObserver((i=>{i.forEach((i=>{const{isIntersecting:n}=i;n&&(e.checkMoreThanOnce||t.unobserve(i.target),e.callback.call(this))}))}),e.options);t.observe(e.el)}class I extends h{constructor(){super(),this.playing=!1,this.player=null}get videoElement(){return this.querySelector("video")}connectedCallback(){super.init(),x.call(this,{el:this,callback:()=>{this.player=this,this.playerVId=this.player.getAttribute("data-player")||!1,this.videoVId=this.player.getAttribute("data-video-uuid")||!1,this.mediaVId=this.player.getAttribute("data-media-id")||!1,this.pauseads=this.player.getAttribute("data-video-pauseads")||!1,this.posterImage=this.player.getAttribute("poster"),this.autostart=this.player.hasAttribute("autoplay"),this.isMuted=this.player.hasAttribute("muted"),this.adless=this.player.hasAttribute("data-adless"),this.dataLayer=this.player.getAttribute("data-video-datalayer")||null,this.adScheduleId=this.player.getAttribute("data-video-adScheduleId")||null,this.offset=this.player.getAttribute("data-video-offset")||null,this.tag=this.player.getAttribute("data-video-tag")||null,this.bidData=this.player.getAttribute("data-video-bid")||null,this.isForceVpaidControls=this.player.hasAttribute("data-is-force-vpaid-controls");try{this.bids=JSON.parse(this.bidData)}catch(e){throw this.bids=null,e}try{this.parsedDatalayer=JSON.parse(this.dataLayer)}catch(e){throw this.parsedDatalayer=null,e}if(this.showAds=this.player.getAttribute("data-video-showAds"),!(this.playerVId&&this.mediaVId&&this.videoVId))return console.error("JW Video Player: Cannot play video, no media, player or video ID found"),!1;this.init()},options:{threshold:.1}})}disconnectedCallback(){window.jwplayer&&window.jwplayer(this.videoElement)&&window.jwplayer(this.videoElement).remove()}init(){const e=this.querySelectorAll(".jw-custom-placeholder");e.length&&e.forEach((e=>{e.style.setProperty("background-image",`url('${this.posterImage}')`,"important")})),this.loadJwApi(this.playerVId)}loadJwApi(e){if(window.jwplayer&&document.getElementById(e))this.onJwApiReady();else{const t=document.createElement("script");t.src="https://cdn.jwplayer.com/libraries/"+e+".js",t.id=e,t.addEventListener("load",this.onJwApiReady.bind(this));const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}}onJwApiReady(){this.videoPlayer=this.player.querySelector("video"),this.thePlayer=window.jwplayer(this.videoElement);const e=window.jwDefaults;let t,i=this.tag;const n=this.getAttribute("data-video-datalayer");if(n&&(t=`&environment=${JSON.parse(n).dfp_kv.environment}`),i&&!i.includes("cust_params")&&(i+="&cust_params="),void 0!==this.thePlayer){if(i){const e=encodeURIComponent("&permutive="+encodeURIComponent(JSON.parse(localStorage._pdfps||"[]").slice(0,250).join(","))+"&vnd_prx_segments="+encodeURIComponent((this.parsedDatalayer?.proximic_video_segments||[]).join(",")));i=i.replace(/(cust_params[^&]+)/,"$1"+e),i+=t}const n={playlist:`https://cdn.jwplayer.com/v2/media/${this.mediaVId}`,image:this.posterImage,poster:this.posterImage,width:"100%",responsive:"true",aspectratio:"16:9",title:this.videoTitle,autostart:this.autostart||e.autostart,mute:this.isMuted||e.mute,autoPause:{viewability:!0,pauseAds:!1}};this.adless?n.advertising={}:(n.advertising={client:"googima"},this.adScheduleId&&i&&this.offset&&this.parsedDatalayer?.tags&&this.parsedDatalayer?.dfp_kv.environment&&this.parsedDatalayer?.dfp_kv.page_type&&window.permutive&&(n.advertising={...n.advertising,client:"googima",adscheduleid:this.adScheduleId,schedule:[{tag:i,offset:this.offset,custParams:{member:"no",category:this.parsedDatalayer.category||"None",tags:[...this.parsedDatalayer.tags]||[],environment:this.parsedDatalayer.dfp_kv.environment||null,page_type:this.parsedDatalayer.dfp_kv.page_type||null,vnd_prx_segments:this.parsedDatalayer?.proximic_video_segments||[],puid:window.localStorage.getItem("permutive-id")||null,ptime:Date.now().toString(),prmtvvid:window.permutive.config.viewId||null,prmtvwid:window.permutive.config.workspaceId||null}}]}),n.advertising={...n.advertising,autoplayadsmuted:!1,outstream:!1},"true"===this.showAds?(n.advertising.endstate="suspended",n.advertising.vpaidcontrols=this.isForceVpaidControls,n.intl={en:{advertising:{admessage:"",cuetext:"",skipmessage:""},sharing:{heading:"Share Video"}}}):n.intl={en:{sharing:{heading:"Share Video"}}},n.autoPause.pauseAds="true"===this.pauseads,this.bids&&(n.advertising.bids=this.bids)),this.thePlayer.setup(n),this.playerEvents()}}playerEvents(){this.thePlayer.on("ready",(e=>{this.onReady(e);const t=this.querySelector(".jw-preview");this.posterImage&&t&&setTimeout((()=>{t.style.setProperty("background-image",`url('${this.posterImage}')`,"important");const e=this.querySelectorAll(".jw-custom-placeholder");e.length&&e.forEach((e=>{e.style.display="none"}))}),150)})),this.thePlayer.on("play",(e=>{this.playing=!0,e.currentMediaId=this.thePlayer.id,this.onPlay(e)})),this.thePlayer.on("pause",(e=>{this.onPause(e)})),this.thePlayer.on("mute",(e=>{this.muteUnmutePlaylist(e.mute),window.jwDefaults.mute=e.mute,e.currentMediaId=this.thePlayer.id,this.onMute(e)})),this.thePlayer.on("time",(e=>{this.currentTime=this.thePlayer.getPosition(),this.duration=this.thePlayer.getDuration(),this.onTimeUpdate(e)})),this.thePlayer.on("complete",(e=>{this.playing=!1,this.onEnded(e)}))}muteUnmutePlaylist(e){const t=`.VideoCarouselOverlay-player bsp-jw-player[data-player='${this.playerVId}'] video`;document.querySelectorAll(t).forEach((function(t){t.muted=e}))}play(){this.thePlayer.play()}pause(){try{this.thePlayer&&this.thePlayer.pause()}catch(e){console.error("player, Got an error pause function",e)}}}class T extends window.HTMLElement{connectedCallback(){this.tag=this.getAttribute("data-video-tag")||null,this.offset=this.getAttribute("data-video-offset")||null,this.playerDiv=this.querySelector(".placement-jw-player"),this.videoDataLayer=JSON.parse(this.getAttribute("data-video-datalayer"))||null,this.posterImage=this.playerDiv.getAttribute("poster")||"";let e=this.tag;if(e&&!e.includes("cust_params")&&(e+="&cust_params="),e){const t=encodeURIComponent("permutive="+encodeURIComponent(JSON.parse(localStorage._pdfps||"[]").slice(0,250).join(","))+"&vnd_prx_segments="+encodeURIComponent((this.videoDataLayer?.proximic_video_segments||[]).join(","))+"&member=no");e=e.replace(/(cust_params[^&]+)/,"$1"+t)}this.videoDataLayer&&(e+=encodeURIComponent(`&tags=${this.videoDataLayer.tags}&page_type=${this.videoDataLayer.page_type}\n        &category=${this.videoDataLayer.category}&environment=${this.videoDataLayer.dfp_kv.environment}`)),this.playerDiv.setAttribute("data-jw-ad_tag",e),new MutationObserver(((e,t)=>{e.forEach((e=>{e.addedNodes.forEach((e=>{1===e.nodeType&&e.matches(".jwplayer .jw-preview")&&(this.updateThumbnail(e),t.disconnect())}))}))})).observe(document.body,{childList:!0,subtree:!0})}updateThumbnail(e){e.style.setProperty("background-image",`url('${this.posterImage}')`,"important"),e.style.opacity=1}}class M extends window.HTMLElement{connectedCallback(){this.navDropdown(),this.switchLanguage()}navDropdown(){this.querySelector(".LanguagesMenu").addEventListener("click",(()=>{const e=this.querySelector(".LanguagesMenu-items");e.classList.contains("is-active")?e.classList.remove("is-active"):e.classList.add("is-active")}))}switchLanguage(){const e=this.querySelector(".LanguagesMenu-text-link");this.querySelectorAll(".LanguagesMenuItem-items-item-link").forEach((t=>{t.addEventListener("click",(()=>{const i=t.getAttribute("language-code");e.innerHTML=i}))}))}}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class q extends window.HTMLElement{constructor(e,t,i){super(e,i),D(this,"handleIntersect",((e,t)=>{e.forEach((e=>{e.isIntersecting&&(t.unobserve(e.target),this.remove())}))})),this.post=e,this.linkText=t,this.onDisconnectedCallback=i}updatePost(e){this.observer.unobserve(this.post),this.post=e,this.observer.observe(this.post)}connectedCallback(){this.classList.add("LiveBlogNewPostLink"),this.postLink=document.createElement("a"),this.postLink.insertAdjacentHTML("beforeend",'<svg class="icon-arrow-down"><use xlink:href="#icon-arrow-down"></use></svg>'),this.postLink.insertAdjacentText("beforeend",this.linkText),this.postLink.href=`#${this.post.id}`,this.postLink.classList.add("LiveBlogNewPostLink-link"),this.appendChild(this.postLink),this.dismissLink=document.createElement("a"),this.dismissLink.insertAdjacentHTML("beforeend",'<svg><use xlink:href="#close-x"></use></svg>'),this.dismissLink.href="#",this.dismissLink.classList.add("LiveBlogNewPostLink-dismissLink"),this.appendChild(this.dismissLink),this.postLink.addEventListener("click",(e=>{e.preventDefault(),window.history.pushState(null,null,`#${this.post.id}`),this.post.scrollIntoView()})),this.dismissLink.addEventListener("click",(e=>{e.preventDefault(),this.remove()})),this.observer=new window.IntersectionObserver(this.handleIntersect),this.observer.observe(this.post)}disconnectedCallback(){this.onDisconnectedCallback()}}const F=6e4,R=3e5;let B=F;const $="LiveBlog:newPosts";class O extends window.HTMLElement{connectedCallback(){this.screenWidth=Math.min(screen.width,window.innerWidth),this.postsEndpoint=this.getAttribute("data-posts-endpoint"),this.live=this.hasAttribute("data-live-event"),this.skipMainPost=this.hasAttribute("data-skip-main-post"),this.currentPostsEl=document.querySelector(".LiveBlogPage-currentPosts"),this.blogBodyEl=document.querySelector("#blogBody"),this.pageUpdateTime=document.querySelector("#blogUpdatedTimestamp")?.value,this.newBlogCount=0,this.isBodyUpdate=!1,this.docTitle=document.title;const e=document.querySelector(".LiveBlogPage-headline-sticky"),t=window.navigator.vendor;t&&t.toLowerCase().includes("apple")&&e.setAttribute("data-safari",!0),this.setBinds(),this.live&&this.createInterval()}async getNewPosts(){let e,t=200;const i=new URL(window.location.href),n=new URLSearchParams(i.search),s=new window.URLSearchParams,o=[...document.querySelectorAll(".LiveBlogPost")].reduce(((e,t)=>{const i=+t.getAttribute("data-posted-date-timestamp");return i>e?i:e}),null);n.has("tab")&&s.append("tab",n.get("tab")),o&&(s.append("since",o),s.append("version",Date.now()));const a=`${this.postsEndpoint}?${s}`;try{const i=await window.fetch(a);e=await i.text(),t=i.status}catch(e){return B=R,this.resetInterval(),console.error("Error getting new posts",e)}if(200!==t)return B=R,this.resetInterval(),console.error("Error getting new posts",t);B!==F&&(B=F,this.resetInterval());const r=(new window.DOMParser).parseFromString(e,"text/html"),l=r.querySelector(".LiveBlogPage-currentPosts").innerHTML.trim(),c=r.querySelectorAll("bsp-liveblog-post");if(c&&c.length){const e=parseInt(c.length);this.newBlogCount+=e,this.updateNewPostCount()}if(l){this.currentPostsEl.insertAdjacentHTML("afterbegin",l),this.emit("Ajax:Rendered");const e=this.currentPostsEl.querySelector("bsp-liveblog-post");this.createOrUpdateNewPostLink(e)}}async getPageUpdate(){let e,t=200;const i=new window.URLSearchParams;this.pageUpdateTime&&(i.append("since",this.pageUpdateTime),i.append("bodyVersion",Date.now()));const n=`${this.postsEndpoint}?${i}`;try{const i=await window.fetch(n);e=await i.text(),t=i.status}catch(e){return B=R,this.resetInterval(),console.error("Error getting page update",e)}if(200!==t)return B=R,this.resetInterval(),console.error("Error getting page update",t);B!==F&&(B=F,this.resetInterval());const s=(new window.DOMParser).parseFromString(e,"text/html");if(s.querySelector("#updatedBlogBody")){const e=document.createElement("div");e.classList.add("RichTextBody"),e.id="blogBody",e.innerHTML=s.querySelector("#updatedBlogBody")?.innerHTML.trim(),this.pageUpdateTime=parseInt(s.querySelector(".Page-blogUpdatedTimestamp")?.getAttribute("data-timestamp")||0),e&&(this.blogBodyEl.parentNode.replaceChild(e,this.blogBodyEl),this.emit("Ajax:Rendered"),this.isBodyUpdate=!0,setTimeout((()=>{this.blogBodyEl=document.querySelector("#blogBody")}),1e3))}}handleClick(e){e.preventDefault(e),this.emit($);const t=document.getElementById("reloadLiveBlog");let i=document.querySelector(".LiveBlogPage-currentPosts").offsetTop;if(this.isBodyUpdate){const e=new window.URLSearchParams;return e.append("version",Date.now()),window.location.href=`${this.postsEndpoint}?${e}`,!1}window.scrollTo(0,i-70),this.newBlogCount=0,this.updateNewPostCount(),t.classList.remove("show")}showReloadButton(){document.getElementById("reloadLiveBlog").classList.add("show")}updateNewPostCount(){const e=document.getElementById("reloadLiveBlog"),t=this.newBlogCount>1?"new updates":"new update",i=this.newBlogCount>10?"10+":this.newBlogCount;e.innerHTML=i+" "+t,document.title=`(${i}) ${this.docTitle}`,this.newBlogCount>0?this.showReloadButton():document.title=this.docTitle}createInterval(){this.interval=setInterval((()=>{this.getNewPosts(),this.getPageUpdate()}),B)}clearInterval(){clearInterval(this.interval)}resetInterval(){this.clearInterval(),this.createInterval()}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new window.CustomEvent(e,{bubbles:!0,detail:t});this.dispatchEvent(i)}createOrUpdateNewPostLink(e){this.newPostLink?this.newPostLink.updatePost(e):(this.newPostLink=new q(e,this.getAttribute("data-latest-update-text"),(()=>{this.newPostLink=null})),document.body.appendChild(this.newPostLink))}setBinds(){this.activeTab(),this.showHideTabs();const e=document.querySelectorAll(".tab-button"),t=document.getElementById("reloadLiveBlog");e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const i=e.getAttribute("data-tab");let n=new URL(window.location.href);n.searchParams.delete("tab"),n.hash="","all"!==i&&n.searchParams.set("tab",i),window.location.href=n.toString()}))})),t.addEventListener("click",this.handleClick.bind(this))}activeTab(){const e=new URL(window.location.href),t=new URLSearchParams(e.search),i=document.querySelector(".LiveBlogPage-tabs"),n=document.querySelector("[data-tab='all']");if(t.has("tab")){const e=t.get("tab"),s=document.querySelector(`[data-tab='${e}']`),o=document.getElementById(`tabBody-${e}`),a=document.getElementById(`tabAnchor-${e}`);if(s){s.classList.add("active");const e=i.getBoundingClientRect(),t=s.getBoundingClientRect();i.scrollLeft+=t.left-(e.left+70),o&&(o.style.display="block"),this.skipMainPost&&setTimeout((()=>{let e=a||document.querySelector("bsp-liveblog-post .LiveBlogPost-anchor");e&&e.scrollIntoView({behavior:"smooth"})}),1500)}else n.classList.add("active")}else n&&n.classList.add("active")}showHideTabs(){const e=document.querySelector(".LiveBlogPage-headline-sticky");if(!e||this.screenWidth>1023)return!1;let t=window.scrollY;const i=window.navigator.vendor;i&&i.toLowerCase().includes("apple")?window.addEventListener("scroll",(i=>{const n=window.scrollY;n>200&&"down"==(n>t?"down":"up")?e.setAttribute("data-hidden",!0):e.removeAttribute("data-hidden"),setTimeout((()=>{t=n}),500),i.stopPropagation()}),{passive:!0}):window.addEventListener("scrollend",(i=>{const n=window.scrollY;n>200&&"down"==(n>t?"down":"up")?e.setAttribute("data-hidden",!0):e.removeAttribute("data-hidden"),setTimeout((()=>{t=n}),500),i.stopPropagation()}),{passive:!0})}}class N extends window.HTMLElement{constructor(e){super(e),this.post=e}connectedCallback(){this.classList.add("LiveBlogFeed-post");const e=this.post.getdPostedTimeFormatted(),t=e.isWithinHour?" relative":"";let i=this.post.headline;(i||(i=this.post.altHeadline,i))&&(this.innerHTML=`<div class="LiveBlogFeed-post-time${t}">${e.formatted}</div>\n        <a href="#${this.post.id}" class="LiveBlogFeed-post-headline">${i}</a>`.trim(),this.addEventListener("click",(e=>{e.preventDefault(),window.history.pushState(null,null,`#${this.post.id}`),this.post.scrollIntoView()})))}}window.customElements.define("bsp-liveblog-feed-post",N);class H extends window.HTMLElement{connectedCallback(){this.feed=this.querySelector(".LiveBlogFeed-feed"),this.createOrUpdate(),document.addEventListener($,(()=>this.createOrUpdate()))}async createOrUpdate(){await window.customElements.whenDefined("bsp-liveblog-post"),this.posts=[...document.querySelectorAll("bsp-liveblog-post")],this.render()}render(){const e=this.posts.reduce(((e,t)=>(e[t.getdPostedDateFormatted()]||(e[t.getdPostedDateFormatted()]=[]),e[t.getdPostedDateFormatted()].push(t),e)),{}),t=Object.keys(e).map((t=>({date:t,posts:e[t]})));this.feed.innerHTML="",t.forEach((e=>{const t=document.createElement("div");t.classList.add("LiveBlogFeed-date"),t.innerText=e.date,this.feed.appendChild(t),e.posts.forEach((e=>{this.feed.appendChild(new N(e))}))}))}}const U=window.navigator.language||window.navigator.userLanguage||"en-US";class W extends window.HTMLElement{get postedDateTimestamp(){return+this.getAttribute("data-posted-date-timestamp")}get postedDate(){return new Date(this.postedDateTimestamp)}get isCurrentDay(){return this.getAttribute("data-is-current-day")}set isCurrentDay(e){e?this.setAttribute("data-is-current-day",""):this.removeAttribute("data-is-current-day")}get headline(){return this.querySelector(".LiveBlogPost-headline")?this.querySelector(".LiveBlogPost-headline").innerText:null}get altHeadline(){return this.getAttribute("data-alt-headline")}get id(){return this.getAttribute("data-post-id")}get timeZone(){let e="";try{e=/.*\s(.+)/.exec((new Date).toLocaleDateString(navigator.language,{timeZoneName:"short"}))[1]}catch(t){e=(new Date).toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")}return e}connectedCallback(){this.timeElement=this.querySelector(".LiveBlogPost-time"),this.dateElement=this.querySelector(".LiveBlogPost-date"),this.render(),document.addEventListener("LiveBlog:fetched",(()=>this.render()))}getdPostedTimeFormatted(){const e=new Date-this.postedDate;if(e<6e4)return{isWithinHour:!0,formatted:`${(e/1e3).toFixed(0)} ${this.getAttribute("data-seconds-delta-text")}`};if(e<36e5)return{isWithinHour:!0,formatted:`${(e/6e4).toFixed(0)} ${this.getAttribute("data-minutes-delta-text")}`};const t=this.timeZone.toUpperCase(),i="en-GB"===U?"en-US":U;return{isWithinHour:!1,formatted:`${this.postedDate.toLocaleString(i,{hour:"numeric",minute:"numeric",hour12:!0})} ${t}`}}getdPostedDateFormatted(){return this.postedDate.toLocaleString(U,{year:"numeric",month:"long",day:"numeric"})}render(){const e=this.getdPostedTimeFormatted(),t=e.isWithinHour?"relative":"";t&&this.timeElement.classList.add(t),this.timeElement.innerText=e.formatted,this.dateElement&&(this.dateElement.innerText=this.getdPostedDateFormatted());const i=new Date;i.setHours(0,0,0),this.isCurrentDay=this.postedDate>i}scrollIntoView(){const e={behavior:"smooth",...arguments};this.querySelector(".LiveBlogPost-anchor").scrollIntoView(e)}}class z extends window.HTMLElement{constructor(){super(),this.page=2,this.pages=parseInt(document.querySelector("bsp-liveblog")?.getAttribute("data-total-pages")||0),this.loadButton=document.querySelector(".LiveBlogFeed-Button"),this.loadingDiv=document.querySelector(".LoadMore-loading"),this.loading=!1,this.urlHash=window.location.hash||null,this.getLastPost(),this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&this.loadData()}))}))}connectedCallback(){if(!this.urlHash&&this.pages>1)this.observer.observe(this.lastPost);else if(this.urlHash){const e=document.getElementById(this.urlHash.replace("#",""));e?setTimeout((()=>{e.scrollIntoView()}),3e3):(this.page=-1,this.loadData())}this.loadButton&&this.loadButton.addEventListener("click",(()=>{this.loadData()}))}async loadData(){if(this.loading)return;this.observer.unobserve(this.lastPost),this.loading=!0,this.loadingDiv&&(this.loadingDiv.style.display="block"),this.loadButton&&(this.loadButton.style.display="none");let e=new URL(window.location.href);e.searchParams.set("page",this.page),e.searchParams.set("version",Date.now()),this.getNewPage(e.toString()).then((e=>{const t=document.createElement("div");t.innerHTML=e;const i=t.querySelector(".LiveBlogPage-currentPosts").innerHTML.trim();if(i&&this.page<=1)this.innerHTML=i;else if(i){const e=t.querySelector(".LiveBlogPage-currentPosts").childNodes;for(let t=0;t<e.length;t++)this.appendChild(e[t].cloneNode(!0))}this.page++,this.loading=!1;const n=document.querySelector("bsp-liveblog-feed");n&&(n.createOrUpdate(),this.loadingDiv&&(this.loadingDiv.style.display="none")),this.getLastPost(),!this.urlHash&&this.page<=this.pages?(this.observer.observe(this.lastPost),this.loadButton&&(this.loadButton.style.display="block"),setTimeout((()=>{this.loadButton.scrollIntoView()}),3e3)):this.urlHash&&setTimeout((()=>{document.getElementById(`${this.urlHash.replace("#","")}`).scrollIntoView(),this.page=this.pages}),3e3),setTimeout((()=>{window.properBuildSlots&&window.properBuildSlots()}),3e3)}))}getNewPage(e){return new Promise(((t,i)=>{window.fetch(e,{credentials:"include"}).then((e=>{t(e.text())})).catch((()=>{i(new Error("error"))}))}))}getLastPost(){const e=this.querySelectorAll("bsp-liveblog-post");e&&e.length&&(this.lastPost=e[e.length-1])}}const j=6e4,V=3e5;let Y=j;class X extends window.HTMLElement{connectedCallback(){this.screenWidth=Math.min(screen.width,window.innerWidth),this.postsEndpoint=this.getAttribute("data-live-blog-url"),this.live=this.hasAttribute("data-live-blog-url"),this.maxNumOfPosts=this.getAttribute("data-max-number-of-posts"),this.currentPostsEl=this,this.live&&this.createInterval()}async getNewPosts(){let e,t=200;const i=new window.URLSearchParams,n=this.getMostRecentPostEpoch();n&&(i.append("since",n),i.append("version",Date.now()),i.append("isModule",!0));const s=`${this.postsEndpoint}?${i}`;try{const i=await window.fetch(s);e=await i.text(),t=i.status}catch(e){return Y=V,this.resetInterval(),console.error("Error getting new posts",e)}if(200!==t)return Y=V,this.resetInterval(),console.error("Error getting new posts",t);Y!==j&&(Y=j,this.resetInterval());const o=(new window.DOMParser).parseFromString(e,"text/html").querySelector("bsp-liveblog-post-list").innerHTML.trim();o&&(this.currentPostsEl.insertAdjacentHTML("afterbegin",o),this.emit("Ajax:Rendered"),this.currentPostsEl.childElementCount+1>this.maxNumOfPosts&&this.currentPostsEl.removeChild(this.currentPostsEl.lastElementChild))}getMostRecentPostEpoch(){return Array.from(this.currentPostsEl.querySelectorAll(".PagePromo")).reduce(((e,t)=>{const i=+t.getAttribute("data-posted-date-timestamp");return i>e?i:e}),null)}createInterval(){this.interval=setInterval((()=>{this.getNewPosts()}),Y)}clearInterval(){clearInterval(this.interval)}resetInterval(){this.clearInterval(),this.createInterval()}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new window.CustomEvent(e,{bubbles:!0,detail:t});this.dispatchEvent(i)}}class G extends HTMLElement{get url(){return new URL(this.getAttribute("data-url"),location.origin)}connectedCallback(){this.querySelector("button").addEventListener("click",(e=>{e.preventDefault(),this.loadMore()}))}loadMore(){this.hasAttribute("data-loading")||(this.setAttribute("data-loading",""),window.fetch(this.url,{credentials:"include"}).then((e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html"),i=new CustomEvent(G.events.loadedContent,{bubbles:!0,detail:t});this.dispatchEvent(i)})).catch(console.log))}}D(G,"events",{loadedContent:"LoadMore:loadedContent"});class Z extends window.HTMLElement{async connectedCallback(){this.carouselSlides=this.querySelector('[class$="-slides"]')||this,this.carouselSlide=this.querySelector('[class$="-slides"]')||this,this.closeButtonEl=this.querySelector('[class$="-closeButton"]')||this,window.addEventListener("load",(()=>{this.carouselOptions={adaptiveHeight:!1,wrapAround:!0,prevNextButtons:!0,pageDots:!1,draggable:!0,lazyLoad:3,on:{change:e=>{this.onSlideChange(e)},select:e=>{this.onSlideChange(e)}}}})),this.closeButtonEl.addEventListener("click",(e=>this.onCloseCarousel(e))),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.onCloseCarousel(e)})),document.body.addEventListener("GalleryPageCarousel:Open",(e=>this.onOpenCarousel(e,y())))}onSlideChange(e){this.querySelector('[class$="-slide"][active]')&&this.querySelector('[class$="-slide"][active]').removeAttribute("active"),this.querySelector('[data-slide-id="slide-'+e+'"]').setAttribute("active","")}onCloseCarousel(e){e.preventDefault(),this.removeAttribute("active"),this.flickity.destroy(),document.documentElement.style.removeProperty("overflow")}onOpenCarousel(e,t){this.setAttribute("active",""),document.documentElement.style.setProperty("overflow","hidden"),this.flickity=new t(this.carouselSlides,this.carouselOptions),this.flickity.resize(),this.flickity.select(e.detail.index,!0,!0)}disconnectedCallback(){this.flickity.destroy()}}class K extends window.HTMLElement{get galleryStyle(){return this.dataset.galleryStyle}get headerHeight(){return document.querySelector(".Page-header").offsetHeight}get slides(){return this.querySelectorAll(".GallerySlideWaterfall img")}get fullScreenButtons(){return this.querySelectorAll('[class$="-fullScreenButton"]')}connectedCallback(){this.handleEventListeners()}handleEventListeners(){window.addEventListener("load",(()=>{"waterfall"===this.galleryStyle&&this.slideClickEvent()}))}slideClickEvent(){this.slides.forEach((t=>{t.addEventListener("click",(i=>{i.preventDefault(),e(t)})),t.addEventListener("keyup",(i=>{i.preventDefault(),"Enter"===i.key&&(e(t),document.querySelector('[class$="-closeButton"]').focus())}))})),this.fullScreenButtons.forEach((t=>{t.addEventListener("click",(i=>{const n=t.nextElementSibling.querySelector(".GallerySlideWaterfall img");i.preventDefault(),e(n)}))}));const e=e=>{const t=e.closest("[data-slide-index]").dataset.slideIndex;document.body.dispatchEvent(new window.CustomEvent("GalleryPageCarousel:Open",{detail:{index:t}}))}}}class J extends window.HTMLElement{connectedCallback(){const e=this.getAttribute("data-url"),t=this,i=this.parentElement;fetch(e).then((e=>e.text())).then((e=>{const n=(new DOMParser).parseFromString(e,"text/html");Array.from(n.body.children).forEach((e=>{const n=e.querySelector(".Banner-link");if(n){const e=n?.getAttribute("href");if(!e)return;if(new URL(e,window.location.origin).pathname===window.location.pathname)return}i.insertBefore(e,t)})),i.removeChild(t)})).catch((function(e){console.log("Failed to fetch page: ",e)}))}}class Q{static createCookie(e,t,i,n){let s="",o="",a="";a=i?new Date(parseInt(i)):new Date(19249236e5),s="; expires="+a.toUTCString(),n&&(o=`;domain=${n}`),document.cookie=e+"="+t+s+o+"; path=/"}static hasCookie(e){return null!=this.getCookie(e)}static getCookie(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}static eraseCookie(e,t){this.createCookie(e,"",3155508e5,t)}static daysInUTC(e){const t=new Date;return t.setDate(t.getDate()+parseInt(e))}}class ee extends HTMLElement{get cookieName(){return this.getAttribute("cookie-name")}get input(){return this.querySelector("input")}updateValue(){this.input.value=Q.getCookie(this.cookieName)}connectedCallback(){this.updateValue()}}class te extends HTMLElement{get input(){return this.querySelector("input")}connectedCallback(){this.input.value=document.referrer}}class ie extends HTMLElement{connectedCallback(){this.elWrap=this.closest("[data-scroll-shade-parent]"),this.addEventListener("scroll",p(50,(()=>{this.updateScrollShades()}))),window.addEventListener("resize",p(50,(()=>{this.updateScrollShades()}))),this.querySelector("img")?.addEventListener("load",(()=>{setTimeout(this.updateScrollShades.bind(this),300)})),window.addEventListener("load",this.updateScrollShades.bind(this))}updateScrollShades(){const e=Math.ceil(this.scrollLeft),t=Math.ceil(this.scrollTop),i=this.scrollWidth-this.clientWidth,n=this.scrollHeight-this.clientHeight;let s="";this.clientWidth<this.scrollWidth&&(s+=0===e?"forward":e===i?"backward":"forward backward"),this.clientHeight<this.scrollHeight&&(0===t?s+="downward":t===n?s+="upward":s="downward upward"),this.elWrap.setAttribute("data-scrollable-direction",s||"none")}}class ne{constructor(){document.querySelectorAll(".HtmlModule").forEach((e=>{const t=e.querySelector("iframe");if(t){const e=t.getAttribute("width")||"640",i=t.getAttribute("height")||"360";if(-1!==e.indexOf("%")||-1!==i.indexOf("%"))return;t.classList.contains("dianomi-parent-iframe")?t.style.maxWidth="100%":t.classList.add("script-constrained");const n=parseInt(e,10),s=parseInt(i,10),o=n>=s?n/s:s/n;t.style.aspectRatio=o}}))}}class se{constructor(){const e=document.querySelectorAll("[data-animate-on-scroll]"),t={threshold:.25};e.forEach((e=>{e.setAttribute("data-not-scrolled",!0)})),e.forEach((e=>{new window.IntersectionObserver((function(e){e.forEach((function(e){const t=e.target;e.isIntersecting&&(t.removeAttribute("data-not-scrolled"),t.setAttribute("data-scrolled",!0))}))}),t).observe(e)}))}}class oe extends window.HTMLElement{connectedCallback(){this.pageActionsInited||this.init()}init(){const e=this.querySelectorAll("[data-collapse-element]"),t=this.querySelectorAll("[data-collapse-close]");this.CollapseObj=new k(e[0]),this.addEventListener("click",(e=>{n.call(this,e,"[data-collapse-element]",(()=>{const e=this.querySelector(".Page-actions-tooltip");e&&e.classList.contains("is-visible-mobile")&&e.classList.remove("is-visible-mobile")})),n.call(this,e,"[data-collapse-close]",(()=>{this.CollapseObj.toggle()}))})),t.forEach((e=>{e.addEventListener("keydown",(e=>{"Space"!==e.code&&"Enter"!==e.code||(e.preventDefault(),this.CollapseObj.toggle())}))})),document.documentElement.classList.contains("StoryPage")&&this.initGoogleTooltip(),this.pageActionsInited=!0}initGoogleTooltip(){const e=this.querySelector(".Page-actions-tooltip"),t=this.querySelector(".Page-actions-tooltip-close"),i=this.querySelector(".Page-actions-google-trigger");if(!e||!t||!i)return;const n=()=>window.innerWidth<1024;let s;t.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),e.classList.remove("is-visible-mobile"),sessionStorage.setItem("googleTooltipClosed","true")})),t.addEventListener("keydown",(t=>{"Space"!==t.code&&"Enter"!==t.code||(t.stopPropagation(),t.preventDefault(),e.classList.remove("is-visible-mobile"),sessionStorage.setItem("googleTooltipClosed","true"))})),e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault()})),requestAnimationFrame((()=>{(()=>{const t=n(),i=sessionStorage.getItem("googleTooltipClosed");t&&!i&&e.classList.add("is-visible-mobile")})()})),window.addEventListener("resize",(()=>{clearTimeout(s),s=setTimeout((()=>{n()||e.classList.remove("is-visible-mobile")}),250)}))}}class ae extends window.HTMLElement{connectedCallback(){new window.IntersectionObserver((function(e){e.forEach((function(e){const t=e.target.querySelector("video");e.isIntersecting?t.play():t.pause()}))})).observe(this)}}class re extends window.HTMLElement{connectedCallback(){this.elCache(),f.call(this),this.setBinds()}elCache(){this.elTriggerVideos=this.querySelector("[data-lead-superlead-button-videos]"),this.elTriggerImages=this.querySelector("[data-lead-superlead-button-images]"),this.totalImages=this.elTriggerImages?.querySelector(".Page-lead-superleadUI-count")?.textContent.trim(),this.totalVideos=this.elTriggerVideos?.querySelector(".Page-lead-superleadUI-count")?.textContent.trim(),this.tplVideos=this.querySelector("[data-bsp-video-playlist-module-template]"),this.tplImages=this.querySelector("[data-bsp-carousel-overlay-template]"),this.totalImages&&(window.dataLayer.push({phototab_shown:this.totalImages}),m("phototab_shown",{})),this.totalVideos&&(window.dataLayer.push({videotab_shown:this.totalVideos}),m("videotab_shown",{}))}setBinds(){this.elTriggerVideos?.addEventListener("click",(()=>{window.dataLayer.push({video_clicked:this.totalVideos}),m("video_clicked",{}),this.createVideoPlaylistModuleOverlay(),this.elVideoOverlay.setAttribute("data-state","open")})),this.elTriggerImages?.addEventListener("click",(()=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({photo_clicked:this.totalImages}),m("photo_clicked",{})}))}createVideoPlaylistModuleOverlay(){const e=`VideoPlaylistModuleOverlay_${[...document.querySelectorAll("[data-module], bsp-lead-superlead-ui")].indexOf(this)}`;document.getElementById(e)||(this.elVideoOverlay=document.createElement("div"),this.elVideoOverlay.className="VideoPlaylistModuleOverlay",this.elVideoOverlay.id=e,this.elVideoOverlay.innerHTML=this.tplVideos.innerHTML,document.body.appendChild(this.elVideoOverlay),this.elVideoOverlay.querySelector("[data-bsp-video-playlist-module-overlayclose]").addEventListener("click",(()=>{this.elVideoOverlay.removeAttribute("data-state")})))}}class le extends window.HTMLElement{async connectedCallback(){this.carouselSlides=this.querySelector('[class$="-items"]')||this,this.observer=new IntersectionObserver(this.handleIntersection,{threshold:.25}),this.carouselSlideItems=this.carouselSlides.querySelectorAll('[class$="-item"]'),this.carouselSlideItems.forEach((e=>{this.observer.observe(e)})),this.initializeFlickity(),setTimeout((()=>{this.onFlickityReady()}),3e3)}initializeFlickity(){this.carouselOptions={adaptiveHeight:!1,cellAlign:"left",imagesLoaded:!0,lazyLoad:3,pageDots:!1,prevNextButtons:!1,watchCSS:!0},(this.classList.contains("PageListCarouselF")||this.classList.contains("ProductListCarousel"))&&(this.carouselOptions=Object.assign(this.carouselOptions,{adaptiveHeight:!0,cellAlign:"left",groupCells:"100%",imagesLoaded:!0,lazyLoad:2,pageDots:!1,prevNextButtons:!0,watchCSS:!0})),this.classList.contains("PageListCarouselA")&&(this.carouselOptions=Object.assign(this.carouselOptions,{adaptiveHeight:!1,cellAlign:"left",groupCells:"100%",imagesLoaded:!0,lazyLoad:2,pageDots:!1,prevNextButtons:!0,watchCSS:!0})),this.classList.contains("VideoPlaylistModuleCarousel")&&(f.call(this),this.carouselOptions=Object.assign(this.carouselOptions,{adaptiveHeight:!1,cellAlign:"left",groupCells:"100%",imagesLoaded:!0,lazyLoad:2,pageDots:!1,prevNextButtons:!0,watchCSS:!0})),this.classList.contains("AuthorListB")&&(this.carouselOptions=Object.assign(this.carouselOptions,{adaptiveHeight:!1,cellAlign:"left",groupCells:"100%",imagesLoaded:!0,lazyLoad:2,prevNextButtons:!0,pageDots:!1})),this.classList.contains("QuoteListA")&&(this.carouselOptions=Object.assign(this.carouselOptions,{adaptiveHeight:!1,cellAlign:"left",imagesLoaded:!0,lazyLoad:2,prevNextButtons:!0,pageDots:!1})),this.classList.contains("LogoListA")&&(this.carouselOptions=Object.assign(this.carouselOptions,{adaptiveHeight:!0,cellAlign:"left",imagesLoaded:!0,lazyLoad:2,prevNextButtons:!0,pageDots:!1,wrapAround:!0})),this.carouselOptions.on={ready:()=>{this.repositionArrows(),this.checkBtnStatus()}},this.flickity=new(y())(this.carouselSlides,this.carouselOptions),window.addEventListener("resize",p(50,(()=>{this.repositionArrows(),this.checkBtnStatus()})))}onFlickityReady(){this.repositionArrows(),this.checkBtnStatus()}handleIntersection(e){e.map((e=>{if(!e.isIntersecting)return;const t=e.target;t.hasAttribute("aria-hidden")&&t.removeAttribute("aria-hidden")}))}disconnectedCallback(){this.flickity.destroy(),this.carouselSlideItems.forEach((e=>{this.observer.unobserve(e)}))}repositionArrows(){const e=this.querySelector(".Promo-media");if(e){const t=e.offsetHeight;this.querySelectorAll(".flickity-prev-next-button").forEach((e=>{e.style.top=t/2+"px"}))}}checkBtnStatus(){const e=this.querySelector(".flickity-button.flickity-prev-next-button.previous"),t=this.querySelector(".flickity-button.flickity-prev-next-button.next");if(e&&t){const i={attributes:!0,childList:!1,subtree:!1},n=new MutationObserver(((e,t)=>{for(const t of e)"attributes"===t.type&&this.changeBtnStyle()}));n.observe(e,i),n.observe(t,i),this.changeBtnStyle()}}changeBtnStyle(){const e=window.screen.width,t=this.querySelector(".flickity-button.flickity-prev-next-button.previous"),i=this.querySelector(".flickity-button.flickity-prev-next-button.next");t.hasAttribute("disabled")&&i.hasAttribute("disabled")?(t.style.display="none",i.style.display="none"):e>786&&(t.style.display="block",i.style.display="block")}}function ce(e,t){t=Object.assign({itemSelector:'[data-list-loadmore-items] > [class*="-items-item"]'},t);const i=this.querySelector(`[${e}]`);let n=0;if(!i)return;var s=parseInt(i.getAttribute(`${e}-startsat`)||"5");const o=parseInt(i.getAttribute(`${e}-maxinjections`)||"5"),a=parseInt(i.getAttribute(`${e}-repetition`)||"5");this.injectAds=()=>{const e=this.querySelectorAll(t.itemSelector),r=i.innerHTML;for(;s<e.length+1;)if(e[s-1].insertAdjacentHTML("beforeend",r),s+=a,n++,n===o){this.injectAds=()=>{};break}},this.injectAds(),document.body.addEventListener("Ajax:Rendered",(()=>{this.injectAds(),setTimeout((()=>{window.properBuildSlots&&window.properBuildSlots()}),3e3)}))}function de(e,t){t=Object.assign({itemSelector:'[data-list-loadmore-items] > [class*="-items-item"]'},t);const i=this.querySelector(`[${e}]`);let n=0;if(!i)return;var s=parseInt(i.getAttribute(`${e}-startsat`)||"5");const o=parseInt(i.getAttribute(`${e}-maxinjections`)||"5"),a=parseInt(i.getAttribute(`${e}-repetition`)||"5");this.injectAdsAlt=()=>{const e=this.querySelectorAll(t.itemSelector),r=i.innerHTML;for(;s<e.length+1;)if(e[s-1].insertAdjacentHTML("beforeend",r),s+=a,n++,n===o){this.injectAdsAlt=()=>{};break}},this.injectAdsAlt(),document.body.addEventListener("Ajax:Rendered",(()=>{this.injectAdsAlt()}))}function he(e,t){t=Object.assign({itemSelector:'[data-list-loadmore-items] > [class*="-items-item"]'},t);const i=this.querySelector(`[${e}]`);let n=0;if(!i)return;var s=parseInt(i.getAttribute(`${e}-startsat`)||"5");const o=parseInt(i.getAttribute(`${e}-maxinjections`)||"5"),a=parseInt(i.getAttribute(`${e}-repetition`)||"5");this.injectHtmlEmbeds=()=>{const e=this.querySelectorAll(t.itemSelector),r=i.innerHTML;for(;s<e.length+1;)if(e[s-1].insertAdjacentHTML("beforeend",r),s+=a,n++,n===o){this.injectHtmlEmbeds=()=>{};break}},this.injectHtmlEmbeds(),document.body.addEventListener("Ajax:Rendered",(()=>{this.injectHtmlEmbeds()}))}function ue(e){ce.call(this,"data-injectedmodule",e),de.call(this,"data-injectedmodule-alt",e),he.call(this,"data-injectedmodule-html-embed",e)}const pe={selItems:"[data-list-loadmore-items]",selPagination:"[data-list-loadmore-pagination]",pageCacheRegex:/(page|p)=([0-9]*)$/},ge="data-list-loadmore";class me extends window.HTMLElement{connectedCallback(e){this.el=this,this.settings=Object.assign({},pe,e),this.el.setAttribute(ge,""),this.pageHrefCache=[1],ue.call(this,{itemSelector:'[data-list-loadmore-items] > [class*="-items-item"]'}),this.init()}init(){this.elItems=this.el.querySelector(this.settings.selItems),this.setBinds()}loadMore(e,t){const i=this,n=this.el.className,s=me.findClassNameMatches(document,n),o=Array.from(s).indexOf(this.el);this.pageHrefCache.push(this.getPageNum(e)),this.el.setAttribute(ge,"loading"),window.fetch(e,{credentials:"include"}).then((e=>(this.el.setAttribute(ge,""),e.text()))).then((e=>{const s=document.createElement("div");s.innerHTML=e;const a=me.findClassNameMatches(s,n),r=a[o].querySelector(i.settings.selItems),l=a[o].querySelector(i.settings.selPagination);"function"==typeof t?t(r,l,a[o]):this.render(r,l,i.elItems,i.elPagination)})).catch((function(e){console.error(e)}))}next(e){if(this.elPagination){const t=this.elPagination.querySelector("a");t&&this.loadMore(t.href,e)}}setBinds(){this.elPagination&&this.elPagination.addEventListener("click",(e=>{const t=e.target;"A"===t.nodeName.toUpperCase()&&(e.preventDefault(),this.loadMore(t.href))}))}getPageNum(e){try{const t=this.settings.pageCacheRegex.exec(e);return parseInt(t[2])}catch(t){return console.info("ListLoadMore",`${e} not a new page number`),0}}updatePaginationDOM(e){[...e.querySelectorAll(":scope > a")].forEach((e=>{this.pageHrefCache.indexOf(this.getPageNum(e.href))>=0&&e.parentNode.removeChild(e)})),this.elPagination.innerHTML=e.innerHTML}static findClassNameMatches(e,t){return e.querySelectorAll(`[class=${t}]`)}get elPagination(){return this.el.querySelector(this.settings.selPagination)}render(e,t){e&&this.elItems.insertAdjacentHTML("beforeend",e.innerHTML),t?this.updatePaginationDOM(t):this.elPagination.parentNode.removeChild(this.elPagination),this.dispatchRendered()}dispatchRendered(){const e=new window.CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(e)}}var fe=s(876),ve=s.n(fe);const ye={elTrackableModules:"[data-module]:not(.Page-main):not(.PageListEnhancementGeneric):not(.Advertisement):not(.TaboolaRecommendationModule):not([data-module-trackunsubscribe]),[data-module-tracksubscribe], .LiveBlogPost",elUntrackableParents:".Page-lead"},be=document.querySelector("[data-named-page-type]")?.getAttribute("data-named-page-type");localStorage.setItem("pageType",be);const we=be?`${be}_`:"";function Se(e){return e.hasAttribute("data-gtm-modulestyle")?e.getAttribute("data-gtm-modulestyle"):e.className}function Ee(e,t){const i={eventtype:t};if(e.hasAttribute("data-morebutton"))m("interactedMainNavMore",i);else if(e.classList.contains("HamburgerNavigation-items-item")){const t=e.querySelector(".HamburgerNavigationItem-text"),n=t?.querySelector("a");t?.innerText&&(i.text=t?.innerText),n?.href&&(i.href=n?.href),m("interactedHamburgerNav",i)}else if(e.classList.contains("MainNavigationItem")){const t=e.querySelector(".AnClick-MainNav"),n=t?.querySelector("a");t?.innerText&&(i.text=t?.innerText),n?.href&&(i.href=n?.href),m("interactedSubNav",i)}}function ke(e){const t={};return t.module_style=Se(e),t.data_ad_position=e.getAttribute("data-ad-position"),t.module_number=e.getAttribute("data-module-number"),t.module_name=e.closest("[data-gtm-region]")?.getAttribute("data-gtm-region")||"No Value",t.module_topic=e.closest("[data-gtm-topic]")?.getAttribute("data-gtm-topic")||"No Value",t}function _e(){const e=new IntersectionObserver((t=>{t.forEach((t=>{const{intersectionRatio:i}=t;i>=.5?t.target._timeout=setTimeout((()=>{const i=t.target;if(Math.min(i.offsetHeight,i.offsetWidth)){e.unobserve(i);let t=Object.assign({},ke(i));const n=i.getAttribute("data-separate-event"),s=i.getAttribute("data-separate-value"),o=i.getAttribute("data-event-name");n?(s&&(t={audioTitle:s}),m(`${n}Shown`,t)):t.data_ad_position?(t={Viewed:`Ad-${t.data_ad_position}`,Url:window.location.href,style:t.module_style},m("Story_advertisement_shown",t)):m(o?`${o}_shown`:`${we}module_shown`,t)}}),2e3):(clearTimeout(t.target._timeout),t.target._timeout=null)}))}),{threshold:.5}),t=new IntersectionObserver((e=>{e.forEach((e=>{const{isIntersecting:i}=e;if(i){const i=e.target;if(Math.min(i.offsetHeight,i.offsetWidth)){t.unobserve(i);const e=Object.assign({},ke(i));m(`${we}module_shown`,e)}}}))}),{threshold:.2});this.trackableModules.forEach((i=>{i.querySelector(".PageListStandardD")?t.observe(i):e.observe(i)}));const i=[...this.trackableModules].filter((e=>!e.parentElement.closest(ye.elTrackableModules)));this.storyAds=document.querySelectorAll(".StoryPage .SovrnAd[class*='sovrn-']").forEach(((t,i)=>{t.setAttribute("data-ad-position",i+1),e.observe(t)})),i.forEach((e=>{const t=i.indexOf(e)+1;e.setAttribute("data-module-number",t),e.setAttribute("data-main-module-number",`${t}`);const n=e.querySelectorAll(ye.elTrackableModules);n.forEach((e=>{const i=[...n].indexOf(e)+1;e.setAttribute("data-module-number",`${t}.${i}`),e.setAttribute("data-main-module-number",`${t}`)}))})),window._taboola.push({listenTo:"readmore.render",handler:()=>{const t=document.querySelector(".tbl-read-more-box");t&&(t.setAttribute("data-event-name","read_more_button"),t.setAttribute("data-module",""),t.setAttribute("data-gtm-region","readmore_module"),t.setAttribute("data-gtm-topic","read_more_button"),e.observe(t))}}),window._taboola.push({listenTo:"readmore.click",handler:()=>{m("read_more_clicked",{module_name:"readmore_module",module_style:"tbl-read-more-box",article_link:window.location.href})}})}function Ce(){const e=new IntersectionObserver((t=>{t.forEach((t=>{const{intersectionRatio:i}=t;if(i>=.1){const i=t.target;Math.min(i.offsetHeight,i.offsetWidth)&&(e.unobserve(i),m("taboola_homepage_module_shown",{module_type:"Taboola",module_name:i.getAttribute("data-type"),module_style:Se(i)}))}}))}),{threshold:.1});setTimeout((()=>{const t=document.querySelector('.TaboolaRecommendationModule[data-feed-main-container-id="taboola-below-homepage-thumbnails"]');t&&(t.setAttribute("data-type","Below Homepage Thumbnails"),e.observe(t),t.addEventListener("click",(e=>{n.call(this,e,"a.item-thumbnail-href, a.item-label-href",(e=>{m("taboola_homepage_module_click",{module_type:"Taboola",module_name:"Below Homepage Thumbnails",module_headline:e.delegateTarget.href,module_style:Se(t)})}))})));const i=document.querySelector('.TaboolaRecommendationModule[data-feed-main-container-id="taboola-suggested-for-you"]');i&&(i.setAttribute("data-type","SUGGESTED FOR YOU"),e.observe(i),i.addEventListener("click",(e=>{n.call(this,e,"a.item-thumbnail-href, a.item-label-href",(e=>{m("taboola_homepage_module_click",{module_type:"Taboola",module_name:"SUGGESTED FOR YOU",module_headline:e.delegateTarget.href,module_style:Se(i)})}))})))}),3e3)}function Ae(){const e=new IntersectionObserver((t=>{t.forEach((t=>{const{intersectionRatio:i}=t;if(i>=.1){const i=t.target;Math.min(i.offsetHeight,i.offsetWidth)&&(e.unobserve(i),m("taboola_article_module_shown",{module_type:"Taboola",module_name:i.getAttribute("data-type"),module_style:Se(i)}))}}))}),{threshold:.1});setTimeout((()=>{const t=document.querySelector('.TaboolaRecommendationModule[data-feed-main-container-id="taboola-below-article-thumbnails"]');t&&(t.setAttribute("data-type","Below Article Thumbnails"),e.observe(t),t.addEventListener("click",(e=>{n.call(this,e,"a.item-thumbnail-href, a.item-label-href",(e=>{m("taboola_article_module_click",{module_type:"Taboola",module_name:"Below Article Thumbnails",module_headline:e.delegateTarget.href,module_style:Se(t)})}))})));const i=document.querySelector('.TaboolaRecommendationModule[id="taboola-mid-article-reco-reel-slider"]');i&&(i.setAttribute("data-type","Mid Article Reco Reel Slider"),e.observe(i),i.addEventListener("click",(e=>{n.call(this,e,"a.item-thumbnail-href, a.item-label-href",(e=>{m("taboola_article_module_click",{module_type:"Taboola",module_name:"Mid Article Reco Reel Slider",module_headline:e.delegateTarget.href,module_style:Se(i)})}))})));const s=document.querySelector('.TaboolaRecommendationModule[id="taboola-right-rail-thumbnails"]');s&&(s.setAttribute("data-type","Article Right Rail Thumbnails"),e.observe(s),s.addEventListener("click",(e=>{n.call(this,e,"a.item-thumbnail-href, a.item-label-href",(e=>{m("taboola_article_module_click",{module_type:"Taboola",module_name:"Article Right Rail Thumbnails",module_headline:e.delegateTarget.href,module_style:Se(s)})}))})));const o=document.querySelector('.trc_related_container[id="tbl-explore-more-container"]');o&&(o.setAttribute("data-type","Article Explore More"),o.setAttribute("data-gtm-modulestyle","TaboolaRecommendationModule Article-Explore-More"),e.observe(o),o.addEventListener("click",(e=>{n.call(this,e,"a.item-thumbnail-href, a.item-label-href",(e=>{m("taboola_article_module_click",{module_type:"Taboola",module_name:"Article Explore More",module_headline:e.delegateTarget.href,module_style:Se(o)})}))})))}),4e3)}class Le{constructor(){this.trackableModules=document.querySelectorAll(ye.elTrackableModules),this.trackableModules=[...this.trackableModules].filter((e=>!e.closest(ye.elUntrackableParents))),this.init()}init(){this.setBinds(),this.pageLoadEvents(),window.gtag&&window.console.log("gtag",gtag)}pageLoadEvents(){try{const e=[];this.storyAds=document.querySelectorAll(".StoryPage .SovrnAd[class*='sovrn-']").forEach(((t,i)=>{e[i]={Placed:`Ad-${i+1}`,Url:window.location.href,style:t.className}})),m("Story_advertisement_placed",e)}catch(e){console.error("Got an error on Story_advertisement_placed event",e)}function e(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};document.querySelector(e)&&m(t,i)}e(".PagePromo-sponsored","loadedPageHasSponsoredPromo"),e(".Page-sponsored","loadedPageSponsored"),e(".Page-translatedStoryLink","translation_link_viewed")}setBinds(){document.addEventListener("click",(e=>{n.call(this,e,".Page-header-menu-trigger",(()=>{m("clickBurgerNav")})),n.call(this,e,"[data-action-clicked]",(()=>{const t=e.delegateTarget.getAttribute("data-action-clicked");t&&m(t)})),n.call(this,e,"[data-click]",(()=>{const t=e.delegateTarget,i=t.classList.contains("play")?"play":t.classList.contains("pause")?"pause":null,n=t.getAttribute("data-title");i&&m("audioModuleClicked",{audioTitle:n,audioAction:i})})),n.call(this,e,".ActionLink",(()=>{let t=e.delegateTarget.getAttribute("data-social-service");"copylink"===t?t="copy link":"mailto"===t&&(t="email"),m("clickShareLink",{socialService:t})})),n.call(this,e,".Page-translatedStoryLink a",(()=>{m("translation_link_clicked",{translatedUrl:e.delegateTarget.href})})),n.call(this,e,".Subheader a",(()=>{const t=e.delegateTarget.href,i=e.delegateTarget.closest("[data-sectionTitle]")?.getAttribute("data-sectionTitle")||"No Value";let n=e.delegateTarget.innerText;const s=e.delegateTarget.querySelector(".Newsletter-Title");s&&(n=s.innerText),m("clickedSubNavLink",{href:t,linkText:n,sectionTitle:i?.toUpperCase()})}))})),setTimeout((()=>{_e.call(this)}),1e3),setTimeout((()=>{Ce.call(this)}),2e3),setTimeout((()=>{Ae.call(this)}),3e3),document.addEventListener("click",(e=>{let t=ye.elTrackableModules.split(",");t=`${t.join(" a,")} a`,n.call(this,e,`${t}`,(e=>{const t=e.delegateTarget,i=t.closest(ye.elTrackableModules);if(!i.closest(ye.elUntrackableParents)){let e;const n=Object.assign({href:t.href},ke(i));t.hasAttribute("data-gtm-enhancement-style")&&(n.enhancement_style=t.getAttribute("data-gtm-enhancement-style")),t.hasAttribute("data-gtm-region-item")?n.linkText=t.innerText:t.closest("[data-gtm-region-item]")?.querySelector(".PagePromo-title")?.innerText&&(n.linkText=t.closest("[data-gtm-region-item]")?.querySelector(".PagePromo-title")?.innerText);const s=t.getAttribute("aria-label");t.innerText&&t.innerText!==n.itemTitle?n.linkText=t.innerText:s&&(n.linkText=s),e=t.closest(".PageListHubPeek")?`${we}clickHubPeekLink`:t.closest(".PageList-header, .Container-header")?`${we}module_heading_clicked`:t.closest("[data-event-name]")?`${t.closest("[data-event-name]")?.getAttribute("data-event-name")}_clicked`:`${we}module_clicked`,n.moduleNumber=t.closest("[data-module-number]")?.getAttribute("data-module-number"),n.main_module_number=t.closest("[data-main-module-number]")?.getAttribute("data-main-module-number"),m(e,n),"Home page"===be&&(history.scrollRestoration="auto")}}))}))}}const Pe=new class{constructor(){this.queue=[],this.isZephrReady=!1,this.intervalId=null,this.checkInterval=500,this.maxRetryTime=15e3,this.startTime=Date.now(),this.LS_KEY="auth_state",this.startPolling()}_isRealZephrReady(){const e=window.Zephr;return!!(e&&e.accessDetails&&"object"==typeof e.accessDetails&&"authenticated"in e.accessDetails)}enqueue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preferRealZephr:i=!0}=t;if(this.isZephrReady&&window.Zephr?.accessDetails){try{e(window.Zephr,!1,!1)}catch(e){console.error(e)}return}if(i)return void this.queue.push({cb:e,preferRealZephr:!0});const n=this._getSessionId(),s=this._getCachedAuth(n);if(console.log("[zephr] sessionId:",n,"cache keys:",Object.keys(this._readAuthCache()),"cached.exists:",s.exists,"preferRealZephr:",i),n&&s.exists){const t={accessDetails:{authenticated:!!s.value}};try{e(t,!1,!0)}catch(e){console.error(e)}}else this.queue.push({cb:e,preferRealZephr:!1})}checkAuthentication(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.enqueue(((t,i)=>{if(i)return console.warn("Zephr timeout - assuming user is not authenticated"),void e(!1,null,!0);e(t?.accessDetails?.authenticated||!1,t,!1)}),t)}getAccessDetails(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.enqueue(((t,i)=>{if(i)return console.warn("Zephr timeout - access details unavailable"),void e(null,null,!0);e(t?.accessDetails??null,t,!1)}),t)}setAuthState(e){const t=this._getSessionId();t&&this._writeAuthCache(t,!!e)}checkZephrAvailability(){if(Date.now()-this.startTime>=this.maxRetryTime)return console.warn("Zephr loading timeout after 15s. Executing queue with null."),this.executeQueue(!0),this.stopPolling(),!1;if(this._isRealZephrReady()){this.isZephrReady=!0;const e=this._getSessionId();if(e){const t=!!window.Zephr?.accessDetails?.authenticated,i=!!window.Zephr?.openModal;t&&i||this._writeAuthCache(e,t)}return this.executeQueue(!1),this.stopPolling(),!0}return!1}executeQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=e?null:window.Zephr;for(;this.queue.length>0;){const{cb:i}=this.queue.shift();try{i(t,e,!1)}catch(e){console.error("Error executing queued Zephr function:",e)}}}startPolling(){this.intervalId||(this.intervalId=setInterval((()=>this.checkZephrAvailability()),this.checkInterval))}stopPolling(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}_getSessionId(){return this._getCookie("blaize_session")}_getCookie(e){if("undefined"==typeof document)return null;const t=e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1"),i=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return i?decodeURIComponent(i[1]):null}_readAuthCache(){if("undefined"==typeof window)return{};try{const e=window.localStorage.getItem(this.LS_KEY);if(!e)return{};const t=JSON.parse(e);return t&&"object"==typeof t?t:{}}catch{return{}}}_writeAuthCache(e,t){if("undefined"!=typeof window)try{const i={[e]:!!t};window.localStorage.setItem(this.LS_KEY,JSON.stringify(i))}catch(e){console.warn("Failed to write auth_state to localStorage:",e)}}_getCachedAuth(e){if(!e)return{exists:!1,value:null};const t=this._readAuthCache();return Object.prototype.hasOwnProperty.call(t,e)?{exists:!0,value:!!t[e]}:{exists:!1,value:null}}};class xe extends window.HTMLElement{connectedCallback(){this.pageType=document.querySelector("[data-named-page-type]")?.getAttribute("data-named-page-type"),this.isBubbleCommentEnabled="true"===document.querySelector("[data-is-bubble-comment-enabled]")?.getAttribute("data-is-bubble-comment-enabled"),console.log("Bubble comment enabled:",this.isBubbleCommentEnabled),console.log("Element attributes:",this.attributes);const e=Array.from(document.querySelectorAll("div")).filter((e=>e.querySelector("#custom-viafoura-tray")));e&&e.length&&(console.log("Setting divs containing custom-viafoura-tray to 0px on page load"),e.forEach((e=>{e.style.minHeight="0px",e.style.height="0px"}))),this.detectChangeInHamburger(),this.changeNavPlace(),this.cacheElements(),this.handleEventListeners(),this.onNavHover(),this.dealWithMenuHover(),this.lastScroll=0;const t=window.navigator.vendor;this.isApple=t&&t.toLowerCase().includes("apple"),"Home page"===this.pageType?history.scrollRestoration="manual":history.scrollRestoration="auto",this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0,this.screenWidth=this.isTouchDevice?Math.max(screen.width,window.innerWidth):Math.min(screen.width,window.innerWidth),this.isLarge=Math.min(screen.width,window.innerWidth)>=1024,this.isLoggedIn=window.Zephr?.accessDetails?.authenticated,this.checkLogin(),setTimeout((()=>{this.checkViafouraInitialization()}),1e3)}checkLogin(){Pe.enqueue((e=>{try{const t=document.querySelectorAll("a.sign-in"),i=document.querySelectorAll("a.signedin");e?.accessDetails?.authenticated?(this.isLoggedIn=e?.accessDetails?.authenticated,i.forEach((e=>{e.style.display="block"}))):t.forEach((e=>{e.style.display="block"}))}catch(e){return console.log("Error fetching account status:",e),console.error("Error fetching account status:",e),console.error("Error getting profile",e)}}));const e=document.querySelector("bsp-header#Sec-Nav");if(""===e.textContent.trim()){const t=document.querySelector(".SectionPage-sectionNavigation");if(!t)return;const i=document.querySelector(".Page-pageLead");if(!i)return;const n=i.querySelector(".TeamModule");if(!n)return;if(!n.querySelector(".TeamModule-pollInfo-team"))return;e.appendChild(t)}}cacheElements(){this.menuButtons=this.querySelectorAll(".Page-header-menu-trigger"),this.hamburgerMenu=this.querySelector(".Page-header-hamburger-menu"),this.navigationItems=this.querySelectorAll("[data-nav-item]"),this.hamburgerMenunavigationItems=this.querySelectorAll(".HamburgerNavigationItem"),this.mainNavigationItems=this.querySelectorAll("[data-mainnav-item]"),this.navigationItemsItem=this.querySelectorAll('[class$="Navigation-items-item"]'),this.headerBar=document.querySelector(".Page-header-bar"),this.menuWrapper=this.querySelector(".Page-header-hamburger-menu-wrapper"),this.searchOverlay=document.querySelector(".SearchOverlay"),this.htmlPage=document.querySelector("html"),this.hasLB=document.documentElement.hasAttribute("data-header-hasleaderboard")}dealWithMenuHover(){this.navigationItemsItem.forEach((e=>{e.querySelector("[data-nav-moretrigger]")&&(e.querySelector("[data-nav-moretrigger]").hasAttribute("data-noItems")||(this.hoverListener=ve()(e,(()=>{this.openNavItem(e,"hover")}),(()=>{this.closeNavItem(e,"hover")})).options({timeout:200,interval:200,handleFocus:!0})),e.addEventListener("keyup",(t=>{if("Enter"===t.key||32===t.keyCode){if(t.target!==e)return;if("true"===e.getAttribute("data-item-hover"))return void e.removeAttribute("data-item-hover");this.openNavItem(e,"hover"),e.querySelector('[data-nav-moreitems] [data-show="true"] a')?.focus()}})))}))}onNavHover(){this.mainNavigationItems.forEach((e=>{e.querySelector("[data-has-dropdown]")&&(this.hoverListener=ve()(e,(()=>{this.openMainNavItem(e,"hover"),e.querySelector("[data-nav-moretrigger]")||(this.hoverTimer=setTimeout((()=>{Ee(e,"hover")}),2500))}),(()=>{this.closeMainNavItem(e,"hover"),clearTimeout(this.hoverTimer)})).options({interval:100,timeout:100,sensitivity:54,handleFocus:!0}),e.addEventListener("keyup",(t=>{if("Enter"===t.key||32===t.keyCode){if(t.target!==e)return;if("true"===e.getAttribute("data-item-hover"))return void e.removeAttribute("data-item-hover");this.openNavItem(e,"hover"),e.querySelector('[data-nav-moreitems] [data-show="true"] a')?.focus()}})))}))}isTablet(){return!!(this.screenWidth>=768&&this.isTouchDevice)}handleEventListeners(){let e;this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0,this.isBubbleCommentEnabled&&this.initializeViafouraCustomTrigger(),window.addEventListener("scroll",p(50,(()=>{document.body.scrollTop>0||document.documentElement.scrollTop>0?document.body.setAttribute("data-scrolling",!0):document.body.removeAttribute("data-scrolling",!0);const e=document.querySelector(".Page-header-stickyWrap .Page-trending .PageListTrending");e&&document.documentElement.scrollTop>250?e.classList.add("PageListTrending-mini"):e&&document.documentElement.scrollTop<100&&e.classList.remove("PageListTrending-mini"),e&&e.offsetHeight&&document.documentElement.style.setProperty("--trendingHeight",e.offsetHeight+"px")}))),this.addEventListener("click",(e=>{e.target?.classList.contains("Page-header-hamburger-menu-content")&&this.closeMenu()})),document.addEventListener("mousemove",(t=>{t.target?.classList.contains("Page-header-hamburger-menu-content")?e||(e=setTimeout((()=>{this.closeMenu()}),1200)):(clearTimeout(e),e=null)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.closeMenu()})),document.addEventListener("keydown",(e=>{e.target.closest('[class$="has-menu"], [data-morebutton]')||this.closeOpenNavItem()})),window.addEventListener("resize",p(50,(()=>{this.changeNavPlaceResize()}))),window.addEventListener("orientationchange",p(50,(()=>{this.changeNavPlaceResize()}))),this.menuButtons&&this.menuButtons.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.isMenuOpen()?this.closeMenu():(this.closeSearch(),this.openMenu())}))})),this.navigationItems&&this.navigationItems.forEach((e=>{e.querySelector("[data-nav-moretrigger]")&&e.querySelector("[data-nav-moretrigger]").addEventListener("click",(t=>{t.preventDefault(),this.openNavItem(e,"click")}))})),this.hamburgerMenunavigationItems&&this.isTablet()&&this.hamburgerMenunavigationItems.forEach((e=>{const t=e.querySelector(".HamburgerNavigationItem-desktop[data-nav-moretrigger]");t&&t.addEventListener("click",(t=>{t.preventDefault(),this.openNavItem(e,"click")}))}))}initializeViafouraCustomTrigger(){if(!this.isBubbleCommentEnabled)return void console.log("Bubble comment not enabled, skipping Viafoura initialization");if(void 0===window.vfQ)return console.warn("Viafoura not initialized yet. Retrying in 50ms..."),void setTimeout((()=>{this.initializeViafouraCustomTrigger()}),50);window.vfQ=window.vfQ||[];const e=()=>!(!window.vf||!window.vf.$subscribe||(window.vf.$subscribe("tray","opened",(e=>{console.log("Tray opened, refreshing notification data",e),window.vf&&window.vf.$publish&&(console.log("Refreshing notifications data"),window.vf.$publish("notifications","refresh"))})),0));window.vfQ.push((()=>{if(e())console.log("Successfully set up notification refresh");else{console.log("Viafoura $subscribe not available yet, will retry");const t=setInterval((()=>{e()&&(console.log("Successfully set up notification refresh"),clearInterval(t))}),200);setTimeout((()=>{clearInterval(t)}),5e3)}}));const t=()=>{const e=document.querySelectorAll("#custom-trigger, #custom-trigger1, .custom-trigger");console.log("Available trigger buttons:",e.length),e.forEach(((e,t)=>console.log(`Button ${t}:`,e.className,e.id))),e.length?(e.forEach((e=>{e.__vfTriggerHandler&&(e.removeEventListener("pointerup",e.__vfTriggerHandler),e.removeEventListener("touchend",e.__vfTriggerHandler),e.removeEventListener("click",e.__vfTriggerHandler));const t=t=>{("touchend"===t.type||t.pointerType&&"mouse"!==t.pointerType)&&("function"==typeof t.preventDefault&&t.preventDefault(),"function"==typeof t.stopPropagation&&t.stopPropagation()),console.log("Custom trigger clicked!",t.target,t.currentTarget),"function"==typeof t.preventDefault&&t.preventDefault();const i=e.style.backgroundColor;e.style.backgroundColor="rgba(0,0,0,0.1)";try{window.vf&&window.vf.$publish?(console.log("Publishing tray open event directly"),window.vf.$publish("tray","open",e,"vf-sitefeed")):window.vfQ&&window.vfQ.push((()=>{console.log("Publishing tray open event via queue"),window.vf.$publish("tray","open",e,"vf-sitefeed")}))}finally{setTimeout((()=>{e.style.backgroundColor=i}),300)}};e.__vfTriggerHandler=t,"onpointerup"in window?e.addEventListener("pointerup",t,{passive:!1}):(e.addEventListener("touchend",t,{passive:!1}),e.addEventListener("click",(i=>{if(e.__vfLastTouchTs&&Date.now()-e.__vfLastTouchTs<400)return"function"==typeof i.preventDefault&&i.preventDefault(),void("function"==typeof i.stopImmediatePropagation&&i.stopImmediatePropagation());t(i)})),e.addEventListener("touchstart",(()=>{e.__vfLastTouchTs=Date.now()}),{passive:!0})),e.style.cursor||(e.style.cursor="pointer")})),console.log("Viafoura custom trigger initialized successfully with "+e.length+" buttons")):console.warn("Custom trigger buttons not found.")};let i=0;const n=()=>{i>=10?console.warn("Viafoura initialization failed after 10 attempts. Giving up."):document.querySelectorAll("#custom-trigger, #custom-trigger1, .custom-trigger").length>0?(t(),console.log(`Viafoura initialization successful on attempt ${i+1}`)):(i++,console.log(`Viafoura initialization attempt ${i}/10 failed. Retrying in 1000ms...`),setTimeout(n,1e3))};t(),setTimeout(n,1e3),document.addEventListener("click",(e=>{let t=e.target.closest("#custom-trigger, #custom-trigger1, .custom-trigger");t&&(console.log("Global click handler caught trigger click:",t),window.vf&&window.vf.$publish?window.vf.$publish("tray","open",t,"vf-sitefeed"):window.vfQ.push((()=>{window.vf.$publish("tray","open",t,"vf-sitefeed")})))}))}checkViafouraInitialization(){const e=void 0!==window.vfQ,t=void 0!==window.vf,i=t&&"function"==typeof window.vf.$publish,n=t&&document.querySelector(".vf-profile-tab, .viafoura .vf-profile");if(console.log("Viafoura Initialization Status:",{vfQ:e,vf:t,vfPublish:i,profileTab:!!n}),e){const e=document.querySelector("#custom-trigger1");e&&(e.style.display="block"),document.querySelectorAll(".custom-trigger").forEach((e=>{e.style.display="block"}))}return t&&i||(console.warn("Viafoura not fully initialized. Checking again in 500ms."),setTimeout((()=>this.checkViafouraInitialization()),500)),e&&t&&i}handleProfileTrayClick(e){window.vfQ.push((()=>{try{window.vf.$publish("tray","open",e,"vf-sitefeed"),console.log("Profile tray opened successfully")}catch(t){console.warn("Error opening profile tray:",t);try{window.vf.$publish("tray","open",e,"vf-notifications")}catch(e){console.error("Failed to open any tray:",e)}}}))}openNavItem(e,t){if(e)if(e.getAttribute("data-item-"+t))e.removeAttribute("data-item-"+t);else{this.navigationItems.forEach((e=>{e.removeAttribute("data-item-"+t)})),e.setAttribute("data-item-"+t,!0),Ee(e,t);const i=e.querySelector("[data-nav-moreitems]");i&&i.getBoundingClientRect().right>window.innerWidth-20&&(i.setAttribute("data-open-direction","left"),i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))}}closeNavItem(e,t){e.removeAttribute("data-item-"+t)}closeOpenNavItem(){this.querySelector("[data-item-hover]")&&this.querySelector("[data-item-hover]").removeAttribute("data-item-hover")}openMainNavItem(e,t){this.isMenuOpen()&&this.closeMenu();const i=e.querySelector('[class$="MainNavigationItem-more"]');e&&null===i&&(e.getAttribute("data-item-"+t)?e.removeAttribute("data-item-"+t):(this.navigationItems.forEach((e=>{e.removeAttribute("data-item-"+t)})),e.setAttribute("data-item-"+t,!0)))}closeMainNavItem(e,t){e.removeAttribute("data-item-"+t)}closeOpenMainNavItem(){this.querySelector("[data-item-hover]")&&this.querySelector("[data-item-hover]").removeAttribute("data-item-hover")}openMenu(){const e=this.screenWidth<1024;let t=window.scrollY;if(document.body.setAttribute("top-position",`${t}`),this.isFirefox()&&t>300){const e=getComputedStyle(document.body),i=parseInt(e.getPropertyValue("--hatHeight"));t="Home page"===this.pageType?0:270+i}if(e||(document.body.style.top=`-${t}px`),document.body.style.paddingRight=`${this.getScrollbarWidth()}px`,document.body.setAttribute("data-toggle-header","hamburger-menu"),document.body.parentElement.setAttribute("data-toggle-header","hamburger-menu"),this.setAttribute("data-toggle-header","hamburger-menu"),this.setAttribute("data-toggle-zephr-header","hamburger-menu-zephr"),this.menuButtons.forEach((e=>e.setAttribute("aria-expanded","true"))),this.hamburgerMenu.querySelector("a")?.focus(),!e&&!document.body.getAttribute("data-leaderboard-is-fixed")){const e=document.querySelector("[data-named-page-type]")?.getAttribute("data-named-page-type");document.querySelectorAll(".HamburgerNavigation").forEach((i=>{const n=i.querySelectorAll(".HamburgerNavigation-items-item"),s=i.querySelectorAll(".FooterNavigation-items-item");let o="Home page"===e?0:320-t;n?.length&&n.forEach((e=>{o+=e.offsetHeight})),s?.length&&s.forEach((e=>{o+=e.offsetHeight})),i.style.minHeight=`${o}px`}))}}closeMenu(){if(this.isMenuOpen()){const e=document.body.getAttribute("top-position");document.body.removeAttribute("data-toggle-header"),document.body.parentElement.removeAttribute("data-toggle-header"),this.removeAttribute("data-toggle-header"),this.removeAttribute("data-toggle-zephr-header"),this.menuButtons.forEach((e=>{e.setAttribute("aria-expanded","false"),e.focus()})),document.body.style.top="",document.body.style.paddingRight="",window.scrollTo(0,parseInt(e||"0"))}}closeSearch(){document.body.removeAttribute("data-toggle-header"),document.body.parentElement.removeAttribute("data-toggle-header"),this.searchOverlay&&this.searchOverlay.removeAttribute("data-toggle-header")}isMenuOpen(){return"hamburger-menu"===document.body.getAttribute("data-toggle-header")}collapsingNav(e,t){this.hasLB&&this.wonderKindAd(),e>0&&e>t&&this.screenWidth<1024?this.hideMainNav():(e<t||0===e)&&this.screenWidth<1024&&this.showMainNav(),setTimeout((()=>{this.lastScroll=e}),500)}showMainNav(){this.headerBar.classList.contains("Page-header-fadeIn")||this.headerBar.classList.add("Page-header-fadeIn"),this.headerBar.classList.contains("Page-header-fadeOut")&&this.headerBar.classList.remove("Page-header-fadeOut")}hideMainNav(){this.headerBar.classList.contains("Page-header-fadeOut")||this.headerBar.classList.add("Page-header-fadeOut"),this.headerBar.classList.contains("Page-header-fadeIn")&&this.headerBar.classList.remove("Page-header-fadeIn")}wonderKindAd(){const e=document.querySelector(".Page-header-leaderboardAd");"none"===window.getComputedStyle(e).getPropertyValue("display")?this.htmlPage.setAttribute("data-header-wonderKind","true"):this.htmlPage.removeAttribute("data-header-wonderKind")}changeNavPlace(){this.screenWidth=Math.min(screen.width,window.innerWidth),this.moveEntitlements(),this.moveTrending()}moveEntitlements(){const e=document.getElementById("desktop-entitlements"),t=document.getElementById("mobile-entitlements"),i=document.querySelector(".Page-header-right");e&&t&&(this.screenWidth<1024?t.appendChild(e):i.appendChild(e))}moveTrending(){const e=document.getElementById("Page-trendingZephr-desktop"),t=document.getElementById("Page-trendingZephr-mobile");if(e&&t)if(this.screenWidth<1024){const i=e.querySelector(".Page-trendingZephr");i&&(t.appendChild(i),e.innerHTML="")}else{const i=t.querySelector(".Page-trendingZephr");i&&(e.appendChild(i),t.innerHTML="")}}changeNavPlaceResize(){this.isTouchDevice?this.screenWidth=Math.max(screen.width,window.innerWidth):this.screenWidth=Math.min(screen.width,window.innerWidth),this.moveEntitlementsResize(),this.moveTrending()}moveEntitlementsResize(){const e=document.getElementById("desktop-entitlements"),t=document.getElementById("mobile-entitlements"),i=document.querySelector(".Page-header-right"),n=this.screenWidth<1024;n&&this.isLarge?this.isLarge=!1:n||this.isLarge||(this.isLarge=!0),e&&t&&i&&(n&&e.parentNode!==t?t.appendChild(e):n||e.parentNode===i||i.appendChild(e))}getScrollbarWidth(){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const i=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),i}isFirefox(){return"undefined"!=typeof InstallTrigger}detectChangeInHamburger(){const e=document.querySelector(".HamburgerNavigation");if(e){const t=new MutationObserver((i=>{for(const n of i)if("childList"===n.type){const i=e.cloneNode(!0);e.parentNode?.replaceChild(i,e),this.navigationItemsItem=i.querySelectorAll('[class$="Navigation-items-item"]'),this.hamburgerMenunavigationItems=i.querySelectorAll(".HamburgerNavigationItem"),this.navigationItems=i.querySelectorAll("[data-nav-item]"),this.dealWithMenuHover(),this.navigationItems&&this.navigationItems.forEach((e=>{e.querySelector("[data-nav-moretrigger]")&&e.querySelector("[data-nav-moretrigger]").addEventListener("click",(t=>{t.preventDefault(),this.openNavItem(e,"click")}))})),this.hamburgerMenunavigationItems&&this.isTablet()&&this.hamburgerMenunavigationItems.forEach((e=>{const t=e.querySelector(".HamburgerNavigationItem-desktop[data-nav-moretrigger]");t&&t.addEventListener("click",(t=>{t.preventDefault(),this.openNavItem(e,"click")}))})),t.disconnect(),console.log("Observer disconnected.")}})),i={childList:!0,subtree:!0};t.observe(e,i)}}}function Ie(){this.oldScrollY<window.scrollY?(document.documentElement.removeAttribute(Fe.fixedState),window.removeEventListener("scroll",this.scrollCheck)):this.oldScrollY=window.scrollY}const Te="background: green;color: white; padding: 4px;";let Me,De,qe;const Fe={fixedState:"data-leaderboard-is-fixed",timeout:"data-timeout",preTimeout:"data-pretimeout"};function Re(){return Math.floor(Date.now()/1e3)}class Be extends window.HTMLElement{connectedCallback(){Me=Re(),console.time("%cLeaderboard"),console.timeLog("%cLeaderboard",Te,`Leaderboard logic started  - timeStampStarted: ${Me}`),document.documentElement.removeAttribute(Fe.fixedState),this.checkForAdBlock()}checkForAdBlock(){window.addEventListener("load",(()=>{fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",{method:"HEAD",mode:"no-cors",cache:"no-store"}).catch((()=>{De=Re(),console.timeLog("%cLeaderboard",Te,`Ads appear to be blocked - timeStampAdblocked: ${De} (${De} - ${Me}=${De-Me})`),document.documentElement.classList.add("AdBlockerIn"),document.documentElement.removeAttribute(Fe.fixedState)}))}))}setBinds(){let e;const t=this.getAttribute(Fe.preTimeout)||5;setTimeout((()=>{e||(console.timeLog("%cLeaderboard",Te,`It has been ${t} minutes, since page loaded, and Ad did not load on time  - timestamp: ${Re()}`),document.documentElement.removeAttribute(Fe.fixedState))}),1e3*t);const i=sessionStorage.getItem("leaderboardTimer")||this.getAttribute(Fe.timeout);i&&(document.documentElement.setAttribute(Fe.fixedState,!0),window.addEventListener("properEvents",(t=>{"proper-ads-fired"==t?.detail?.event&&console.timeLog("%cLeaderboard",Te,`Event listener event named "proper-ads-fired- timestamp: ${Re()}`),"proper-ads-fired"==t?.detail?.event&&"apnews_leaderboard_1"==t?.detail?.slot&&(e=!0,qe=Re(),console.timeLog("%cLeaderboard",Te,`Event listener fired for slot apnews_leaderboard_1 ${qe-Me} second after started, and timer for  ${parseInt(i)} seconds started - timestamp: ${qe}`),setTimeout((()=>{console.timeLog("%cLeaderboard",Te,`Event listener fired for slot apnews_leaderboard_1 ${parseInt(i)} seconds ago - timestamp : ${Re()}`),this.oldScrollY=window.scrollY,this.scrollCheck=Ie.bind(this),window.addEventListener("scroll",this.scrollCheck)}),1e3*parseInt(i)))})))}}class $e extends window.HTMLElement{connectedCallback(){this.cacheElements(),this.setInitialSelected(),this.registerListeners(),ue.call(this,{itemSelector:".Results-items > .PollModuleRow"})}disconnectedCallback(){this.weekSelect.removeEventListener("change",this.submitChange),this.pollsterSelect.removeEventListener("change",this.submitChange)}cacheElements(){this.moduleEl=document.querySelector(".PollModule"),this.weekSelect=this.querySelector('[name="Select-week-input"]'),this.pollsterSelect=this.querySelector('[name="Select-pollster-input"]'),this.resultsEl=this.querySelector("#Results-items"),this.othersReceivingVotes=this.querySelector("#Others-Votes"),this.inputContainer=this.querySelector(".Input-container")}registerListeners(){this.weekSelect&&this.weekSelect.addEventListener("change",(()=>{this.submitChange(this.weekSelect)})),this.pollsterSelect&&this.pollsterSelect.addEventListener("change",(()=>{this.submitChange(this.pollsterSelect)}))}setInitialSelected(){const e=new URLSearchParams(document.location.search),t=this.weekSelect.getAttribute("data-most-recent-value"),i=e.get("week");if(i){const e=this.weekSelect.querySelectorAll(`[value="${i}"]`);e&&e.length&&(e[0].selected=!0)}else if(t){const e=this.weekSelect.querySelectorAll(`[value="${t}"]`);e&&e.length&&(e[0].selected=!0)}const n=e.get("voter");if(n){const e=this.pollsterSelect.querySelectorAll(`[value="${n}"]`);if(e&&e.length){e[0].selected=!0,this.weekSelect.parentElement.classList.add("hidden"),this.inputContainer.classList.add("Input-container-single");const t=this.querySelector("#Select-pollster-org.hidden");t&&t.classList.remove("hidden")}}}getNewPoll(e){return new Promise(((t,i)=>{window.fetch(e,{credentials:"include"}).then((e=>{t(e.text())})).catch((()=>{i(new Error("error"))}))}))}submitChange(e){let t=`${window.location.pathname}`;const i=e.getAttribute("data-parameter")||"selected",n=e.getAttribute("data-most-recent-value"),s=e.options[e.selectedIndex].getAttribute("data-poll-date"),o=this.querySelector("#Select-pollster-org"),a=this.querySelector("#Poll-date");if(n===e.value)window.history.replaceState({},document.title,t),e==this.weekSelect?(this.pollsterSelect.parentElement.classList.remove("hidden"),this.inputContainer.classList.remove("Input-container-single"),o&&o.classList.add("hidden"),a&&(a.innerHTML=s)):(this.weekSelect.parentElement.classList.remove("hidden"),this.inputContainer.classList.remove("Input-container-single"),o&&o.classList.add("hidden"),a&&(a.innerHTML=s));else{const n=e.options[e.selectedIndex].getAttribute("data-org-name");t+=`?${i}=${encodeURIComponent(e.value)}`+("voter"===i&&n?`&organization=${encodeURIComponent(n)}`:""),window.history.replaceState({},document.title,t),e==this.weekSelect?(this.pollsterSelect.parentElement.classList.add("hidden"),this.inputContainer.classList.add("Input-container-single"),a&&(a.innerHTML=s)):(this.weekSelect.parentElement.classList.add("hidden"),this.inputContainer.classList.add("Input-container-single"),o&&(o.innerHTML=n,o.classList.remove("hidden")),a&&(a.innerHTML=s))}this.getNewPoll(t).then((e=>{this.renderResults(e)}))}renderResults(e){const t=document.createElement("div");t.innerHTML=e;const i=t.querySelector("#Results-items").innerHTML;this.othersReceivingVotes.innerHTML=t.querySelector("#Others-Votes").innerHTML||"",i&&(this.resultsEl.innerHTML=i),this.dispatchRendered()}dispatchRendered(){const e=new CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(e)}}class Oe extends window.HTMLElement{connectedCallback(){this.getTextLength(),this.createMoreButton(),this.createLessButton();const e=this.getAttribute("data-limit");this.length<=parseInt(e)?this.classList.add("ReadMore-expand"):this.appendChild(this.readMoreBtn)}createMoreButton(){this.readMoreBtn=document.createElement("button"),this.readMoreBtn.className=this.getAttribute("data-main-class")+"-more-button",this.readMoreBtn.textContent=this.getAttribute("data-more-button-text"),this.readMoreBtn.addEventListener("click",(()=>{this.classList.add(this.getAttribute("data-expand")),this.removeChild(this.readMoreBtn),this.appendChild(this.readLessBtn)}))}createLessButton(){this.readLessBtn=document.createElement("button"),this.readLessBtn.className=this.getAttribute("data-main-class")+"-less-button",this.readLessBtn.textContent=this.getAttribute("data-less-button-text"),this.readLessBtn.addEventListener("click",(()=>{this.classList.remove(this.getAttribute("data-expand")),this.removeChild(this.readLessBtn),this.appendChild(this.readMoreBtn)}))}getTextLength(){const e=this.getElementsByTagName("p");if(this.length=0,e&&e.length){const t=e[0].textContent;this.length=t.length}}}const Ne={mobile:["mq-xs","mq-sm","mq-md"],desktop:["mq-lg","mq-hk","mq-xl"]};class He extends window.HTMLElement{connectedCallback(){this.cacheElements(),this.handleSortSelect(),this.filtersApply&&this.handleFiltersApply(),this.handleFiltersSelect(),this.handleSelectedFiltersReset(),this.gatherSelectedFilters()}cacheElements(){this.searchResultsModule=document.querySelector(".SearchResultsModule"),this.searchForm=document.querySelector("[data-bsp-search-results-form]"),this.searchFiltersAsDropdown=this.querySelectorAll(".SearchFilterAsDropdown"),this.filtersOpenButton=this.querySelectorAll(".SearchResultsModule-filters-open"),this.filtersCloseButton=this.querySelector(".SearchResultsModule-filters-close"),this.filtersOverlay=this.querySelector("[data-bsp-search-results-filteroverlay]"),this.filtersApply=this.querySelector("[data-bsp-search-results-filterapply]"),this.filtersApplyButton=this.filtersApply?.querySelector("button"),this.filtersSeeAll=this.querySelectorAll(".SearchFilter-seeAll"),this.filters=this.querySelectorAll(".SearchFilterInput input"),this.selectedFiltersArray=[],this.selectedFilters=this.querySelector(".SearchResultsModule-filters-selected"),this.selectedFiltersReset=this.querySelector(".SearchResultsModule-filters-selected-reset"),this.selectedFiltersContent=this.querySelector(".SearchResultsModule-filters-selected-content")}handleSortSelect(){this.searchFiltersAsDropdown&&this.searchFiltersAsDropdown.forEach((e=>{e.addEventListener("change",(()=>{this.gatherSelectedFilters(),this.searchResultsModule.submitSearch()}))}))}handleFiltersSelect(){this.filters.forEach((e=>{e.addEventListener("click",(()=>{Ne.desktop.includes(function(){const e=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!e&&e.replace(/["']/g,"")}())&&(this.gatherSelectedFilters(),this.searchResultsModule.submitSearch())}))}))}handleFiltersApply(){this.filtersApply.addEventListener("change",(e=>{e.preventDefault(),this.gatherSelectedFilters(),this.closeOverlay(),this.searchResultsModule.submitSearch()})),this.filtersApplyButton.addEventListener("click",(e=>{e.preventDefault(),this.gatherSelectedFilters(),this.closeOverlay(),this.searchResultsModule.submitSearch()}))}handleFiltersOverlay(){this.filtersOpenButton.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.openOverlay()}))})),this.filtersCloseButton?.addEventListener("click",(e=>{e.preventDefault(),this.closeOverlay()}))}removeSelectedFilter(e){const t=e.getAttribute("data-value");this.querySelectorAll(`[value="${t}"]`).forEach((e=>{e.checked&&(e.checked=!1)})),this.gatherSelectedFilters(),this.searchResultsModule.submitSearch()}handleSelectedFiltersReset(){this.selectedFiltersReset&&this.selectedFiltersReset.addEventListener("click",(e=>{e.preventDefault(),this.filters.forEach((e=>{e.checked=!1})),this.gatherSelectedFilters(),this.searchResultsModule.submitSearch()}))}handleSelectedFiltersRemove(){this.querySelectorAll(".SearchResultsModule-filters-selected-filter").forEach((e=>{e.querySelector("a").addEventListener("click",(t=>{t.preventDefault(),this.removeSelectedFilter(e)}))}))}renderSelectedFilters(){this.selectedFiltersArray.length>0?(this.selectedFiltersContent.innerHTML="",this.selectedFiltersArray.forEach((e=>{this.selectedFiltersContent.innerHTML+=`<div class="SearchResultsModule-filters-selected-filter" data-value=${e.value}><span>${e.label}</span><a href="#" title="X"><svg class="close-x"><use xlink:href="#close-x"/></svg></a></div>`})),this.handleSelectedFiltersRemove(),this.selectedFilters.setAttribute("data-showing",!0)):this.selectedFilters.removeAttribute("data-showing")}gatherSelectedFilters(){this.selectedFiltersArray=[],this.filters=this.querySelectorAll(".SearchFilterInput input"),this.filters.forEach((e=>{if(e.checked){const t=e.parentElement.querySelector("span").innerHTML,i=e.getAttribute("value");this.selectedFiltersArray.push({label:t,value:i})}})),this.selectedFiltersContent&&this.renderSelectedFilters()}openOverlay(){this.filtersOverlay.setAttribute("data-filters-open",!0),document.body.setAttribute("data-filters-open",!0)}closeOverlay(){this.filtersOverlay.removeAttribute("data-filters-open"),document.body.removeAttribute("data-filters-open")}}class Ue extends window.HTMLElement{connectedCallback(){this.cacheElements(),this.handleFormSubmit(),this.handleSearchInput(),this.checkInputValue(),this.addEventListener(G.events.loadedContent,(()=>this.handleLoadMore(event)))}handleLoadMore(e){const t=[...document.querySelectorAll(`[class="${this.className}"]`)].indexOf(this),i=e.detail.querySelectorAll(`[class="${this.className}"]`)[t],n=i.querySelectorAll(".SearchResultsModule-results-item"),s=this.querySelector("[data-bsp-search-results-results]");n.forEach((e=>s.append(e)));const o=i.querySelector("bsp-load-more");o?e.target.parentNode.replaceChild(o,e.target):e.target.parentNode.removeChild(e.target)}handleFormSubmit(){this.searchForm.addEventListener("submit",(e=>{e.preventDefault(),this.searchInput&&this.searchInput.blur();const t=new URLSearchParams(new FormData(this.searchForm)).toString(),i=window.location.pathname+"?"+t;window.history.replaceState({},document.title,i),this.loadingTimeout=setTimeout((()=>{this.clearSearchForm()}),1e3),m("search_form_submitted",{searchQuery:this.searchInput?.value}),this.getNewSearch(i).then((e=>{clearTimeout(this.loadingTimeout),this.clearSearchForm(),this.renderSearchResults(e),document.body.dispatchEvent(new CustomEvent("Search:onSearchUpdate",{detail:{responseMarkup:e}}))}))}))}submitSearch(){let e;"function"==typeof Event?e=new Event("submit",{cancelable:!0}):(e=document.createEvent("Event"),e.initEvent("submit",!0,!0)),this.searchForm.dispatchEvent(e)}getNewSearch(e){return new Promise(((t,i)=>{window.fetch(e,{credentials:"include"}).then((e=>{t(e.text())})).catch((()=>{i(new Error("error"))}))}))}clearSearchForm(){this.searchResults.innerHTML=""}checkInputValue(){this.searchInput&&(0===this.searchInput.value.length?this.searchForm.setAttribute("data-has-value",!1):this.searchForm.setAttribute("data-has-value",!0))}handleSearchInput(){this.searchInput&&this.searchInput.addEventListener("keyup",p(250,(()=>{this.checkInputValue()}))),this.clearButton&&this.clearButton.addEventListener("click",(()=>{this.searchInput.value="",this.searchInput.focus(),this.checkInputValue()}))}renderSearchResults(e){const t=document.createElement("div");t.innerHTML=e;const i=t.querySelector("[data-bsp-search-results-ajax]").innerHTML;i&&(this.searchResults.innerHTML=i),this.dispatchRendered()}dispatchRendered(){const e=new CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(e)}cacheElements(){this.searchForm=document.querySelector("[data-bsp-search-results-form]"),this.searchInput=this.searchForm.querySelector("[data-bsp-search-results-forminput]"),this.searchResults=this.querySelector("[data-bsp-search-results-ajax]"),this.clearButton=this.searchForm.querySelector(".SearchResultsModule-clearInputButton")}}class We extends window.HTMLElement{connectedCallback(){this.cacheElements(),this.init()}cacheElements(){this.searchButton=this.querySelector('[class$="-search-button"]'),this.searchInput=this.querySelector('[class$="-search-input"]'),this.searchInputClear=this.querySelector('[class$="-search-form-clear"]'),this.menuButton=document.querySelector(".Page-header-menu-trigger"),this.pageHeader=document.querySelector(".Page-header"),this.searchForm=document.querySelector(".SearchOverlay-search-form"),this.hamburgerMenu=this.querySelector(".Page-header-hamburger-menu")}init(){this.searchButton&&this.searchButton.addEventListener("click",(e=>{e.preventDefault(),this.isSearchOpen()?(this.closeSearch(),m("search_box_closed",{})):(this.closeMenu(),this.openSearch(),m("search_box_open",{}))})),this.searchForm&&this.searchForm.addEventListener("submit",(()=>{m("search_form_submitted",{searchQuery:this.searchForm.querySelector('input[name="q"]').value})})),this.searchInputClear&&this.searchInputClear.addEventListener("click",(e=>{e.preventDefault(),this.searchInput.value=""}))}isMenuOpen(){return"hamburger-menu"===document.body.getAttribute("data-toggle-header")}openSearch(){this.isMenuOpen()&&this.closeMenu(),document.body.setAttribute("data-toggle-header","search-overlay"),document.body.parentElement.setAttribute("data-toggle-header","search-overlay"),this.setAttribute("data-toggle-header","search-overlay"),this.searchInput.focus()}closeSearch(){this.isSearchOpen()&&(document.body.removeAttribute("data-toggle-header"),document.body.parentElement.removeAttribute("data-toggle-header"),this.removeAttribute("data-toggle-header"))}closeMenu(){const e=document.getElementById("Page-header-trending-zephr");document.body.removeAttribute("data-toggle-header"),document.body.parentElement.removeAttribute("data-toggle-header"),this.pageHeader.removeAttribute("data-toggle-header"),this.menuButton.setAttribute("aria-expanded","false"),e.removeAttribute("data-toggle-zephr-header")}isSearchOpen(){return"search-overlay"===document.body.getAttribute("data-toggle-header")}}class ze extends window.HTMLElement{constructor(){super(...arguments),D(this,"elNavigationItemsWrap",null),D(this,"elNavigationItemsItem",null),D(this,"elShowMore",null),D(this,"elMoreNavigationItemsItem",null),D(this,"navWidth",null),D(this,"resizeObserver",null),D(this,"rafId",null)}connectedCallback(){this.cacheDOMReferences(),this.validateElements()&&(this.rafId=requestAnimationFrame((()=>{this.navWidth=this.elNavigationItemsWrap.clientWidth,this.resetMoreButtonCalculations()})),this.setupResizeObserver(),this.handleEventListeners())}disconnectedCallback(){this.resizeObserver&&this.resizeObserver.disconnect(),this.rafId&&cancelAnimationFrame(this.rafId),window.removeEventListener("scroll",this.scrollThrottledHandler)}cacheDOMReferences(){this.elNavigationItemsWrap=this.querySelector(`.${this.className} > .${this.className}-items`),this.elNavigationItemsItem=this.elNavigationItemsWrap?.querySelectorAll(`.${this.className}-items-item`),this.elShowMore=this.elNavigationItemsWrap?.querySelector(`.${this.className}-items-item[data-morebutton]`),this.elMoreNavigationItemsItem=this.elShowMore?.querySelectorAll(`.${this.className}Item-items-item, .MainNavigationItem-items-item`)}validateElements(){return this.elNavigationItemsWrap&&this.elNavigationItemsItem&&this.elShowMore&&this.elMoreNavigationItemsItem}setupResizeObserver(){this.resizeObserver=new ResizeObserver(p(50,(e=>{this.navWidth=e[0].contentRect.width,this.resetMoreButtonCalculations()}))),this.resizeObserver.observe(this.elNavigationItemsWrap)}handleEventListeners(){this.scrollThrottledHandler=p(50,(()=>{this.resetMoreButtonCalculations()})),window.addEventListener("scroll",this.scrollThrottledHandler)}resetMoreButtonCalculations(){this.calculationTimeout&&clearTimeout(this.calculationTimeout),this.calculationTimeout=setTimeout((()=>{requestAnimationFrame((()=>{const e=window.innerWidth,t=(document.querySelector(".Page-header-bar")?.clientWidth??0)-177-80-90-20,i=e<1440?8:10;let n=0,s=0,o=null;Array.from(this.elNavigationItemsItem).forEach(((e,a)=>{if(!e.hasAttribute("data-morebutton")){const r=e.clientWidth;n+=r;const l=n>=t||s>=i;this.hideItem(e,a,l),l?o&&this.hideItem(o,a-1,!0):(s++,o=e)}})),this.manageMoreButtonDisplay()}))}),50)}hideItem(e,t,i){if(e){if(i?e.setAttribute("data-hidden","true"):e.removeAttribute("data-hidden"),!i&&e.querySelector(".MainNavigationItem-dropdown")){const t=e.getBoundingClientRect(),i=e.querySelector(".MainNavigationItem-dropdown");i&&t.left&&(i.style.left=`-${parseInt(t.left)}px`)}this.elMoreNavigationItemsItem[t]&&this.elMoreNavigationItemsItem[t].setAttribute("data-show",i.toString())}}manageMoreButtonDisplay(){if(!this.querySelectorAll('[data-nav-items-item][data-hidden="true"]').length)return void(this.elShowMore.style.display="none");this.elShowMore.style.display="block";const e=this.elShowMore.getBoundingClientRect(),t=this.elShowMore.querySelector("[data-nav-moreitems]")?.getBoundingClientRect();t&&document.documentElement.style.setProperty("--moveLeftSectionNav",`-${parseInt(t.left)-parseInt(e.width)}px`)}}class je extends window.HTMLElement{connectedCallback(){if(!window.isBspPreview){let e=0;const t=this.getAttribute("data-nativo-class"),i=je.temp_Arr.find((e=>e.name===t));i?(i.counter++,e=i.counter):(je.temp_Arr.push({name:t,counter:0}),e=0);const n=`${t}-${e<10?`0${e}`:e}`,s=document.createElement("div");s.className=n,this.parentElement.replaceChild(s,this)}}}D(je,"nativoAdCounter",0),D(je,"temp_Arr",[]);class Ve extends window.HTMLElement{connectedCallback(){const e=this.querySelectorAll("[data-counter]"),t=new window.IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){const i=e.target,n=()=>{const e=i.getAttribute("data-target"),t=parseInt(i.innerText),s=e/100;t<e?(i.innerText=Math.ceil(t+s),setTimeout(n,20)):i.innerText=e};n(),t.unobserve(i)}}))}));e.forEach((e=>{t.observe(e)}))}}const Ye="data-active",Xe="data-visible";class Ge extends HTMLElement{connectedCallback(){this.init(),this.setBinds()}init(){this.elTabs=[...this.querySelectorAll("[data-tab]")],this.elTabPanels=[...this.querySelectorAll("[data-tab-panel]")],this.ids=this.elTabPanels.map((e=>e.id));const e=window.location.hash.substr(1),t=this.ids.some((t=>e===t)),i=this.querySelector(`[href$="${e}"]`);window.addEventListener("load",(()=>{i&&i.parentNode.scrollIntoView({block:"nearest"})})),this.activePanel=window.location.hash.length&&t?window.location.hash.substr(1):this.elTabPanels[0].id}setBinds(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.substr(1);this.ids.some((t=>e===t))&&(this.activePanel=e)})),this.elTabs.forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.href.split("#").pop();if(!t)return;history.pushState(null,null,e.currentTarget.href);const i=this.ids.some((e=>t===e));i&&i&&(e.preventDefault(),this.activePanel=t)}))}))}set activePanel(e){this._activePanel!==e&&(this._activePanel=e,this.elTabs.forEach((t=>{e===t.getAttribute("href").substr(1)?t.setAttribute(Ye,""):t.removeAttribute(Ye)})),this.transitionPanels(e)),window.dispatchEvent(new Event("resize"))}transitionPanels(e){this.elTabPanels.forEach((t=>{e===t.id?t.setAttribute(Xe,""):t.removeAttribute(Xe)}))}clearTransitionProperties(e){e.style.removeProperty("height"),e.style.removeProperty("opacity"),e.style.removeProperty("overflow"),e.style.removeProperty("display"),e.style.removeProperty("transition")}get activePanel(){return this._activePanel}}const Ze=new Date;class Ke extends window.HTMLElement{connectedCallback(){if(this.timestamp){const e=new Date(this.timestamp),t=window.i18n.months[e.getMonth()],i=window.i18n.monthsFull[e.getMonth()],n=e.getDate(),s=n.toString().padStart(2,"0"),o=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getFullYear(),r=e.getHours(),l=r%12||12,c=e.getMinutes(),d=r>=12?"pm":"am",h=r>=12?"PM":"AM",u=this.timeZone.toUpperCase(),p=Math.floor(Math.abs(Ze.getTime()-e.getTime())/36e5),g=Math.floor((Ze.getTime()-e.getTime())/1e3/60),m=this.querySelector("[data-date-tpl-now]"),f=this.querySelector("[data-date-tpl-minago]"),v=this.querySelector("[data-date-tpl-recent]"),y=this.querySelector("[data-date-tpl-yesterday]"),b=this.querySelector("[data-date-tpl-sameyear]"),w=this.querySelector("[data-date-tpl-date]"),S=this.querySelector("[data-date-tpl]"),E=function(e,t){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}(Ze,e),k=function(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}(e);let _=S;if(_=!g||g<1?m||S:Ze.getTime()-this.getMillisecondsInXHours(this.tresholdForRecentTplInHours)<e.getTime()?Ze.getTime()-this.getMillisecondsInXHours(1)<e.getTime()?f||v||S:v||S:E?v||S:k?y||S:Ze.getFullYear()===a?b||S:w||S,_){let m=_.innerHTML;m=m.replace("[deltaHours]",p),m=m.replace("[deltaMinutes]",g),m=m.replace("[monthFull]",i),m=m.replace("[monthNumber]",e.getMonth()+1),m=m.replace("[monthWithLeadingZero]",o),m=m.replace("[month]",t),m=m.replace("[day]",n),m=m.replace("[dayWithLeadingZero]",s),m=m.replace("[year]",a),m=m.replace("[militaryHour]",r),m=m.replace("[hour]",l),m=m.replace("[minute]",c<10?`0${c}`:c),m=m.replace("[ampm]",d),m=m.replace("[AMPM]",h),m=m.replace("[timezone]",u),1===p&&(m=m.replace("hours","hour")),1===g&&(m=m.replace("mins","min")),this.querySelector("[data-date]").innerHTML=m}else this.parentElement.parentElement.setAttribute("data-bsptimestamp-nodate",!0),this.parentElement.removeChild(this)}}getMillisecondsInXHours(e){return 36e5*e}get tresholdForRecentTplInHours(){return this.hasAttribute("data-recent-thresholdinhours")?this.getAttribute("data-recent-thresholdinhours"):2}get timeZone(){let e="";try{e=/.*\s(.+)/.exec((new Date).toLocaleDateString(navigator.language,{timeZoneName:"short"}))[1]}catch(t){e=(new Date).toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")}return e}get timestamp(){let e=this.getAttribute("data-timestamp");return e=e?parseInt(e):this.getAttribute("data-timestamp-iso"),e}}class Je extends window.HTMLElement{connectedCallback(){if(!this.timestamp)return;const e=new Date(this.timestamp),t=new Date,i=Math.floor((t-e)/1e3),n=Math.floor(i/60),s=Math.floor(n/60),o=function(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}(e),a=t.getFullYear()===e.getFullYear(),r=this.querySelector("[data-date-tpl-now]"),l=this.querySelector("[data-date-tpl-minago]"),c=this.querySelector("[data-date-tpl-recent]"),d=this.querySelector("[data-date-tpl-yesterday]"),h=this.querySelector("[data-date-tpl-sameyear]"),u=this.querySelector("[data-date-tpl-date]"),p=this.querySelector("[data-date-tpl]");let g=p;if(g=i<60?r||p:n<2||n<60?l||p:s<2||s<12?c||p:o?d||p:a?h||p:u||p,!g)return this.parentElement?.setAttribute("data-bsptimestamp-nodate",!0),void this.remove();const m=window.i18n.months[e.getMonth()],f=window.i18n.monthsFull[e.getMonth()],v=e.getDate(),y=e.getFullYear(),b=e.getHours(),w=b%12||12,S=e.getMinutes(),E=b>=12?"pm":"am",k=b>=12?"PM":"AM",_=this.timeZone.toUpperCase();let C=g.innerHTML;C=C.replace("[deltaHours]",s),C=C.replace("[deltaMinutes]",n),C=C.replace("[monthFull]",f),C=C.replace("[monthNumber]",e.getMonth()+1),C=C.replace("[monthWithLeadingZero]",(e.getMonth()+1).toString().padStart(2,"0")),C=C.replace("[month]",m),C=C.replace("[day]",v),C=C.replace("[dayWithLeadingZero]",v.toString().padStart(2,"0")),C=C.replace("[year]",y),C=C.replace("[militaryHour]",b),C=C.replace("[hour]",w),C=C.replace("[minute]",S<10?`0${S}`:S),C=C.replace("[ampm]",E),C=C.replace("[AMPM]",k),C=C.replace("[timezone]",_),1===s&&(C=C.replace("hours","hour")),1===n&&(C=C.replace("mins","min")),this.querySelector("[data-date]").innerHTML=C.toUpperCase()}getMillisecondsInXHours(e){return 36e5*e}get tresholdForRecentTplInHours(){return this.hasAttribute("data-recent-thresholdinhours")?this.getAttribute("data-recent-thresholdinhours"):2}get timeZone(){let e="";try{e=/.*\s(.+)/.exec((new Date).toLocaleDateString(navigator.language,{timeZoneName:"short"}))[1]}catch(t){e=(new Date).toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")}return e}get timestamp(){let e=this.getAttribute("data-timestamp");return e=e?parseInt(e):this.getAttribute("data-timestamp-iso"),e}}class Qe extends window.HTMLElement{connectedCallback(){const e=this.getAttribute("data-toggle"),t=this.querySelectorAll('[data-toggle-trigger="'+e+'"]'),i=this;this.handleToggle=function(e){e.preventDefault();const t=this.getAttribute("data-toggle-trigger"),n="data-toggle-in";t&&(i.getAttribute(n)===t?(document.body.removeAttribute(n),i.removeAttribute(n,t)):(document.body.setAttribute(n,t),i.setAttribute(n,t)))},t.forEach((e=>e.addEventListener("click",this.handleToggle,!0)))}disconnectedCallback(){this.querySelectorAll("[data-toggle-trigger]").forEach((e=>e.removeEventListener("click",this.handleToggle,!0)))}}class et{constructor(){let e="::-moz-focus-inner{border:0 !important;}:focus{outline: none !important;";const t=document.createElement("STYLE");window.unfocus=function(){document.getElementsByTagName("HEAD")[0].appendChild(t),document.addEventListener("mousedown",(function(){t.innerHTML=e+"}"})),document.addEventListener("keydown",(function(){t.innerHTML=""}))},window.unfocus.style=function(t){e+=t},window.unfocus()}}class tt{constructor(){this.storyAdsList=[],document.querySelectorAll(".Link-InPage").forEach((e=>{const t=this;e.addEventListener("click",(function(e){const i=this.href;let n=null;if(i){const s=new URL(i);n=s.hash?s.hash.replace("#",""):null,n&&window.location.pathname===s.pathname&&(e.preventDefault(),t.scrollToMiddle(n))}}))}));const e=location.pathname.includes("/live");window.location.hash&&!e&&setTimeout((()=>{this.scrollToMiddle(window.location.hash.replace("#",""))}),1e3)}scrollToMiddle(e){const t=document.getElementById(e),i=document.getElementById("Page-header-trending-zephr");if(!t)return;const n=document.querySelector(".tbl-read-more-btn");n&&(n.click(),this.storyAdsList=document.querySelectorAll(".SovrnAd.Advertisement[data-delayAdInsertion]"),this.showAllAds());const s=t.offsetTop-(i&&i.offsetHeight?i.offsetHeight:0);setTimeout((()=>{window.scrollTo({top:s,behavior:"smooth"})}),100)}showAllAds(){for(let e=0;e<this.storyAdsList.length;e++){const t=this.storyAdsList[e].closest("[data-class]")?.getAttribute("data-class");this.storyAdsList[e].classList.add(t)}window.properBuildSlots&&window.properBuildSlots()}}class it{constructor(){document.querySelectorAll(".SovrnAd[data-module]").forEach((e=>{e&&e.previousElementSibling&&e.previousElementSibling.hasAttribute("data-module")&&e.previousElementSibling.setAttribute("module-before-ad",""),e&&e.nextElementSibling&&e.nextElementSibling.hasAttribute("data-module")&&e.nextElementSibling.setAttribute("module-after-ad","")}))}}class nt extends window.HTMLElement{get clipped(){return this.hasAttribute("data-clipped")}set clipped(e){e?this.setAttribute("data-clipped",""):this.removeAttribute("data-clipped")}set overflowing(e){e?this.setAttribute("overflowing",""):this.removeAttribute("overflowing")}get overflowing(){return this.getAttribute("overflowing")}get playlistItemsContainer(){return this.querySelector("[data-playlist-items]")}get fragmentUri(){return this.getAttribute("fragment-uri")}get fragmentParams(){return this.getAttribute("fragment-params")}connectedCallback(){this.isInitialPlayerLoaded=!1,this.playlistItems=[...this.querySelectorAll(".VideoPlaylistItem")],this.addEventListener(c.ended,this),this.addEventListener("scroll",this,!0),this.bindClickEvents(),this.setScrollState(),this.loadPlaylistItem(this.playlistItems[0])}handleEvent(e){if(e.type===c.ready&&(this.isInitialPlayerLoaded?e.target.play():this.isInitialPlayerLoaded=!0),e.type===c.ended){const e=this.playlistItems.findIndex((e=>null!==e.getAttribute("is-current")&&e));e<this.playlistItems.length-1&&this.loadPlaylistItem(this.playlistItems[e+1])}"scroll"===e.type&&this.setScrollState()}bindClickEvents(){const e=this.querySelector('[data-click="toggleExpand"]');e&&e.addEventListener("click",(()=>{this.clipped=!1})),this.querySelectorAll(".VideoPlaylistItem").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),null===e.getAttribute("is-current")&&this.loadPlaylistItem(e)}))})),this.querySelectorAll("button[data-scroll-backward]").forEach((e=>{e.addEventListener("click",(()=>{e.matches("[disabled]")||this.playlistItemsContainer.scrollBy({top:-.67*this.playlistItemsContainer.clientHeight,left:-.67*this.playlistItemsContainer.clientWidth,behavior:"smooth"})}))})),this.querySelectorAll("button[data-scroll-forward]").forEach((e=>{e.addEventListener("click",(()=>{e.matches("[disabled]")||this.playlistItemsContainer.scrollBy({top:.67*this.playlistItemsContainer.clientHeight,left:.67*this.playlistItemsContainer.clientWidth,behavior:"smooth"})}))}))}setScrollState(){const e=this.playlistItemsContainer,t=Math.max(e.scrollLeft,e.scrollTop),i=Math.max(e.scrollWidth-e.scrollLeft-e.clientWidth,e.scrollHeight-e.scrollTop-e.clientHeight);this.querySelectorAll("button[data-scroll-backward]").forEach((e=>{e.disabled=0===t})),this.querySelectorAll("button[data-scroll-forward]").forEach((e=>{e.disabled=0===i}))}getVideoUri(e){const t=new window.URLSearchParams(this.fragmentParams);return t.append("_contentId",e),`${this.fragmentUri}?${t}`}loadPlaylistItem(e){this.addEventListener(c.ready,this);const t=e.querySelector("template").innerHTML;this.querySelector("[data-video-playlist-module-player]").innerHTML=t,this.setState(this.playlistItems.indexOf(e))}setState(e){this.playlistItems.forEach(((t,i)=>{t.removeAttribute("is-current"),e===i&&t.setAttribute("is-current","")}))}}class st extends window.HTMLElement{connectedCallback(){this.elPlayPreview=this.querySelector("[data-playpreview]"),this.elPlayPreviewTpl=this.elPlayPreview.querySelector("template"),this.isPreviewing=!1,this.setBinds()}setBinds(){this.addEventListener("click",(()=>{})),this.addEventListener("mouseenter",this.startPreview.bind(this)),this.addEventListener("mouseleave",this.endPreview.bind(this))}startPreview(){const e="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;this.isPreviewing||e||(this.elPlayPreview.innerHTML=this.elPlayPreviewTpl.innerHTML,this.setAttribute("data-preview","on"),this.isPreviewing=!0)}endPreview(){this.isPreviewing&&(this.isPreviewing=!1,this.setAttribute("data-preview","off"),setTimeout((()=>{this.elPlayPreview.innerHTML=""}),100))}}class ot extends h{async connectedCallback(){super.connectedCallback();const{default:e}=await s.e(333).then(s.bind(s,343));this._player=new e(this.querySelector("iframe")),this._player.ready().then((()=>{this.onReady()})),this._player.on("playing",(()=>{this.onPlay()})),this._player.on("ended",(()=>{this.onEnded()})),this._player.on("pause",(()=>{this.onPause()}))}play(){try{this._player.play()}catch(e){console.error(e)}}}class at extends h{async connectedCallback(){super.connectedCallback(),await this.loadYouTubeVideoPlayerAPI(),this._player=new window.YT.Player(this.querySelector("iframe"),{events:{onReady:()=>this.onReady(),onStateChange:e=>this.onStateChange(e)}}),this.playYoutubeOnLeadPromo()}playYoutubeOnLeadPromo(){const e=document.querySelector('[data-gtm-modulestyle="Video Playlist Module - Basic"]');if(e){const t=this.getAttribute("data-video-id");if((e.querySelector("[data-video-id]")?e.querySelector("[data-video-id]").getAttribute("data-video-id"):null)!==t)return;const i=e.querySelector(".PageListStandardE-leadPromo-info");i.setAttribute("data-promo-info-video-id",t),i.addEventListener("click",(()=>{i.getAttribute("data-promo-info-video-id")===t&&(this._player.getPlayerState()===window.YT.PlayerState.PLAYING?this.pause():this.play())}))}else console.error("Element not found!")}loadYouTubeVideoPlayerAPI(){return new Promise((e=>{if(window.YouTubeAPIReady)return e();{const e=document.createElement("script"),t=document.getElementsByTagName("script")[0],i=()=>{window.YouTubeAPIReady=!0,window.dispatchEvent(new window.Event("YouTubeApiReady"))};e.src="https://www.youtube.com/iframe_api",t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=i}window.addEventListener("YouTubeApiReady",e)}))}onStateChange(e){const t=e.data;c.youTubePlayer=this._player,e.currentPlayer="Youtube",t===window.YT.PlayerState.ENDED&&this.onEnded(),t===window.YT.PlayerState.PLAYING&&this.onPlay(e),t===window.YT.PlayerState.PAUSED&&this.onPause()}play(){try{this._player.playVideo()}catch(e){console.error(e)}}pause(){try{this._player.pauseVideo()}catch(e){console.error(e)}}}let rt=!1;class lt extends window.HTMLElement{constructor(){super(...arguments),D(this,"truncateText",((e,t)=>{if(e.length<=t)return e;let i=e.substr(0,t),n=i.lastIndexOf(" ");return-1===n?i:i.substr(0,n)+"..."}))}connectedCallback(){if(this.currentCustomHeadline=this.getAttribute("custom-headline"),"h2"===this.currentCustomHeadline?this.currentCustomHeadline="h1":"h3"===this.currentCustomHeadline&&(this.currentCustomHeadline="h2"),0===this.currentCustomHeadline.indexOf("h")&&document){let e=!1,t=this.parentNode.closest(".PageListStandardE, .PageListStandardB, .PageListStandarD, .PageListStandardH, .PageListCarouselA, .Page-oneColumn, .Page-twoColumn")?.querySelector(this.currentCustomHeadline);t?(e=!0,"h1"===this.currentCustomHeadline&&(rt=!0)):e=!1;let i=this.children[0];if("true"===this.getAttribute("trim-title")){let e=this.getElementsByClassName("PagePromoContentIcons-text");e[0].innerText=this.truncateText(e[0].innerText,90)}let n=i.parentNode.parentNode;if(!e&&(i.className.includes("-header")||n.className.includes("lead"))&&(!1===rt&&"h1"===this.currentCustomHeadline||"h1"!==this.currentCustomHeadline)){!1===rt&&"h1"===this.currentCustomHeadline&&(rt=!0);let e=document.createElement(this.currentCustomHeadline);e.innerHTML=i.innerHTML;for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e.setAttribute(n.name,n.value)}i.parentNode.replaceChild(e,i)}}}}class ct extends window.HTMLElement{constructor(){super()}connectedCallback(){const e=this.getAttribute("data-round-status");this.screenWidth=screen.width,this.finalsContainer=this.querySelector(".Bracket-finalsContainer"),this.prevBtn=null;const t=this.querySelector(".Bracket-container");t.style.position="relative",t.style.left="-4px",t.style.top="0px",this.screenWidth<=1023?(this.addEventListener("click",(e=>{const t=e.target;if("BUTTON"===t.tagName){const e=t.getAttribute("data-attribute");this.prevBtn&&(this.prevBtn.style.backgroundColor="#fff",this.prevBtn.style.color="#010001"),t.style.backgroundColor="#d94839",t.style.color="#fff",this.prevBtn=t,this.scrollToElement(e)}})),this.finalsContainer.style.display="none",this.findCurrentRound(e)):this.finalsContainer.style.display="grid"}changeButtonColor(e){const t=this.querySelector(`#column${e}`);this.prevBtn&&(this.prevBtn.style.backgroundColor="#fff",this.prevBtn.style.color="#010001"),t.style.backgroundColor="#d94839",t.style.color="#fff",this.prevBtn=t}findCurrentRound(e){try{const t=JSON.parse(e),i=Object.values(t).every((e=>"closed"===e)),n=Object.values(t).every((e=>"scheduled"===e)),s=Object.values(t).some((e=>"in_progress"===e));i?this.handleRound("National Championship"):n?this.handleRound("First Four"):s?this.handleRound(s):console.log("No rounds are in found.")}catch(e){console.error("Error parsing round status:",e)}}handleRound(e){const t=this.getRoundNumber(e);this.scrollToElement(t),this.changeButtonColor(t),this.scrollToElementSmooth(t)}getRoundNumber(e){return{"First Four":"0","First Round":"1","Second Round":"2","Sweet 16":"3","ELITE Eight":"4","Final Four":"5","National Championship":"6"}[e]||"1"}scrollToElementSmooth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth";const i=this.querySelector(`#column${e}`);i?i.scrollIntoView({behavior:t,block:"end",inline:"nearest"}):console.error(`Element with ID "${e}" not found.`)}addScrollToBracket(e,t,i,n,s,o,a,r){const l=this.querySelectorAll(".Bracket-container"),c=this.querySelectorAll(".region.left"),d=this.querySelector(".order-3"),h=this.querySelectorAll(".region.alignTextRight-0-2-313");i?l.forEach((i=>{i.style.transition="left .25s ease-out",i.style.position="relative",i.style.left=`-${e}px`,i.style.top=`-${t}px`})):setTimeout((()=>{l.forEach((i=>{i.style.transition="left .25s ease-out",i.style.position="relative",i.style.left=`-${e}px`,i.style.top=`-${t}px`})),n&&s&&c.forEach((e=>{e.style.position="relative",e.style.left=`${n}px`,e.style.top=`${s}px`})),o&&a&&h.forEach((e=>{e.style.position="relative",e.style.left=`${o}px`,e.style.top=`${a}px`})),r&&(d.style.position="relative",d.style.left=`-${r}px`)}),500)}scrollToElement(e){this.finalsContainer.style.display="none";const t=this.querySelectorAll(".Bracket-container"),i=this.querySelector(".Bracket-finalsContainer div:first-child .Game-final-four");switch(e){case"0":this.addScrollToBracket(0,0,!1,1,1,1,1,1),t.forEach((e=>{e.classList.remove("Mobile-view","sweet-16","elite8")}));break;case"1":this.addScrollToBracket(215,12,!1,1,5,1,5,205),t.forEach((e=>{e.classList.remove("Mobile-view","sweet-16","elite8")}));break;case"2":this.addScrollToBracket(430,80,!1,220,75,220,75,205),t.forEach((e=>{e.classList.add("Mobile-view"),e.classList.remove("sweet-16")}));break;case"3":this.addScrollToBracket(650,120,!1,440,120,440,120,205),t.forEach((e=>{e.classList.add("Mobile-view","sweet-16"),e.classList.remove("elite8")}));break;case"4":this.addScrollToBracket(870,180,!1,660,172,660,38,205),t.forEach((e=>{e.classList.add("Mobile-view","sweet-16","elite8")})),this.screenWidth<=480&&(this.finalsContainer.style.transition="left .25s ease-out",i.style.marginBottom="220px",this.finalsContainer.style.display="grid",this.finalsContainer.style.position="absolute",this.finalsContainer.style.top="115px",this.finalsContainer.style.left="226px");break;case"5":this.addScrollToBracket(1090,190,!1,0,0,0,0,205),t.forEach((e=>{e.classList.remove("Mobile-view","sweet-16","elite8")})),i.style.marginBottom="15px",this.finalsContainer.style.zIndex="999",this.finalsContainer.style.position="relative",this.finalsContainer.style.transition="left .25s ease-out",this.finalsContainer.style.display="grid",this.finalsContainer.style.left="-215px",this.finalsContainer.style.top="-1800px";break;case"6":this.addScrollToBracket(1090,190,!1,0,0,0,0,205),this.finalsContainer.style.transition="left .25s ease-out",this.finalsContainer.style.display="grid",this.finalsContainer.style.top="-1820px",this.finalsContainer.style.left="-475px",this.finalsContainer.style.width="30rem",t.forEach((e=>{e.classList.remove("Mobile-view","sweet-16","elite8")}))}}}const dt="background: Red;color: white; padding: 4px;",ht="vf_login_state";class ut extends window.HTMLElement{constructor(){super(),D(this,"scrollToTarget",(()=>{const e=document.querySelector(".Page-below");if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:t,behavior:"smooth"})})),D(this,"checkScrollNeeded",(()=>{"true"===localStorage.getItem("zephr-scroll-to-convo")&&(localStorage.removeItem("zephr-scroll-to-convo"),setTimeout((()=>requestAnimationFrame(this.scrollToTarget)),3e3))})),D(this,"checkUsername",(()=>{"true"===localStorage.getItem("zephr-check-username")&&(localStorage.removeItem("zephr-check-username"),window.Zephr?.openModal&&window.Zephr?.openModal())})),D(this,"handleOrientationChange",(()=>{const{deviceType:e,orientation:t}=this.detectDeviceType();console.log("%cDevice Type:",dt,e),console.log("%cOrientation:",dt,t),console.log("%cOrientation Changed:",dt,t)})),this.detectDeviceType(),this.checkScrollNeeded()}detectDeviceType(){const e=navigator.userAgent.toLowerCase();let t="desktop";const i=/ipad/.test(e)||navigator.maxTouchPoints>2&&"macOS"===navigator?.userAgentData?.platform||/Macintosh/i.test(e)&&navigator.maxTouchPoints>2,n=/android/.test(e)&&!/mobile/.test(e),s=/samsung.*tablet/.test(e)||/galaxy.*tablet/.test(e)||/sm-t/.test(e),o=/windows nt/.test(e)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,a=/(kindle|playbook|silk|tablet|gt-p|sm-t|surface|nexus(?!.*mobile)|shield tablet)/.test(e),r=window.innerWidth,l=window.innerHeight;i||n||s||o||a||r>=600&&r<=1366?t="tablet":(/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(e)||/android.*mobile/.test(e)||r<600)&&(t="mobile");let c="portrait";return c=window.screen.orientation?window.screen.orientation.type.includes("landscape")?"landscape":"portrait":r>l?"landscape":"portrait",this.handlePageAsideVisibility(t,c),{deviceType:t,orientation:c}}handlePageAsideVisibility(e,t){const i=document.documentElement;"portrait"===t&&"tablet"===e?i.setAttribute("data-orientation","portrait"):i.removeAttribute("data-orientation")}connectedCallback(){window.screen.orientation&&window.screen.orientation.addEventListener("change",this.handleOrientationChange),window.addEventListener("resize",this.handleOrientationChange),this.taboolaEvent(),this.autoLoadAds();const e=screen.width;this.sovrnAds=this.querySelectorAll(".SovrnAd.Advertisement[data-delayAdInsertion]"),e>767?this.showAllAds():this.showFirstAd(),this.parselyItemsUrl=[],this.parselyFeature(),window.vfQ=window.vfQ||[],window.vfQ.push((()=>{this.checkZephrLogin()})),window.vfQ.push((()=>{window.vf.$prepublish((function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return"authentication"===e&&"required"===t?(window.vf.$publish("tray","close"),window.Zephr?.openModal?.(),!1):"walls"===e&&"post-attempt"===t?(Pe.enqueue((async e=>{e?.accessDetails?.authenticated&&window.Zephr?.openModal&&window.Zephr?.openModal()})),{channel:e,event:t,args:n}):{channel:e,event:t,args:n}}))})),window.vfQ.push((()=>{window.vf.$subscribe("login","failure",(e=>{if("login_banned"!==e.error_key)return;let t="Your account has been permanently banned from posting.";if(0===e.isPermanent){const i=new Date(e.endDate).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});t="Your account has been banned from posting until "+i}this.waitForEditorWrapper((()=>{const i=document.querySelector(".vf-new-content__content-editor-wrapper");if(i&&!document.querySelector(".vf-ban-container")){const n=document.createElement("div");n.className="vf-ban-container";const s=document.createElement("div");if(s.className="vf-ban-message",s.innerHTML='<span class="vf-ban-icon">❗</span> <span>'+t+"</span>",e.reason){const t=document.createElement("span");t.className="vf-ban-tooltip",t.textContent=" — WHY WAS I BANNED?";const i=document.createElement("div");i.className="vf-ban-tooltip-content",i.textContent=e.reason,t.appendChild(i),s.appendChild(t)}n.appendChild(s),i.parentNode.insertBefore(n,i.nextSibling)}}))}))}))}showAllAds(){for(let e=0;e<this.sovrnAds.length;e++){const t=this.sovrnAds[e].closest("[data-class]")?.getAttribute("data-class");this.sovrnAds[e].classList.add(t)}window.properBuildSlots&&window.properBuildSlots()}showFirstAd(){if(this.sovrnAds&&this.sovrnAds.length){const e=this.sovrnAds[0].closest("[data-class]")?.getAttribute("data-class");this.sovrnAds[0].classList.add(e),window.properBuildSlots&&window.properBuildSlots()}}taboolaEvent(){window._taboola=window._taboola||[],window._taboola.push({listenTo:"readmore.click",handler:()=>{this.showAllAds()}})}autoLoadAds(){setTimeout((()=>{this.querySelector(".tbl-read-more-btn")||this.showAllAds()}),1e4)}async parselyFeature(){let e=5;const t=this.querySelectorAll("[data-parsely-title]");if(!t?.length)return;let i=!1;for(let e=0;e<t.length;e++){const n=t[e].getAttribute("data-parsely-enabled");if(n&&"true"===n){i=!0;break}}if(i){try{const e=document.querySelector('link[rel="canonical"]'),i=`/parsely-api-endpoint?article_url=${e?e.href:`${window.location.origin}${window.location.pathname}`}`,n=await this.fetchRelatedContent(i);if(!n?.length)throw new Error("Network response was ok but response is empty");t.forEach(((e,t)=>{this.displayRelatedContent(n,e,t)}))}catch(t){if(t?.message?.toLowerCase()?.includes("disabled"))return void console.warn("Parsely feature is disabled. Stopping retry loop.");console.error("Error fetching related content:",t),e=1}setTimeout((()=>{this.parselyFeature()}),60*e*1e3)}}async fetchRelatedContent(e){try{const t=await fetch(e),i=await t.json();if(!t.ok)throw i&&i.error?new Error(i.error):new Error(`Network response was not ok: ${t.statusText}`);return i}catch(e){throw console.error("Error fetching related content:",e),e}}displayRelatedContent(e,t,i){const n=/\/article/,s=/\/defaultshareimage/,o=t?.querySelector(".PageList-header-title"),a=t?.getAttribute("data-parsely-title"),r=t?.querySelectorAll(".PageListStandardB .PageList-items-item"),l=t?.querySelector(".PageListStandardB .PageList-items");let c=[],d=[];if((e||[]).some((e=>{const t=`${window.location.origin}/${e.articleUrl}`;if(n.test(t)&&e.imageUrl&&!s.test(e.imageUrl)&&!this.parselyItemsUrl.includes(t)){const i=document.createElement("div");i.classList.add("PageList-items-item"),d.push(e),this.parselyItemsUrl.push(t);let n=this.hubPeekPromo();if(n=n.replace(/{{title}}/g,e.title),n=n.replace(/{{thumbnailUrl}}/g,e.imageUrl),n=n.replace(/{{url}}/g,this.removeURLParams(t)),i.innerHTML=n,c.push(i),3===c.length)return!0}})),console.log(`%cParsly: Filtered [${i+1}]`,dt,d),console.log(`%cParsly: All Hubpeeks [${i+1}]`,dt,this.parselyItemsUrl),c.length&&a)if(o)o.textContent=a;else{const e=document.createElement("div");e.classList.add("PageList-header"),e.setAttribute("data-prompt","visible"),e.innerHTML=this.hubPeekTitle().replace(/{{title}}/g,a);const i=t?.querySelector(".PageList-header-alternativedivider");i&&i.parentNode.replaceChild(e,i)}for(;c.length<3;)c.push(r[c.length%r.length]);l.replaceChildren(),c.forEach((e=>{l.appendChild(e)}))}removeURLParams(e){const t=new URL(e);return t.search="",t.toString()}hubPeekPromo(){return'<div class="PagePromo" data-gtm-region="{{title}}" data-gtm-topic="No Value" data-align-top="" data-mobile-alt-layout="true" data-gtm-region-item="">\n              <div class="PagePromo-media" data-animate="fromBottom">\n                <a class="Link" aria-label="{{title}}" href="{{url}}">\n                  <picture>\n                      <source media="(min-width: 600px)" srcset="{{thumbnailUrl}}">\n                      <source type="image/webp" srcset="{{thumbnailUrl}}">\n                      <img class="Image crop-medium-3x2" alt="{{title}}" src="{{thumbnailUrl}}">\n                  </picture>\n                </a>\n              </div>\n              <div class="PagePromo-content" data-animate="fromBottom">\n                <div class="PagePromo-title">\n                    <a class="Link " href="{{url}}"><span class="PagePromoContentIcons-text">{{title}}</span></a>\n                </div>\n              </div>\n          </div>'}hubPeekTitle(){return'<bsp-custom-headline custom-headline="div">\n                <div class="PageList-header-title">\n                    {{title}}\n                </div>\n            </bsp-custom-headline>'}waitForEditorWrapper(e){const t=setInterval((()=>{document.querySelector(".vf-new-content__content-editor-wrapper")&&(clearInterval(t),e())}),100)}_readVfLoginCache(){try{const e=localStorage.getItem(ht);if(!e)return{};const t=JSON.parse(e);return t&&"object"==typeof t?t:{}}catch{return{}}}_writeVfLoginCache(e){try{const t={[e]:!0};localStorage.setItem(ht,JSON.stringify(t))}catch(e){console.error("Error writing VF login cache:",e)}}_clearVfLoginCache(){try{localStorage.removeItem(ht)}catch(e){console.error("Error clearing VF login cache:",e)}}async viafouraSignIn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>3)console.warn("Max retries reached for Viafoura login");else try{if(this._readVfLoginCache()[e])return;console.log("Calling vf.session.login.cookie for new session"),await window.vf.session.login.cookie(e),this._writeVfLoginCache(e)}catch(i){console.error("Error vf.session.login.cookie",i),setTimeout((async()=>{await this.viafouraSignIn(e,t+1)}),1e3)}}async checkZephrLogin(){Pe.enqueue((async e=>{try{const t=Q.getCookie("blaize_session");console.log("Viafoura login session",t),console.log("Viafoura login zephr?.accessDetails?.authenticated",e?.accessDetails?.authenticated),e?.accessDetails?.authenticated&&t&&!window.Zephr?.openModal?(this.viafouraSignIn(t),this.checkUsername()):(window.vf&&(console.log("Viafoura: Logging out of vf.session"),await window.vf.session.logout(),setTimeout((async()=>{await window.vf.session.logout()}),1e3)),this._clearVfLoginCache())}catch(e){console.error("Error getting profile",e)}}))}}function pt(){return new Promise(((e,t)=>{const i=indexedDB.open("apiCacheDB",1);i.onupgradeneeded=e=>{e.target.result.createObjectStore("responses",{keyPath:"url"})},i.onsuccess=t=>{e(t.target.result)},i.onerror=e=>{t("IndexedDB error: "+e.target.errorCode)}}))}function gt(e,t){return new Promise(((i,n)=>{const s=e.transaction(["responses"],"readonly").objectStore("responses").get(t);s.onsuccess=()=>{i(s.result)},s.onerror=()=>{n("Error getting cached response")}}))}function mt(e,t,i){e.transaction(["responses"],"readwrite").objectStore("responses").put({url:t,response:i,timestamp:Date.now()})}const ft="Newsletter-Banner-";class vt extends window.HTMLElement{async connectedCallback(){this.hiddenFieldId=this.generateIdString(),this.addInputAtStart(),document.documentElement.setAttribute("is-newsletter-page",""),this.isLoggedIn=window.Zephr?.accessDetails?.authenticated,this.storageKey="newsletterItems",this.cacheDuration=9e5,this.exclusiveItems=[],this.selectedItems=[],this.selectedItemsTitle=[],this.privacyPolicy=document.querySelector("[data-privacy-policy]"),this.emailArea=document.getElementById(`${ft}email`),this.submitBtn=document.getElementById(`${ft}submitBtn`),this.closeBtn=document.getElementById(`${ft}closeBtn`),this.newsLetterText="Newsletter",this.db=await pt(),document.querySelectorAll("[data-checkbox-id]").forEach((e=>{e.addEventListener("change",(()=>{const t=e.id,i=e.getAttribute("data-title");if(e.checked)e.nextElementSibling.innerHTML="SELECTED",this.selectedItems.push(t),this.selectedItemsTitle.push(i);else{e.nextElementSibling.innerHTML="SELECT";const i=this.selectedItems.indexOf(t);this.selectedItems.splice(i,1),this.selectedItemsTitle.splice(i,1)}this.selectedItems.length?(document.querySelector("[data-sailthru-banner]").removeAttribute("hidden"),this.newsLetterText=this.selectedItems.length>1?"Newsletters":"Newsletter"):document.querySelector("[data-sailthru-banner]").setAttribute("hidden",""),this.updateSailthruBennerTitle();const n=this.selectedItems.filter((e=>!this.exclusiveItems.includes(e)));if(mt(this.db,this.storageKey,n),this.isLoggedIn){const e=this.selectedItems.filter((e=>this.exclusiveItems.includes(e)));mt(this.db,`${this.storageKey}Exclusive`,e)}}))})),this.exclusiveNLEvent(),this.submitSailthru(),this.closeSailthruForm(),this.disableEnableExclusive(!0),Pe.enqueue((e=>{this.isLoggedIn=e?.accessDetails?.authenticated,this.checkLogin()})),this.init()}init(){}async preSelectedItems(){let e=new URLSearchParams(window.location.search).get("id")||"";e.length&&(e=e.split(","),this.hasCommonItem(e,this.exclusiveItems)&&!this.isLoggedIn&&(mt(this.db,`${this.storageKey}Exclusive`,e),window.location.href="/register?target=newsletters"));const t=await gt(this.db,this.storageKey),i=Date.now();t&&i-t.timestamp<this.cacheDuration&&(e=e.concat(t?.response||[])),e.length&&this.updateSelectedList(e)}updateSelectedList(e){e.forEach((e=>{const t=document.getElementById(e);t.checked=!0,t.nextElementSibling.innerHTML="SELECTED",this.selectedItems.push(e),this.selectedItemsTitle.push(t.getAttribute("data-title"))})),document.querySelector("[data-sailthru-banner]").removeAttribute("hidden"),this.newsLetterText=this.selectedItems.length>1?"Newsletters":"Newsletter",this.updateSailthruBennerTitle()}updateSailthruBennerTitle(){this.bennerHeadline=document.querySelector("[data-sailthru-banner] .Newsletter-Banner-title"),this.bennerHeadline.innerHTML=this.selectedItems.length?`${this.selectedItems.length} ${this.newsLetterText} Selected`:"Select Newsletter"}subscribeNL(e){if(this.hiddenField.value)console.warn("Bot field filled --",this.hiddenField.value),this.showMessage();else if(this.emailArea.value&&this.isEmailValid(this.emailArea.value))if(this.privacyPolicy.checked)if(this.selectedItems.length){let t=this.selectedItems;this.isLoggedIn||(t=this.selectedItems.filter((e=>!this.exclusiveItems.includes(e))));let i="/api/newsletter/signup";const n={emailId:this.emailArea.value,newsLetterListToSubscribe:t};fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-ReCaptcha-Token":e},body:JSON.stringify(n)}).then((e=>200===e.status?this.success():this.error())).then((e=>{console.log("data",e)})).catch((e=>{console.error("error",e)}))}else console.error("required field are missing");else this.showMessage(),this.privacyPolicy.focus();else this.showMessage(),this.emailArea.focus()}submitSailthru(){this.submitBtn.addEventListener("click",(()=>{this.hideMessage(),window.grecaptcha.execute().then((e=>{e?this.subscribeNL(e):console.error("reCAPTCHA token is missing")}))}))}showMessage(){this.hideError(),document.querySelector("[data-sailthru-banner] .Newsletter-Banner-message").style.display="block"}hideMessage(){document.querySelector("[data-sailthru-banner] .Newsletter-Banner-message").style.display="none"}isEmailValid(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}success(){this.hideMessage(),this.hideError(),this.bennerHeadline.innerHTML=`Thank you for subscribing to ${this.selectedItems.length} ${this.newsLetterText}`,this.submitBtn.style.display="none",this.emailArea.style.fontWeight="bold",this.emailArea.value="SUBMITTED",this.emailArea.setAttribute("readonly",!0),m("newsletter_submitted",{count:this.selectedItems.length,items:this.selectedItemsTitle.join(", ")}),async function(e){try{const e=(await pt()).transaction(["responses"],"readwrite").objectStore("responses"),t=e.openCursor();t.onsuccess=t=>{const i=t.target.result;if(i){const t=i.value;Date.now()-t.timestamp>1e4&&e.delete(i.primaryKey),i.continue()}},t.onerror=e=>{console.error("Error cleaning old entries:",e.target.errorCode)}}catch(e){console.error("Error in cleanOldEntries:",e)}}()}error(){this.hideMessage();let e=document.querySelector("[data-sailthru-banner] .Newsletter-Banner-Error");e.style.display="block",e.style.textDecorationColor="red"}hideError(){document.querySelector("[data-sailthru-banner] .Newsletter-Banner-Error").style.display="none"}closeSailthruForm(){this.closeBtn.addEventListener("click",(()=>{document.querySelector("[data-sailthru-banner]").setAttribute("hidden",!0)}))}disableEnableExclusive(e){document.querySelectorAll(".exclusive").forEach((function(t){t.disabled=e}))}async checkLogin(){try{if(console.log("newlestter isLoggedIn",this.isLoggedIn),this.isLoggedIn){const e=await window.fetch("/blaize/account"),t=await e.json();this.isLoggedIn=!0,this.emailArea.value=t?.identifiers.email_address,this.privacyPolicy.checked=!0,this.emailArea.setAttribute("readonly",!0),this.disableEnableExclusive(!1),this.updateExclusiveBanner();const i=await gt(this.db,`${this.storageKey}Exclusive`),n=Date.now();i&&n-i.timestamp<this.cacheDuration&&this.updateSelectedList(i?.response)}else this.emailArea.removeAttribute("readonly"),this.disableEnableExclusive(!0);this.preSelectedItems()}catch(e){return this.emailArea.removeAttribute("readonly"),this.disableEnableExclusive(!0),this.preSelectedItems(),console.error("Error getting profile",e)}}exclusiveNLEvent(){document.querySelectorAll("[data-exclusive-id]").forEach((e=>{this.exclusiveItems.push(e.getAttribute("data-exclusive-id")),e.addEventListener("click",(()=>{this.isLoggedIn||(mt(this.db,`${this.storageKey}Exclusive`,[e.getAttribute("data-exclusive-id")]),window.location.href="/register?target=newsletters")}))}))}updateExclusiveBanner(){document.querySelectorAll(".NewsletterItem-register").forEach((e=>{e.style.display="none"}))}hasCommonItem(e,t){const i=new Set(e);return t.some((e=>i.has(e)))}generateIdString(){return Math.random().toString(36).substr(2,10)}addInputAtStart(){let e=document.createElement("input");e.type="text",e.id=this.hiddenFieldId,e.style="position: absolute; left: -9999px; top: -9999px; width: 1px; height: 1px;",e.autocomplete="off",e.tabindex="-1",this.firstChild?this.insertBefore(e,this.firstChild):this.appendChild(e),this.hiddenField=document.getElementById(`${this.hiddenFieldId}`)}}class yt extends window.HTMLElement{constructor(){super(),document.documentElement.setAttribute("is-filter-bar",""),this.handleButtonClick=this.handleButtonClick.bind(this),this.openDrawer=this.openDrawer.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleOptionClick=this.handleOptionClick.bind(this),this.getURLParameters=this.getURLParameters.bind(this),this.arrowicon="",this.screenWidth=Math.min(screen.width,window.innerWidth),this.currentFilter=""}connectedCallback(){if(this.cacheElements(),this.handleSearchInput(),this.checkInputValue(),this.getURLParameters(),this.overhangElement=document.querySelector("[data-page-overhang]"),this.hasLeaderBoard=document.querySelector('[data-header-hasleaderboard="true"]'),this.overhangElement){const e=document.querySelector(".filter-text");e&&(this.screenWidth<1023&&this.hasLeaderBoard?e.style.color="#000":e.style.color="#fff")}[{id:"search-button",content:"search-movie-reviews"},{id:"0",content:"filters"},{id:"1",content:"filters"},{id:"2",content:"filters"},{id:"3",content:"filters"},{id:"4",content:"filters"},{id:"5",content:"filters"},{id:"6",content:"filters"}].forEach((e=>{document.getElementById(e.id)?.addEventListener("click",(()=>this.handleButtonClick(e.id,e.content)))}));const e=document.querySelectorAll("button[data-filter-button]"),t=document.querySelectorAll(".directionArrow");e.forEach((e=>{const i=e.getAttribute("data-filter-button");e.addEventListener("click",(()=>{t.forEach((e=>{e.classList.remove("down")})),this.arrowicon=e.querySelector(".directionArrow"),this.arrowicon&&this.arrowicon.classList.add("down"),this.handleButtonClickWithIndex(i)}))})),document.getElementById("close-button")?.addEventListener("click",this.handleCloseClick)}handleCloseClick(e){const t=document.getElementById("drawer"),i=t.getElementsByClassName("modalhead-heading");"called"!==e&&m("searchFilterClosed",{filterName:i[0]?.textContent}),t.style.display="none",this.toggleScrolling(!0),this.arrowicon.classList.toggle("up")}openDrawer(e){const t=document.getElementById(e)?.innerHTML||"";document.getElementById("drawer-content").innerHTML=`${t}<button class="close-button" id="close-button">✕</button>`,document.getElementById("drawer").style.display="block",document.getElementById("close-button").addEventListener("click",this.handleCloseClick),this.addOptionClickListeners()}openDrawerWithIndex(e){const t=document.querySelector(`[data-filter-content="${e}"]`)?.innerHTML||"";document.getElementById("drawer-content").innerHTML=`${t}<button class="close-button" id="close-button">✕</button>`,document.getElementById("drawer").style.display="block",this.toggleScrolling(!1),document.getElementById("close-button").addEventListener("click",this.handleCloseClick),this.addOptionClickListeners();const i=document?.getElementById(`resetM-${e}`);i&&i.addEventListener("click",(()=>{this.removeAllFilters()}))}toggleScrolling(e){this.screenWidth<786&&(document.body.style.overflow=e?"auto":"hidden")}addOptionClickListeners(){document.querySelectorAll(".options .option").forEach((e=>{e.addEventListener("click",this.handleOptionClick)}))}updateURLParameter(e,t){const i=new URL(window.location.href),n=new URLSearchParams(i.search);n.set(e,t),i.search=n.toString(),window.history.replaceState({},"",i),this.getURLParameters(),this.handleSubmitWithOptionsSelected(),this.handleCloseClick("called");const s=window.location.pathname;this.getNewSearch(s).then((e=>{clearTimeout(this.loadingTimeout),this.clearSearchForm(),this.renderSearchResults(e),document.body.dispatchEvent(new CustomEvent("MovieSearch",{detail:{responseMarkup:e}}))}))}removeAllFilters(){const e=new URL(window.location.href);e.search="",window.location.href=e.toString(),this.filterText.textContent="",this.filterContainer.style.visibility="hidden",m("searchMovieReviewResetButtonClicked",{})}handleOptionClick(e){const t=e.currentTarget.querySelector(".option-text");if(this.toggleScrolling(!0),t){const e=t.getAttribute("name"),i=t.getAttribute("paramVal");t.hasAttribute("israting")?m("filterClicked",{filterName:`${i} ${"1"===i?" Star ":" Stars "}`}):m("filterClicked",{filterName:t?.innerText}),this.updateURLParameter(e,i)}}handleButtonClick(e,t){const i=document.getElementById(e).getAttribute("data-heading");document.querySelectorAll(".nav-button").forEach((e=>{e.style.backgroundColor=""})),i!==this.currentFilter&&m("searchFilterOpened",{filterName:i}),this.currentFilter=i,document.getElementById(e).style.backgroundColor="#CCCCCC",this.openDrawer(t,e),"search-movie-reviews"===t&&this.handleFormSubmit()}handleButtonClickWithIndex(e){this.openDrawerWithIndex(e)}handleFormSubmit(){const e=document.querySelector("[data-bsp-search-results-form]");e.addEventListener("submit",(t=>{t.preventDefault(),this.searchInput&&this.searchInput.blur();const i=new URLSearchParams(new FormData(e)).toString(),n=window.location.pathname+"?"+i;m("searchFilterSubmited",{filterValue:i.split("=")[1]}),e.submit(),window.history.replaceState({},document.title,n),this.loadingTimeout=setTimeout((()=>{this.clearSearchForm()}),1e3),this.getNewSearch(n).then((e=>{clearTimeout(this.loadingTimeout),this.clearSearchForm(),this.getURLParameters(),this.renderSearchResults(e)}))}))}handleSubmitWithOptionsSelected(){const e=new URL(window.location.href);this.getNewSearch(e).then((e=>{clearTimeout(this.loadingTimeout),this.clearSearchForm(),this.renderSearchResults(e),document.body.dispatchEvent(new CustomEvent("Search:onMovieSearchUpdate",{detail:{responseMarkup:e}}))}))}getURLParameters(){const e=new URL(window.location.href),t=new URLSearchParams(e.search),i=[];for(const[e,n]of t.entries())i.push({name:e,value:n});if(i.length){this.filterContainer.style.display="flex",void 0!==this.filterContainer.getAttribute("data-app-request")&&null!==this.filterContainer.getAttribute("data-app-request")&&(this.filterContainer.style.marginTop="90px");let e="";i.forEach(((t,n)=>{e+=this.toSentenceCase(t.value);const s=this.querySelector(`[data-${t.name}]`)?.getAttribute(`data-${t.name}`);if("Run Time"===s){const i=parseInt(t.value),n=` - ${1===i?i+29:i+30} Minutes`;e+=this.toSentenceCase(n)}if("Rating"===s){const i="1"===t.value?" Star ":" Stars ";e+=i}n<i.length-1&&(e+=" / ")})),this.filterText.textContent=e,this.filterContainer.style.visibility="visible"}return i}toSentenceCase(e){return e.replace(/\b\w/g,(e=>e.toUpperCase()))}submitSearch(){let e;"function"==typeof Event?e=new Event("submit",{cancelable:!0}):(e=document.createEvent("Event"),e.initEvent("submit",!0,!0)),this.searchForm.dispatchEvent(e)}getNewSearch(e){return new Promise(((t,i)=>{window.fetch(e,{credentials:"include"}).then((e=>{t(e.text())})).catch((()=>{i(new Error("error"))}))}))}clearSearchForm(){this.searchResults.innerHTML=""}checkInputValue(){this.searchInput&&(0===this.searchInput.value.length?this.searchForm.setAttribute("data-has-value",!1):this.searchForm.setAttribute("data-has-value",!0))}handleSearchInput(){this.searchInput&&this.searchInput.addEventListener("keyup",p(250,(()=>{this.checkInputValue()}))),this.clearButton&&this.clearButton.addEventListener("click",(()=>{this.searchInput.value="",this.searchInput.focus(),this.checkInputValue()}))}renderSearchResults(e){const t=document.createElement("div");t.innerHTML=e;const i=t.querySelector("[data-bsp-search-results-ajax]").innerHTML;i&&(this.searchResults.innerHTML=i),this.dispatchRendered(),this.addOptionClickListeners()}dispatchRendered(){const e=new CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(e)}cacheElements(){this.searchForm=document.querySelector("[data-bsp-search-results-form]"),this.searchInput=this.searchForm.querySelector("[data-bsp-search-results-forminput]"),this.searchResults=document.querySelector("[data-bsp-search-results-ajax]"),this.clearButton=this.searchForm.querySelector(".SearchResultsModule-clearInputButton"),this.resetButton=document?.querySelector(".reset-button"),this.filterText=document?.querySelector(".filter-text"),this.filterContainer=document?.querySelector(".filter-container"),this.filterText.textContent="",this.resetButton?.addEventListener("click",(()=>{this.removeAllFilters()})),this.SearchResultsModuleMain=document?.querySelector(".SearchResultsModule-main")}}class bt extends window.HTMLElement{connectedCallback(){this.index=Math.floor(1e3*Math.random()),this.overlayFigEl=this.querySelector("[data-openOverlay]"),this.overlayFigEl&&this.bindImages()}bindImages(){this.overlayFigEl.querySelector("picture").addEventListener("click",(async()=>{await this.createOverlay(),await this.overlayOpen()}))}createOverlay(){const e=this.querySelector("[data-bsp-figure-overlay-template]"),t=`CarouselOverlay_${this.index}`;if(!document.getElementById(t)){this.elOverlay=document.createElement("div"),this.elOverlay.className="CarouselOverlay",this.elOverlay.id=t,this.elOverlay.innerHTML=e.innerHTML;const i=this.elOverlay.querySelector(".ReadMore");i&&(i.setAttribute("data-more-id",`read-more-${this.index}`),i.setAttribute("data-less-id",`read-less-${this.index}`));const s=this.elOverlay.querySelector(".ReadBtn");s&&s.setAttribute(`read-more-${this.index}`,"");const o=this.elOverlay.querySelector(".ReadLess");o&&o.setAttribute(`read-less-${this.index}`,""),document.body.appendChild(this.elOverlay),this.elOverlay.addEventListener("click",(e=>{n.call(this,e,"[data-bsp-carousel-overlayclose]",(async()=>{this.overlayClose()}))}))}}overlayOpen(){this.elOverlay.setAttribute("data-state","open"),document.documentElement.setAttribute("data-carousel-overlay","open");const e=new window.CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(e)}overlayClose(){this.elOverlay.setAttribute("data-state","false"),document.documentElement.removeAttribute("data-carousel-overlay"),this.elOverlay.parentElement.removeChild(this.elOverlay),delete this.elOverlay}}class wt extends HTMLElement{connectedCallback(){const e=this.querySelector("[data-theme-toggle]"),t=document.documentElement;e?.addEventListener("click",(()=>{const i=t.getAttribute("data-theme")||"light",n="dark"===i?"light":"dark";t.setAttribute("data-theme",n),e.textContent=`Switch to ${"dark"===i?"Dark":"Light"} Theme`}))}}class St extends Error{}St.prototype.name="InvalidTokenError";const Et="fanpoll_tokens",kt=new Map;class _t{static getSessionId(){const e=document.cookie.split(";");for(let t of e){const[e,i]=t.trim().split("=");if("blaize_session"===e)return i}const t=localStorage.getItem("fanpoll_anonymous_id");if(t)return`anonymous_${t}`;if(!window.Zephr?.accessDetails?.authenticated){const e=Math.random().toString(36).substring(2,15);return localStorage.setItem("fanpoll_anonymous_id",e),`anonymous_${e}`}return null}static async getToken(e,t){let{force:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=_t.getSessionId();if(!n)throw new Error("No session ID found");if(!i){const e=_t._readTokenStore()[n];if(e?.token&&e?.exp&&!_t._isExpired(e.exp))return e.token}if(!i&&kt.has(n))return kt.get(n);const s=(async()=>{console.log("fanpollAPIBaseURL",e),console.log("fromWhere",t);const i=`${e}/getToken?sessionId=${encodeURIComponent(n)}`,s=await fetch(i,{method:"GET"});if(!s.ok)throw new Error(`Failed to get token (${s.status})`);const o=await s.json(),a=o?.token;if("string"!=typeof a||a.length<10)throw new Error("Invalid token response");let r;try{const e=function(e,t){if("string"!=typeof e)throw new St("Invalid token specified: must be a string");t||(t={});const i=!0===t.header?0:1,n=e.split(".")[i];if("string"!=typeof n)throw new St(`Invalid token specified: missing part #${i+1}`);let s;try{s=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(e){return atob(t)}}(n)}catch(e){throw new St(`Invalid token specified: invalid base64 for part #${i+1} (${e.message})`)}try{return JSON.parse(s)}catch(e){throw new St(`Invalid token specified: invalid json for part #${i+1} (${e.message})`)}}(a)||{};r="number"==typeof e.exp?e.exp:null}catch{r=null}return r||(r=Math.floor(Date.now()/1e3)+300),_t._writeTokenForSession(n,a,r),a})();i||kt.set(n,s);try{return await s}finally{kt.delete(n)}}static invalidateCachedToken(){const e=_t.getSessionId();if(e){try{window.localStorage.removeItem(Et)}catch(e){console.error("Failed to remove cached token",e)}kt.delete(e)}}static formatCloseTime(e){return new Date(parseInt(e)).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"America/New_York"})+" ET"}static formatCloseTimeWithDate(e){const t=new Date(parseInt(e));return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"America/New_York",timeZoneName:"short"}).format(t).replace(",","").replace(",","").replace(" at","").replace(/(\d{1,2}:\d{2})/,"at $1")}static collectRankingsData(e,t){const i=[];return e.querySelectorAll(".FanPollModule-row").forEach(((e,n)=>{const s=e.querySelector(".CustomSelect-input"),o=e.querySelector(".CustomSelect-logo");let a=null;if(o){const e=o.querySelector("img");e&&(a=e.src)}const r=t.find((e=>e.sportsRadarId===s.value));s.value&&i.push({team_id:s.value,rank:n+1,team_name:r?.name||null,team_conference:r?.conference||null,team_logo:a,win:r?.wins||0,loss:r?.lose||0})})),i}static getDragAfterElement(e,t){return[...e.querySelectorAll(".FanPollModule-row:not(.dragging):not(.dragging-placeholder)")].reduce(((e,i)=>{const n=i.getBoundingClientRect(),s=t-n.top-n.height/2;return s<0&&s>e.offset?{offset:s,element:i}:e}),{offset:Number.NEGATIVE_INFINITY}).element}static _readTokenStore(){try{const e=window.localStorage.getItem(Et);if(!e)return{};const t=JSON.parse(e);return t&&"object"==typeof t?t:{}}catch{return{}}}static _writeTokenForSession(e,t,i){try{const n={[e]:{token:t,exp:i,savedAt:Date.now()}};window.localStorage.setItem(Et,JSON.stringify(n))}catch(e){console.warn("Failed to persist token to localStorage:",e)}}static _isExpired(e){return!e||e<=Math.floor(Date.now()/1e3)+60}}const Ct=_t;class At{static createLoader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{className:t="Loader",text:i="Loading...",position:n="fixed",overlay:s=!0,zIndex:o="99999",spinnerSize:a="40px",spinnerColor:r="#3498db"}=e,l=document.createElement("div");l.className=t;const c="fixed"===n&&s;l.setAttribute("data-prevent-scroll",c?"true":"false");const d=`\n      position: ${n};\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: none;\n      justify-content: center;\n      align-items:  flex-start;\n      z-index: ${o};\n      border-radius: inherit;\n    `,h=s?"background: rgba(0, 0, 0, 0.5);":"";l.style.cssText=d+h,this.addSpinnerAnimation(r);const u=`\n      <div style="\n        background: white;\n        padding: 20px;\n        border-radius: 8px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 10px;\n        z-index: ${parseInt(o)+1};\n        position: static;\n        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n        margin-top: 100px;\n      ">\n        <div class="spinner" style="\n          width: ${a};\n          height: ${a};\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid ${r};\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        "></div>\n        <div class="loading-text" style="\n          font-size: 14px;\n          color: #333;\n          font-weight: 500;\n        ">${i}</div>\n      </div>\n    `;return l.innerHTML=u,l}static addSpinnerAnimation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#3498db";if(console.log("color",e),document.querySelector("style[data-loader-animation]"))return;const t=document.createElement("style");t.setAttribute("data-loader-animation","true"),t.textContent="\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    ",document.head.appendChild(t)}static showLoader(e){e&&(e.style.display="flex","true"===e.getAttribute("data-prevent-scroll")&&(document.body.style.overflow="hidden"))}static hideLoader(e){e&&(e.style.display="none","true"===e.getAttribute("data-prevent-scroll")&&(document.body.style.overflow=""))}static createManagedLoader(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return console.error("Target element is required for managed loader"),null;"static"===window.getComputedStyle(e).position&&(e.style.position="relative");const i=this.createLoader(t);return e.appendChild(i),{show:()=>this.showLoader(i),hide:()=>this.hideLoader(i),element:i}}static createFullScreenLoader(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},position:"fixed",zIndex:"100000"},t=this.createLoader(e);return document.body.appendChild(t),{show:()=>this.showLoader(t),hide:()=>this.hideLoader(t),element:t}}}class Lt{static getTimeRemaining(e){let t;"string"!=typeof e||isNaN(e)?"number"==typeof e?(t=new Date(e),console.log("[CountdownTimerUtils] Parsed numeric timestamp to date:",t)):t=new Date(e):(t=new Date(parseInt(e,10)),console.log("[CountdownTimerUtils] Parsed numeric string to date:",t));const i=t.getTime()-Date.now();if(isNaN(i)||i<=0)return console.log("[CountdownTimerUtils] Timer completed or invalid date"),{total:0,days:0,hours:0,minutes:0,seconds:0,isCompleted:!0};const n=Math.floor(i/1e3%60),s=Math.floor(i/1e3/60%60),o=Math.floor(i/36e5%24);return{total:i,days:Math.floor(i/864e5),hours:o,minutes:s,seconds:n,isCompleted:!1}}static formatTimeUnit(e){return e<10?`0${e}`:`${e}`}static parseDateString(e){if("string"==typeof e){const t=/(\d{1,2})([AP]M),?\s*(\d{1,2})\/(\d{1,2})\/(\d{2,4})/i,i=e.match(t);if(i){const[,e,t,n,s,o]=i;let a=parseInt(e,10);const r="PM"===t.toUpperCase();12===a?a=r?12:0:r&&(a+=12);let l=parseInt(o,10);return l<100&&(l+=2e3),new Date(l,parseInt(n,10)-1,parseInt(s,10),a,0,0)}}return new Date(e)}static createCountdown(e){const{targetDate:t,onTick:i,onComplete:n}=e;let s;"number"==typeof t?(s=new Date(t),console.log("[CountdownTimerUtils] Using numeric timestamp:",t,s)):"string"==typeof t?isNaN(t)?s=this.parseDateString(t):(s=new Date(parseInt(t,10)),console.log("[CountdownTimerUtils] Parsed numeric string to date:",t,s)):s=new Date(t),isNaN(s.getTime())&&(console.error("[CountdownTimerUtils] Invalid target date:",t),s=new Date(Date.now()+864e5));let o=null;const a=()=>{const e=this.getTimeRemaining(s);i&&"function"==typeof i&&i(e),e.isCompleted&&(o&&(clearInterval(o),o=null),n&&"function"==typeof n&&n())};return{start:()=>(a(),o||(o=setInterval(a,1e3)),o),stop:()=>{o&&(clearInterval(o),o=null)}}}}class Pt extends HTMLElement{static get observedAttributes(){return["target-date","title","cache-token"]}constructor(){super(),this.attachShadow({mode:"open"}),this.config={targetDate:null,title:"",cacheToken:"",callbacks:{onTick:null,onComplete:null}},this.elements={container:null,title:null,timerContainer:null,units:{days:{value:null,label:null},hours:{value:null,label:null},minutes:{value:null,label:null},seconds:{value:null,label:null}},status:null},this.state={currentValues:{days:"00",hours:"00",minutes:"00",seconds:"00"},isInitialized:!1,isRunning:!1,isCompleted:!1,isRefreshing:!1,isUnloading:!1},this.countdown=null,this.refreshAbortController=null}connectedCallback(){this.config.targetDate=this.getAttribute("target-date"),this.config.title=this.getAttribute("title")||"",this.config.cacheToken=this.getAttribute("cache-token")||"";const e=this.getAttribute("data-original-timestamp");e&&(console.log("[FanPollCountdownTimer] Found original timestamp:",e,"Using this instead of modified:",this.config.targetDate),this.config.targetDate=e),console.log("[FanPollCountdownTimer] connectedCallback - Raw target date from attribute:",this.config.targetDate,"Type:",typeof this.config.targetDate),this._onPageHide=()=>{if(this.state.isUnloading=!0,this.refreshAbortController)try{this.refreshAbortController.abort()}catch(e){}},window.addEventListener("pagehide",this._onPageHide),window.addEventListener("beforeunload",this._onPageHide),this._createStyles(),this._createTimerDOM(),this.config.targetDate?(this._initCountdown(),this.start(),console.log("[FanPollCountdownTimer] Timer started")):console.warn("[FanPollCountdownTimer] No target date provided, timer not started")}attributeChangedCallback(e,t,i){if(t!==i)switch(console.log(`[FanPollCountdownTimer] attributeChangedCallback - ${e} changed from:`,t,"to:",i,"Type:",typeof i),e){case"target-date":{const e=this.getAttribute("data-original-timestamp");e?(console.log("[FanPollCountdownTimer] Using original timestamp instead of modified:",e),this.config.targetDate=e):this.config.targetDate=i,this.state.isInitialized&&this.updateTargetDate(this.config.targetDate);break}case"title":this.config.title=i||"",this.elements.title&&(this.elements.title.textContent=this.config.title);break;case"cache-token":this.config.cacheToken=i||""}}disconnectedCallback(){this.stop(),this._onPageHide&&(window.removeEventListener("pagehide",this._onPageHide),window.removeEventListener("beforeunload",this._onPageHide))}_initCountdown(){if(this.state.isInitialized)return;console.log("[FanPollCountdownTimer] _initCountdown - Starting with targetDate:",this.config.targetDate,"Type:",typeof this.config.targetDate);const e=this._parseTargetDate(this.config.targetDate);this._updateTitleWithOpenAt(e),console.log("[FanPollCountdownTimer] Final parsed values:",{originalTargetDate:this.config.targetDate,parsedTimestamp:e,parsedDate:new Date(e),currentTime:new Date,timeRemaining:e-Date.now(),difference:Math.abs(e-parseInt(this.config.targetDate,10))});const t=Lt.getTimeRemaining(e);console.log("[FanPollCountdownTimer] Initial time remaining:",t),this._updateTimerDisplay(t),this.countdown=Lt.createCountdown({targetDate:e,onTick:e=>{this._updateTimerDisplay(e),this.dispatchEvent(new CustomEvent("tick",{detail:e,bubbles:!0,composed:!0})),"function"==typeof this.config.callbacks.onTick&&this.config.callbacks.onTick(e)},onComplete:()=>{this._handleCountdownComplete(),this.dispatchEvent(new CustomEvent("complete",{bubbles:!0,composed:!0})),"function"==typeof this.config.callbacks.onComplete&&this.config.callbacks.onComplete()}}),this.state.isInitialized=!0}start(){this.countdown&&!this.state.isRunning?(console.log("[FanPollCountdownTimer] Starting countdown timer"),this.countdown.start(),this.state.isRunning=!0,this.elements.status):console.log("[FanPollCountdownTimer] Cannot start: countdown not initialized or already running")}stop(){this.countdown&&this.state.isRunning&&(this.countdown.stop(),this.state.isRunning=!1)}updateTargetDate(e){if(!e)return;this.config.targetDate=e,this.state.isCompleted=!1,this.state.isRunning&&this.stop();const t=this._parseTargetDate(e);this._updateTitleWithOpenAt(t),console.log("[FanPollCountdownTimer] Updating target date:",{newTargetDate:e,parsedTimestamp:t,parsedDate:new Date(t)}),this.countdown=Lt.createCountdown({targetDate:t,onTick:e=>{this._updateTimerDisplay(e),this.dispatchEvent(new CustomEvent("tick",{detail:e,bubbles:!0,composed:!0})),"function"==typeof this.config.callbacks.onTick&&this.config.callbacks.onTick(e)},onComplete:()=>{this._handleCountdownComplete(),this.dispatchEvent(new CustomEvent("complete",{bubbles:!0,composed:!0})),"function"==typeof this.config.callbacks.onComplete&&this.config.callbacks.onComplete()}}),this.state.isRunning&&this.start()}updateTitle(e){this.elements.title&&(this.config.title=e||"",this.elements.title.textContent=this.config.title,this.getAttribute("title")!==this.config.title&&this.setAttribute("title",this.config.title))}_createStyles(){const e=document.createElement("style");e.textContent='\n      :host {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        margin: 1.5rem 0;\n        text-align: center;\n        font-family: Arial, sans-serif;\n      }\n\n      .title {\n      font-size: 20px;\n      font-style: normal;\n      font-weight: 724;\n      line-height: 120%;\n      text-transform: uppercase;\n      color: #191919;\n      margin-bottom: 12px;\n      font-family: "AP", sans-serif;\n      }\n\n      .container {\n        display: flex;\n        justify-content: center;\n        gap: 2rem;\n      }\n\n      @media (max-width: 1200px) {\n        .container {\n          gap: 1.2rem;\n        }\n      }\n\n      .unit {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        min-width: 6rem;\n      }\n\n      @media (max-width: 1200px) {\n        .unit {\n          min-width: 4rem;\n        }\n      }\n\n      .value {\n        position: relative;\n        border-radius: 8px;\n        font-size: 2.5rem;\n        font-weight: 700;\n        color: #191919;\n        padding: 0.8rem;\n        min-width: 4rem;\n        overflow: hidden;\n        perspective: 400px;\n      }\n\n      @media (max-width: 1200px) {\n        .value {\n          font-size: 2rem;\n          padding: 0.6rem;\n          min-width: 3rem;\n        }\n      }\n\n      .digit-flip {\n        position: relative;\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        transform-style: preserve-3d;\n      }\n\n      .digit-flip.flipping {\n        animation: flip 0.6s ease-in-out;\n      }\n\n      .digit-flip.flipping .digit-top {\n        animation: flipTop 0.6s ease-in-out;\n      }\n\n      .digit-flip.flipping .digit-bottom {\n        animation: flipBottom 0.6s ease-in-out;\n      }\n\n      .digit-top,\n      .digit-bottom {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        font-size: inherit;\n        font-weight: inherit;\n        color: inherit;\n        line-height: 1;\n        font-family:  "AP", sans-serif;\n      }\n\n      .digit-top {\n        top: 0;\n        transform-origin: bottom;\n        border-radius: 4px 4px 0 0;\n        font-size: 20px;\n        font-style: normal;\n        font-weight: 724;\n        line-height: 120%;\n        text-transform: uppercase;\n      }\n\n      .digit-bottom {\n        bottom: 0;\n        transform-origin: top;\n        border-radius: 0 0 4px 4px;\n        transform: rotateX(90deg);\n        opacity: 0;\n      }\n\n      .digit-flip.flipping .digit-bottom {\n        animation: flipBottom 0.6s ease-in-out;\n        transform: rotateX(0deg);\n        opacity: 1;\n      }\n\n      .digit-bottom::before {\n        content: \'\';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: rgba(0, 0, 0, 0.1);\n      }\n\n      @keyframes flip {\n        0% {\n          transform: rotateX(0deg);\n        }\n        50% {\n          transform: rotateX(-90deg);\n        }\n        100% {\n          transform: rotateX(0deg);\n        }\n      }\n\n      @keyframes flipTop {\n        0% {\n          transform: rotateX(0deg);\n          opacity: 1;\n        }\n        50% {\n          transform: rotateX(-90deg);\n          opacity: 0;\n        }\n        100% {\n          transform: rotateX(-90deg);\n          opacity: 0;\n        }\n      }\n\n      @keyframes flipBottom {\n        0% {\n          transform: rotateX(90deg);\n          opacity: 0;\n        }\n        50% {\n          transform: rotateX(0deg);\n          opacity: 1;\n        }\n        100% {\n          transform: rotateX(0deg);\n          opacity: 1;\n        }\n      }\n\n      .label {\n        color: #000;\n        text-align: center;\n        font-family: "AP", sans-serif;\n        font-size: 12px;\n        font-style: normal;\n        font-weight: 700;\n        line-height: 120%;\n      }\n\n      .status {\n        margin-top: 1rem;\n        font-size: 1rem;\n        font-style: italic;\n        color: #666;\n        transition: color 0.3s ease;\n      }\n\n      .status.active {\n        color: #008000;\n      }\n\n      .status.expired {\n        color: #d00000;\n      }\n    ',this.shadowRoot.appendChild(e)}_createTimerDOM(){this.elements.container=document.createElement("div"),this.elements.container.className="root",this.config.title&&(this.elements.title=document.createElement("div"),this.elements.title.className="title",this.elements.title.textContent=this.config.title,this.elements.container.appendChild(this.elements.title)),this.elements.timerContainer=document.createElement("div"),this.elements.timerContainer.className="container",this.elements.container.appendChild(this.elements.timerContainer);const e=["Days","Hours","Minutes","Seconds"];["days","hours","minutes","seconds"].forEach(((t,i)=>{const n=document.createElement("div");n.className="unit";const s=document.createElement("div");s.className="value";const o=document.createElement("div");o.className="digit-flip";const a=document.createElement("div");a.className="digit-top",a.textContent="00";const r=document.createElement("div");r.className="digit-bottom",r.textContent="00",o.appendChild(a),o.appendChild(r),s.appendChild(o);const l=document.createElement("div");l.className="label",l.textContent=e[i],n.appendChild(s),n.appendChild(l),this.elements.timerContainer.appendChild(n),this.elements.units[t]={container:n,value:s,digitFlip:o,digitTop:a,digitBottom:r,label:l}})),this.elements.status=document.createElement("div"),this.elements.status.className="status",this.elements.container.appendChild(this.elements.status),this.shadowRoot.appendChild(this.elements.container)}_updateTimerDisplay(e){if(!e)return void console.warn("[FanPollCountdownTimer] No timeRemaining provided to _updateTimerDisplay");const{days:t,hours:i,minutes:n,seconds:s}=e,o={days:Lt.formatTimeUnit(t),hours:Lt.formatTimeUnit(i),minutes:Lt.formatTimeUnit(n),seconds:Lt.formatTimeUnit(s)},a=Object.values(this.state.currentValues).every((e=>"00"===e));Object.keys(o).forEach((e=>{const t=o[e],i=this.state.currentValues[e];if(t!==i){if(a){const i=this.elements.units[e];i&&i.digitTop&&(i.digitTop.textContent=t,i.digitBottom.textContent=t,console.log(`[FanPollCountdownTimer] Set initial ${e} to ${t}`))}else this._animateDigitChange(e,i,t);this.state.currentValues[e]=t}}))}_animateDigitChange(e,t,i){const n=this.elements.units[e];n&&n.value&&(n.digitTop.textContent=t,n.digitBottom.textContent=i,n.digitFlip.classList.add("flipping"),setTimeout((()=>{n.digitTop.textContent=i,n.digitFlip.classList.remove("flipping")}),600))}_handleCountdownComplete(){this.state.isCompleted=!0,this.elements.container.classList.add("timer-complete"),this.elements.status&&(this.elements.status.textContent="Timer completed!",this.elements.status.classList.add("expired")),this._refreshPageWithoutExposingToken()}async _refreshPageWithoutExposingToken(){if(this.state.isRefreshing||this.state.isUnloading)return;this.state.isRefreshing=!0;const e=`fanpollRefreshDone:${window.location.pathname}`;try{if("1"===sessionStorage.getItem(e))return void(this.state.isRefreshing=!1);sessionStorage.setItem(e,"1")}catch(e){}const t=this.config.cacheToken||this.getAttribute("cache-token");if(t){try{this.refreshAbortController=new AbortController;const{signal:e}=this.refreshAbortController,i=new URL(window.location.href);i.searchParams.set("since",t),console.log("[FanPollCountdownTimer] Making fetch request to:",i.toString());const n=await fetch(i.toString(),{credentials:"include",cache:"no-store",signal:e});if(console.log("[FanPollCountdownTimer] Fetch completed with status:",n.status),!this.state.isUnloading){try{window.history.replaceState(null,"",window.location.pathname+window.location.hash)}catch(e){}return void window.location.reload()}}catch(e){console.warn("[FanPollCountdownTimer] Fetch failed, falling back to reload:",e),this.state.isUnloading||window.location.reload()}this.state.isRefreshing=!1}else this.state.isUnloading||window.location.reload()}_parseTargetDate(e){if(e instanceof Date)return e.getTime();if("number"==typeof e)return e<1e12?1e3*e:e;if("string"==typeof e){const t=Number(e.trim());if(!Number.isNaN(t))return t<1e12?1e3*t:t;const i=Date.parse(e);return Number.isNaN(i)?Date.now():i}return Date.now()}_formatOpenAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAttribute("time-zone")||"America/New_York";const i=new Date(e);let n=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:t}).format(i);return n=n.replace(/[\u202F\u00A0 ]([AP]M)/i,"$1"),`${n}, ${new Intl.DateTimeFormat("en-US",{month:"numeric",timeZone:t}).format(i)}/${new Intl.DateTimeFormat("en-US",{day:"numeric",timeZone:t}).format(i)}/${new Intl.DateTimeFormat("en-US",{year:"2-digit",timeZone:t}).format(i)}`}_updateTitleWithOpenAt(e){if(!this.elements.title)return;const t=(this.config.title||this.elements.title.textContent||"").replace(/(\bOPENS\s+AT\b)[\s\S]*$/i,"$1").replace(/\s+/g," ").trim(),i=/\bOPENS\s+AT\b/i.test(t)?t:`${t} OPENS AT`;this.elements.title.textContent=`${i} ${this._formatOpenAt(e)}`}}function xt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function It(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(i),!0).forEach((function(t){Mt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Mt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Dt(){return Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Dt.apply(this,arguments)}function qt(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Ft=qt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Rt=qt(/Edge/i),Bt=qt(/firefox/i),$t=qt(/safari/i)&&!qt(/chrome/i)&&!qt(/android/i),Ot=qt(/iP(ad|od|hone)/i),Nt=qt(/chrome/i)&&qt(/android/i),Ht={capture:!1,passive:!1};function Ut(e,t,i){e.addEventListener(t,i,!Ft&&Ht)}function Wt(e,t,i){e.removeEventListener(t,i,!Ft&&Ht)}function zt(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function jt(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Vt(e,t,i,n){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&zt(e,t):zt(e,t))||n&&e===i)return e;if(e===i)break}while(e=jt(e))}return null}var Yt,Xt=/\s+/g;function Gt(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(Xt," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(Xt," ")}}function Zt(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function Kt(e,t){var i="";if("string"==typeof e)i=e;else do{var n=Zt(e,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function Jt(e,t,i){if(e){var n=e.getElementsByTagName(t),s=0,o=n.length;if(i)for(;s<o;s++)i(n[s],s);return n}return[]}function Qt(){return document.scrollingElement||document.documentElement}function ei(e,t,i,n,s){if(e.getBoundingClientRect||e===window){var o,a,r,l,c,d,h;if(e!==window&&e.parentNode&&e!==Qt()?(a=(o=e.getBoundingClientRect()).top,r=o.left,l=o.bottom,c=o.right,d=o.height,h=o.width):(a=0,r=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!Ft))do{if(s&&s.getBoundingClientRect&&("none"!==Zt(s,"transform")||i&&"static"!==Zt(s,"position"))){var u=s.getBoundingClientRect();a-=u.top+parseInt(Zt(s,"border-top-width")),r-=u.left+parseInt(Zt(s,"border-left-width")),l=a+o.height,c=r+o.width;break}}while(s=s.parentNode);if(n&&e!==window){var p=Kt(s||e),g=p&&p.a,m=p&&p.d;p&&(l=(a/=m)+(d/=m),c=(r/=g)+(h/=g))}return{top:a,left:r,bottom:l,right:c,width:h,height:d}}}function ti(e,t,i){for(var n=ai(e,!0),s=ei(e)[t];n;){var o=ei(n)[i];if(!("top"===i||"left"===i?s>=o:s<=o))return n;if(n===Qt())break;n=ai(n,!1)}return!1}function ii(e,t,i,n){for(var s=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==dn.ghost&&(n||a[o]!==dn.dragged)&&Vt(a[o],i.draggable,e,!1)){if(s===t)return a[o];s++}o++}return null}function ni(e,t){for(var i=e.lastElementChild;i&&(i===dn.ghost||"none"===Zt(i,"display")||t&&!zt(i,t));)i=i.previousElementSibling;return i||null}function si(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===dn.clone||t&&!zt(e,t)||i++;return i}function oi(e){var t=0,i=0,n=Qt();if(e)do{var s=Kt(e),o=s.a,a=s.d;t+=e.scrollLeft*o,i+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,i]}function ai(e,t){if(!e||!e.getBoundingClientRect)return Qt();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Zt(i);if(i.clientWidth<i.scrollWidth&&("auto"==s.overflowX||"scroll"==s.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==s.overflowY||"scroll"==s.overflowY)){if(!i.getBoundingClientRect||i===document.body)return Qt();if(n||t)return i;n=!0}}}while(i=i.parentNode);return Qt()}function ri(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function li(e,t){return function(){if(!Yt){var i=arguments;1===i.length?e.call(this,i[0]):e.apply(this,i),Yt=setTimeout((function(){Yt=void 0}),t)}}}function ci(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function di(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function hi(e,t,i){var n={};return Array.from(e.children).forEach((function(s){var o,a,r,l;if(Vt(s,t.draggable,e,!1)&&!s.animated&&s!==i){var c=ei(s);n.left=Math.min(null!==(o=n.left)&&void 0!==o?o:1/0,c.left),n.top=Math.min(null!==(a=n.top)&&void 0!==a?a:1/0,c.top),n.right=Math.max(null!==(r=n.right)&&void 0!==r?r:-1/0,c.right),n.bottom=Math.max(null!==(l=n.bottom)&&void 0!==l?l:-1/0,c.bottom)}})),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ui="Sortable"+(new Date).getTime();var pi=[],gi={initializeByDefault:!0},mi={mount:function(e){for(var t in gi)gi.hasOwnProperty(t)&&!(t in e)&&(e[t]=gi[t]);pi.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),pi.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=e+"Global";pi.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][s]&&t[n.pluginName][s](It({sortable:t},i)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](It({sortable:t},i)))}))},initializePlugins:function(e,t,i,n){for(var s in pi.forEach((function(n){var s=n.pluginName;if(e.options[s]||n.initializeByDefault){var o=new n(e,t,e.options);o.sortable=e,o.options=e.options,e[s]=o,Dt(i,o.defaults)}})),e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);void 0!==o&&(e.options[s]=o)}},getEventProperties:function(e,t){var i={};return pi.forEach((function(n){"function"==typeof n.eventProperties&&Dt(i,n.eventProperties.call(t[n.pluginName],e))})),i},modifyOption:function(e,t,i){var n;return pi.forEach((function(s){e[s.pluginName]&&s.optionListeners&&"function"==typeof s.optionListeners[t]&&(n=s.optionListeners[t].call(e[s.pluginName],i))})),n}};var fi=["evt"],vi=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=function(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}(i,fi);mi.pluginEvent.bind(dn)(e,t,It({dragEl:bi,parentEl:wi,ghostEl:Si,rootEl:Ei,nextEl:ki,lastDownEl:_i,cloneEl:Ci,cloneHidden:Ai,dragStarted:Oi,putSortable:Mi,activeSortable:dn.active,originalEvent:n,oldIndex:Li,oldDraggableIndex:xi,newIndex:Pi,newDraggableIndex:Ii,hideGhostForTarget:an,unhideGhostForTarget:rn,cloneNowHidden:function(){Ai=!0},cloneNowShown:function(){Ai=!1},dispatchSortableEvent:function(e){yi({sortable:t,name:e,originalEvent:n})}},s))};function yi(e){!function(e){var t=e.sortable,i=e.rootEl,n=e.name,s=e.targetEl,o=e.cloneEl,a=e.toEl,r=e.fromEl,l=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,h=e.newDraggableIndex,u=e.originalEvent,p=e.putSortable,g=e.extraEventProperties;if(t=t||i&&i[ui]){var m,f=t.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||Ft||Rt?(m=document.createEvent("Event")).initEvent(n,!0,!0):m=new CustomEvent(n,{bubbles:!0,cancelable:!0}),m.to=a||i,m.from=r||i,m.item=s||i,m.clone=o,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=h,m.originalEvent=u,m.pullMode=p?p.lastPutMode:void 0;var y=It(It({},g),mi.getEventProperties(n,t));for(var b in y)m[b]=y[b];i&&i.dispatchEvent(m),f[v]&&f[v].call(t,m)}}(It({putSortable:Mi,cloneEl:Ci,targetEl:bi,rootEl:Ei,oldIndex:Li,oldDraggableIndex:xi,newIndex:Pi,newDraggableIndex:Ii},e))}var bi,wi,Si,Ei,ki,_i,Ci,Ai,Li,Pi,xi,Ii,Ti,Mi,Di,qi,Fi,Ri,Bi,$i,Oi,Ni,Hi,Ui,Wi,zi=!1,ji=!1,Vi=[],Yi=!1,Xi=!1,Gi=[],Zi=!1,Ki=[],Ji="undefined"!=typeof document,Qi=Ot,en=Rt||Ft?"cssFloat":"float",tn=Ji&&!Nt&&!Ot&&"draggable"in document.createElement("div"),nn=function(){if(Ji){if(Ft)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),sn=function(e,t){var i=Zt(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=ii(e,0,t),o=ii(e,1,t),a=s&&Zt(s),r=o&&Zt(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ei(s).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ei(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!o||"both"!==r.clear&&r.clear!==d?"horizontal":"vertical"}return s&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===i[en]||o&&"none"===i[en]&&l+c>n)?"vertical":"horizontal"},on=function(e){function t(e,i){return function(n,s,o,a){var r=n.options.group.name&&s.options.group.name&&n.options.group.name===s.options.group.name;if(null==e&&(i||r))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(n,s,o,a),i)(n,s,o,a);var l=(i?n:s).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},n=e.group;n&&"object"==Tt(n)||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},an=function(){!nn&&Si&&Zt(Si,"display","none")},rn=function(){!nn&&Si&&Zt(Si,"display","")};Ji&&!Nt&&document.addEventListener("click",(function(e){if(ji)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ji=!1,!1}),!0);var ln=function(e){if(bi){e=e.touches?e.touches[0]:e;var t=(s=e.clientX,o=e.clientY,Vi.some((function(e){var t=e[ui].options.emptyInsertThreshold;if(t&&!ni(e)){var i=ei(e),n=s>=i.left-t&&s<=i.right+t,r=o>=i.top-t&&o<=i.bottom+t;return n&&r?a=e:void 0}})),a);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[ui]._onDragOver(i)}}var s,o,a},cn=function(e){bi&&bi.parentNode[ui]._isOutsideThisEl(e.target)};function dn(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Dt({},t),e[ui]=this;var i,n,s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return sn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==dn.supportPointer&&"PointerEvent"in window&&(!$t||Ot),emptyInsertThreshold:5};for(var o in mi.initializePlugins(this,e,s),s)!(o in t)&&(t[o]=s[o]);for(var a in on(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&tn,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ut(e,"pointerdown",this._onTapStart):(Ut(e,"mousedown",this._onTapStart),Ut(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ut(e,"dragover",this),Ut(e,"dragenter",this)),Vi.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Dt(this,(n=[],{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Zt(e,"display")&&e!==dn.ghost){n.push({target:e,rect:ei(e)});var t=It({},n[n.length-1].rect);if(e.thisAnimationDuration){var i=Kt(e,!0);i&&(t.top-=i.f,t.left-=i.e)}e.fromRect=t}}))},addAnimationState:function(e){n.push(e)},removeAnimationState:function(e){n.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i);return-1}(n,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(i),void("function"==typeof e&&e());var s=!1,o=0;n.forEach((function(e){var i=0,n=e.target,a=n.fromRect,r=ei(n),l=n.prevFromRect,c=n.prevToRect,d=e.rect,h=Kt(n,!0);h&&(r.top-=h.f,r.left-=h.e),n.toRect=r,n.thisAnimationDuration&&ri(l,r)&&!ri(a,r)&&(d.top-r.top)/(d.left-r.left)==(a.top-r.top)/(a.left-r.left)&&(i=function(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}(d,l,c,t.options)),ri(r,a)||(n.prevFromRect=a,n.prevToRect=r,i||(i=t.options.animation),t.animate(n,d,r,i)),i&&(s=!0,o=Math.max(o,i),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),i),n.thisAnimationDuration=i)})),clearTimeout(i),s?i=setTimeout((function(){"function"==typeof e&&e()}),o):"function"==typeof e&&e(),n=[]},animate:function(e,t,i,n){if(n){Zt(e,"transition",""),Zt(e,"transform","");var s=Kt(this.el),o=s&&s.a,a=s&&s.d,r=(t.left-i.left)/(o||1),l=(t.top-i.top)/(a||1);e.animatingX=!!r,e.animatingY=!!l,Zt(e,"transform","translate3d("+r+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Zt(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Zt(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Zt(e,"transition",""),Zt(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}))}function hn(e,t,i,n,s,o,a,r){var l,c,d=e[ui],h=d.options.onMove;return!window.CustomEvent||Ft||Rt?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=s||t,l.relatedRect=o||ei(t),l.willInsertAfter=r,l.originalEvent=a,e.dispatchEvent(l),h&&(c=h.call(d,l,a)),c}function un(e){e.draggable=!1}function pn(){Zi=!1}function gn(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function mn(e){return setTimeout(e,0)}function fn(e){return clearTimeout(e)}dn.prototype={constructor:dn,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ni=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,bi):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,s=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,r=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,c=n.filter;if(function(e){Ki.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&Ki.push(n)}}(i),!bi&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!$t||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=Vt(r,n.draggable,i,!1))&&r.animated||_i===r)){if(Li=si(r),xi=si(r,n.draggable),"function"==typeof c){if(c.call(this,e,r,this))return yi({sortable:t,rootEl:l,name:"filter",targetEl:r,toEl:i,fromEl:i}),vi("filter",t,{evt:e}),void(s&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=Vt(l,n.trim(),i,!1))return yi({sortable:t,rootEl:n,name:"filter",targetEl:r,fromEl:i,toEl:i}),vi("filter",t,{evt:e}),!0}))))return void(s&&e.preventDefault());n.handle&&!Vt(l,n.handle,i,!1)||this._prepareDragStart(e,a,r)}}},_prepareDragStart:function(e,t,i){var n,s=this,o=s.el,a=s.options,r=o.ownerDocument;if(i&&!bi&&i.parentNode===o){var l=ei(i);if(Ei=o,wi=(bi=i).parentNode,ki=bi.nextSibling,_i=i,Ti=a.group,dn.dragged=bi,Di={target:bi,clientX:(t||e).clientX,clientY:(t||e).clientY},Bi=Di.clientX-l.left,$i=Di.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,bi.style["will-change"]="all",n=function(){vi("delayEnded",s,{evt:e}),dn.eventCanceled?s._onDrop():(s._disableDelayedDragEvents(),!Bt&&s.nativeDraggable&&(bi.draggable=!0),s._triggerDragStart(e,t),yi({sortable:s,name:"choose",originalEvent:e}),Gt(bi,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){Jt(bi,e.trim(),un)})),Ut(r,"dragover",ln),Ut(r,"mousemove",ln),Ut(r,"touchmove",ln),a.supportPointer?(Ut(r,"pointerup",s._onDrop),!this.nativeDraggable&&Ut(r,"pointercancel",s._onDrop)):(Ut(r,"mouseup",s._onDrop),Ut(r,"touchend",s._onDrop),Ut(r,"touchcancel",s._onDrop)),Bt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bi.draggable=!0),vi("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(Rt||Ft))n();else{if(dn.eventCanceled)return void this._onDrop();a.supportPointer?(Ut(r,"pointerup",s._disableDelayedDrag),Ut(r,"pointercancel",s._disableDelayedDrag)):(Ut(r,"mouseup",s._disableDelayedDrag),Ut(r,"touchend",s._disableDelayedDrag),Ut(r,"touchcancel",s._disableDelayedDrag)),Ut(r,"mousemove",s._delayedDragTouchMoveHandler),Ut(r,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Ut(r,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bi&&un(bi),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Wt(e,"mouseup",this._disableDelayedDrag),Wt(e,"touchend",this._disableDelayedDrag),Wt(e,"touchcancel",this._disableDelayedDrag),Wt(e,"pointerup",this._disableDelayedDrag),Wt(e,"pointercancel",this._disableDelayedDrag),Wt(e,"mousemove",this._delayedDragTouchMoveHandler),Wt(e,"touchmove",this._delayedDragTouchMoveHandler),Wt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Ut(document,"pointermove",this._onTouchMove):Ut(document,t?"touchmove":"mousemove",this._onTouchMove):(Ut(bi,"dragend",this),Ut(Ei,"dragstart",this._onDragStart));try{document.selection?mn((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(zi=!1,Ei&&bi){vi("dragStarted",this,{evt:t}),this.nativeDraggable&&Ut(document,"dragover",cn);var i=this.options;!e&&Gt(bi,i.dragClass,!1),Gt(bi,i.ghostClass,!0),dn.active=this,e&&this._appendGhost(),yi({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(qi){this._lastX=qi.clientX,this._lastY=qi.clientY,an();for(var e=document.elementFromPoint(qi.clientX,qi.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(qi.clientX,qi.clientY))!==t;)t=e;if(bi.parentNode[ui]._isOutsideThisEl(e),t)do{if(t[ui]&&t[ui]._onDragOver({clientX:qi.clientX,clientY:qi.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=jt(t));rn()}},_onTouchMove:function(e){if(Di){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Si&&Kt(Si,!0),a=Si&&o&&o.a,r=Si&&o&&o.d,l=Qi&&Wi&&oi(Wi),c=(s.clientX-Di.clientX+n.x)/(a||1)+(l?l[0]-Gi[0]:0)/(a||1),d=(s.clientY-Di.clientY+n.y)/(r||1)+(l?l[1]-Gi[1]:0)/(r||1);if(!dn.active&&!zi){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(Si){o?(o.e+=c-(Fi||0),o.f+=d-(Ri||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Zt(Si,"webkitTransform",h),Zt(Si,"mozTransform",h),Zt(Si,"msTransform",h),Zt(Si,"transform",h),Fi=c,Ri=d,qi=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Si){var e=this.options.fallbackOnBody?document.body:Ei,t=ei(bi,!0,Qi,!0,e),i=this.options;if(Qi){for(Wi=e;"static"===Zt(Wi,"position")&&"none"===Zt(Wi,"transform")&&Wi!==document;)Wi=Wi.parentNode;Wi!==document.body&&Wi!==document.documentElement?(Wi===document&&(Wi=Qt()),t.top+=Wi.scrollTop,t.left+=Wi.scrollLeft):Wi=Qt(),Gi=oi(Wi)}Gt(Si=bi.cloneNode(!0),i.ghostClass,!1),Gt(Si,i.fallbackClass,!0),Gt(Si,i.dragClass,!0),Zt(Si,"transition",""),Zt(Si,"transform",""),Zt(Si,"box-sizing","border-box"),Zt(Si,"margin",0),Zt(Si,"top",t.top),Zt(Si,"left",t.left),Zt(Si,"width",t.width),Zt(Si,"height",t.height),Zt(Si,"opacity","0.8"),Zt(Si,"position",Qi?"absolute":"fixed"),Zt(Si,"zIndex","100000"),Zt(Si,"pointerEvents","none"),dn.ghost=Si,e.appendChild(Si),Zt(Si,"transform-origin",Bi/parseInt(Si.style.width)*100+"% "+$i/parseInt(Si.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,s=i.options;vi("dragStart",this,{evt:e}),dn.eventCanceled?this._onDrop():(vi("setupClone",this),dn.eventCanceled||((Ci=di(bi)).removeAttribute("id"),Ci.draggable=!1,Ci.style["will-change"]="",this._hideClone(),Gt(Ci,this.options.chosenClass,!1),dn.clone=Ci),i.cloneId=mn((function(){vi("clone",i),dn.eventCanceled||(i.options.removeCloneOnHide||Ei.insertBefore(Ci,bi),i._hideClone(),yi({sortable:i,name:"clone"}))})),!t&&Gt(bi,s.dragClass,!0),t?(ji=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Wt(document,"mouseup",i._onDrop),Wt(document,"touchend",i._onDrop),Wt(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,bi)),Ut(document,"drop",i),Zt(bi,"transform","translateZ(0)")),zi=!0,i._dragStartId=mn(i._dragStarted.bind(i,t,e)),Ut(document,"selectstart",i),Oi=!0,window.getSelection().removeAllRanges(),$t&&Zt(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,n,s,o=this.el,a=e.target,r=this.options,l=r.group,c=dn.active,d=Ti===l,h=r.sort,u=Mi||c,p=this,g=!1;if(!Zi){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Vt(a,r.draggable,o,!0),x("dragOver"),dn.eventCanceled)return g;if(bi.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return T(!1);if(ji=!1,c&&!r.disabled&&(d?h||(n=wi!==Ei):Mi===this||(this.lastPutMode=Ti.checkPull(this,c,bi,e))&&l.checkPut(this,c,bi,e))){if(s="vertical"===this._getDirection(e,a),t=ei(bi),x("dragOverValid"),dn.eventCanceled)return g;if(n)return wi=Ei,I(),this._hideClone(),x("revert"),dn.eventCanceled||(ki?Ei.insertBefore(bi,ki):Ei.appendChild(bi)),T(!0);var m=ni(o,r.draggable);if(!m||function(e,t,i){var n=ei(ni(i.el,i.options.draggable)),s=hi(i.el,i.options,Si);return t?e.clientX>s.right+10||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>s.bottom+10||e.clientX>n.right&&e.clientY>n.top}(e,s,this)&&!m.animated){if(m===bi)return T(!1);if(m&&o===e.target&&(a=m),a&&(i=ei(a)),!1!==hn(Ei,o,bi,t,a,i,e,!!a))return I(),m&&m.nextSibling?o.insertBefore(bi,m.nextSibling):o.appendChild(bi),wi=o,M(),T(!0)}else if(m&&function(e,t,i){var n=ei(ii(i.el,0,i.options,!0)),s=hi(i.el,i.options,Si);return t?e.clientX<s.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<s.top-10||e.clientY<n.bottom&&e.clientX<n.left}(e,s,this)){var f=ii(o,0,r,!0);if(f===bi)return T(!1);if(i=ei(a=f),!1!==hn(Ei,o,bi,t,a,i,e,!1))return I(),o.insertBefore(bi,f),wi=o,M(),T(!0)}else if(a.parentNode===o){i=ei(a);var v,y,b,w=bi.parentNode!==o,S=!function(e,t,i){var n=i?e.left:e.top,s=i?e.right:e.bottom,o=i?e.width:e.height,a=i?t.left:t.top,r=i?t.right:t.bottom,l=i?t.width:t.height;return n===a||s===r||n+o/2===a+l/2}(bi.animated&&bi.toRect||t,a.animated&&a.toRect||i,s),E=s?"top":"left",k=ti(a,"top","top")||ti(bi,"top","top"),_=k?k.scrollTop:void 0;if(Ni!==a&&(y=i[E],Yi=!1,Xi=!S&&r.invertSwap||w),v=function(e,t,i,n,s,o,a,r){var l=n?e.clientY:e.clientX,c=n?i.height:i.width,d=n?i.top:i.left,h=n?i.bottom:i.right,u=!1;if(!a)if(r&&Ui<c*s){if(!Yi&&(1===Hi?l>d+c*o/2:l<h-c*o/2)&&(Yi=!0),Yi)u=!0;else if(1===Hi?l<d+Ui:l>h-Ui)return-Hi}else if(l>d+c*(1-s)/2&&l<h-c*(1-s)/2)return function(e){return si(bi)<si(e)?1:-1}(t);return(u=u||a)&&(l<d+c*o/2||l>h-c*o/2)?l>d+c/2?1:-1:0}(e,a,i,s,S?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,Xi,Ni===a),0!==v){var C=si(bi);do{C-=v,b=wi.children[C]}while(b&&("none"===Zt(b,"display")||b===Si))}if(0===v||b===a)return T(!1);Ni=a,Hi=v;var A=a.nextElementSibling,L=!1,P=hn(Ei,o,bi,t,a,i,e,L=1===v);if(!1!==P)return 1!==P&&-1!==P||(L=1===P),Zi=!0,setTimeout(pn,30),I(),L&&!A?o.appendChild(bi):a.parentNode.insertBefore(bi,L?A:a),k&&ci(k,0,_-k.scrollTop),wi=bi.parentNode,void 0===y||Xi||(Ui=Math.abs(y-ei(a)[E])),M(),T(!0)}if(o.contains(bi))return T(!1)}return!1}function x(r,l){vi(r,p,It({evt:e,isOwner:d,axis:s?"vertical":"horizontal",revert:n,dragRect:t,targetRect:i,canSort:h,fromSortable:u,target:a,completed:T,onMove:function(i,n){return hn(Ei,o,bi,t,i,ei(i),e,n)},changed:M},l))}function I(){x("dragOverAnimationCapture"),p.captureAnimationState(),p!==u&&u.captureAnimationState()}function T(t){return x("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(p),p!==u&&(Gt(bi,Mi?Mi.options.ghostClass:c.options.ghostClass,!1),Gt(bi,r.ghostClass,!0)),Mi!==p&&p!==dn.active?Mi=p:p===dn.active&&Mi&&(Mi=null),u===p&&(p._ignoreWhileAnimating=a),p.animateAll((function(){x("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(a===bi&&!bi.animated||a===o&&!a.animated)&&(Ni=null),r.dragoverBubble||e.rootEl||a===document||(bi.parentNode[ui]._isOutsideThisEl(e.target),!t&&ln(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function M(){Pi=si(bi),Ii=si(bi,r.draggable),yi({sortable:p,name:"change",toEl:o,newIndex:Pi,newDraggableIndex:Ii,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Wt(document,"mousemove",this._onTouchMove),Wt(document,"touchmove",this._onTouchMove),Wt(document,"pointermove",this._onTouchMove),Wt(document,"dragover",ln),Wt(document,"mousemove",ln),Wt(document,"touchmove",ln)},_offUpEvents:function(){var e=this.el.ownerDocument;Wt(e,"mouseup",this._onDrop),Wt(e,"touchend",this._onDrop),Wt(e,"pointerup",this._onDrop),Wt(e,"pointercancel",this._onDrop),Wt(e,"touchcancel",this._onDrop),Wt(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;Pi=si(bi),Ii=si(bi,i.draggable),vi("drop",this,{evt:e}),wi=bi&&bi.parentNode,Pi=si(bi),Ii=si(bi,i.draggable),dn.eventCanceled||(zi=!1,Xi=!1,Yi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),fn(this.cloneId),fn(this._dragStartId),this.nativeDraggable&&(Wt(document,"drop",this),Wt(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$t&&Zt(document.body,"user-select",""),Zt(bi,"transform",""),e&&(Oi&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),Si&&Si.parentNode&&Si.parentNode.removeChild(Si),(Ei===wi||Mi&&"clone"!==Mi.lastPutMode)&&Ci&&Ci.parentNode&&Ci.parentNode.removeChild(Ci),bi&&(this.nativeDraggable&&Wt(bi,"dragend",this),un(bi),bi.style["will-change"]="",Oi&&!zi&&Gt(bi,Mi?Mi.options.ghostClass:this.options.ghostClass,!1),Gt(bi,this.options.chosenClass,!1),yi({sortable:this,name:"unchoose",toEl:wi,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ei!==wi?(Pi>=0&&(yi({rootEl:wi,name:"add",toEl:wi,fromEl:Ei,originalEvent:e}),yi({sortable:this,name:"remove",toEl:wi,originalEvent:e}),yi({rootEl:wi,name:"sort",toEl:wi,fromEl:Ei,originalEvent:e}),yi({sortable:this,name:"sort",toEl:wi,originalEvent:e})),Mi&&Mi.save()):Pi!==Li&&Pi>=0&&(yi({sortable:this,name:"update",toEl:wi,originalEvent:e}),yi({sortable:this,name:"sort",toEl:wi,originalEvent:e})),dn.active&&(null!=Pi&&-1!==Pi||(Pi=Li,Ii=xi),yi({sortable:this,name:"end",toEl:wi,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){vi("nulling",this),Ei=bi=wi=Si=ki=Ci=_i=Ai=Di=qi=Oi=Pi=Ii=Li=xi=Ni=Hi=Mi=Ti=dn.dragged=dn.ghost=dn.clone=dn.active=null,Ki.forEach((function(e){e.checked=!0})),Ki.length=Fi=Ri=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":bi&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,s=i.length,o=this.options;n<s;n++)Vt(e=i[n],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||gn(e));return t},sort:function(e,t){var i={},n=this.el;this.toArray().forEach((function(e,t){var s=n.children[t];Vt(s,this.options.draggable,n,!1)&&(i[e]=s)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(n.removeChild(i[e]),n.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Vt(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var n=mi.modifyOption(this,e,t);i[e]=void 0!==n?n:t,"group"===e&&on(i)},destroy:function(){vi("destroy",this);var e=this.el;e[ui]=null,Wt(e,"mousedown",this._onTapStart),Wt(e,"touchstart",this._onTapStart),Wt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Wt(e,"dragover",this),Wt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Vi.splice(Vi.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ai){if(vi("hideClone",this),dn.eventCanceled)return;Zt(Ci,"display","none"),this.options.removeCloneOnHide&&Ci.parentNode&&Ci.parentNode.removeChild(Ci),Ai=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ai){if(vi("showClone",this),dn.eventCanceled)return;bi.parentNode!=Ei||this.options.group.revertClone?ki?Ei.insertBefore(Ci,ki):Ei.appendChild(Ci):Ei.insertBefore(Ci,bi),this.options.group.revertClone&&this.animate(bi,Ci),Zt(Ci,"display",""),Ai=!1}}else this._hideClone()}},Ji&&Ut(document,"touchmove",(function(e){(dn.active||zi)&&e.cancelable&&e.preventDefault()})),dn.utils={on:Ut,off:Wt,css:Zt,find:Jt,is:function(e,t){return!!Vt(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:li,closest:Vt,toggleClass:Gt,clone:di,index:si,nextTick:mn,cancelNextTick:fn,detectDirection:sn,getChild:ii,expando:ui},dn.get=function(e){return e[ui]},dn.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(dn.utils=It(It({},dn.utils),e.utils)),mi.mount(e)}))},dn.create=function(e,t){return new dn(e,t)},dn.version="1.15.6";var vn,yn,bn,wn,Sn,En,kn=[],_n=!1;function Cn(){kn.forEach((function(e){clearInterval(e.pid)})),kn=[]}function An(){clearInterval(En)}var Ln=li((function(e,t,i,n){if(t.scroll){var s,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,l=t.scrollSpeed,c=Qt(),d=!1;yn!==i&&(yn=i,Cn(),vn=t.scroll,s=t.scrollFn,!0===vn&&(vn=ai(i,!0)));var h=0,u=vn;do{var p=u,g=ei(p),m=g.top,f=g.bottom,v=g.left,y=g.right,b=g.width,w=g.height,S=void 0,E=void 0,k=p.scrollWidth,_=p.scrollHeight,C=Zt(p),A=p.scrollLeft,L=p.scrollTop;p===c?(S=b<k&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),E=w<_&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(S=b<k&&("auto"===C.overflowX||"scroll"===C.overflowX),E=w<_&&("auto"===C.overflowY||"scroll"===C.overflowY));var P=S&&(Math.abs(y-o)<=r&&A+b<k)-(Math.abs(v-o)<=r&&!!A),x=E&&(Math.abs(f-a)<=r&&L+w<_)-(Math.abs(m-a)<=r&&!!L);if(!kn[h])for(var I=0;I<=h;I++)kn[I]||(kn[I]={});kn[h].vx==P&&kn[h].vy==x&&kn[h].el===p||(kn[h].el=p,kn[h].vx=P,kn[h].vy=x,clearInterval(kn[h].pid),0==P&&0==x||(d=!0,kn[h].pid=setInterval(function(){n&&0===this.layer&&dn.active._onTouchMove(Sn);var t=kn[this.layer].vy?kn[this.layer].vy*l:0,i=kn[this.layer].vx?kn[this.layer].vx*l:0;"function"==typeof s&&"continue"!==s.call(dn.dragged.parentNode[ui],i,t,e,Sn,kn[this.layer].el)||ci(kn[this.layer].el,i,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&u!==c&&(u=ai(u,!1)));_n=d}}),30),Pn=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(t){var l=i||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);r(),l&&!l.el.contains(d)&&(o("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function xn(){}function In(){}xn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=ii(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:Pn},Dt(xn,{pluginName:"revertOnSpill"}),In.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Pn},Dt(In,{pluginName:"removeOnSpill"}),dn.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Ut(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ut(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Ut(document,"touchmove",this._handleFallbackAutoScroll):Ut(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Wt(document,"dragover",this._handleAutoScroll):(Wt(document,"pointermove",this._handleFallbackAutoScroll),Wt(document,"touchmove",this._handleFallbackAutoScroll),Wt(document,"mousemove",this._handleFallbackAutoScroll)),An(),Cn(),clearTimeout(Yt),Yt=void 0},nulling:function(){Sn=yn=vn=_n=En=bn=wn=null,kn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,n=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(n,s);if(Sn=e,t||this.options.forceAutoScrollFallback||Rt||Ft||$t){Ln(e,this.options,o,t);var a=ai(o,!0);!_n||En&&n===bn&&s===wn||(En&&An(),En=setInterval((function(){var o=ai(document.elementFromPoint(n,s),!0);o!==a&&(a=o,Cn()),Ln(e,i.options,o,t)}),10),bn=n,wn=s)}else{if(!this.options.bubbleScroll||ai(o,!0)===Qt())return void Cn();Ln(e,this.options,ai(o,!1),!1)}}},Dt(e,{pluginName:"scroll",initializeByDefault:!0})}),dn.mount(In,xn);var Tn=dn;class Mn extends HTMLElement{getCurrentTimeInET(){const e=new Date;return new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})).getTime()}connectedCallback(){this.hasExistingRankings=!1,this.initialRankings=[],this._pendingMigrationData=null,this._lastSessionId=null,this._wasLoggedInBefore=!1,this.isLoading=!1,this._initialSessionId=null,this.style.cssText="position: relative;display: block;width: 100%;min-height: 100px;",this.week=this.getAttribute("data-week"),this.userAggregatorAPIBaseURL=this.getAttribute("data-user-aggregator-api-base-url"),this.originalTimestamp=this.getAttribute("data-original-timestamp"),this.isLoggedIn=window.Zephr?.accessDetails?.authenticated,this._wasLoggedInBefore=this.isLoggedIn,this.hasUsername=!1,this.isAuthenticated=!1,this._initialSessionId=Ct.getSessionId(),console.log(`[FanPoll] Initial session capture: ${this._initialSessionId}`),this._dumpLocalStorage(),this._removePrevAnonSession(),this.toggleHeaderWeekVisibility(),this.hasExistingRankings=!1,this.initialRankings=null,this.hasUserMadeChanges=!1,this.loader=At.createLoader({className:"FanPollModule-loader",text:"Loading",position:"absolute",overlay:!0,zIndex:"999999",spinnerSize:"40px",spinnerColor:"#FF1818"}),this.appendChild(this.loader),this.setLoading(!0),this.submitButton=this.querySelector(".FanPollModule-submitBtn"),this.revertButton=this.querySelector(".FanPollModule-revertBtn"),this.submitButtonMobile=this.querySelector(".btn-submit"),this.revertButtonMobile=this.querySelector(".btn-revert"),this.ballotTable=this.querySelector(".FanPollModule-table"),this.fanPollId=this.getAttribute("data-fan-poll-id"),this.pollSizeMinimum=parseInt(this.getAttribute("data-poll-size-minimum")||"10"),this.toggleCountdownVisibility(),this.userRankingDiv=document.querySelector(".FanPollModule-userRanking"),this.userRankingDiv&&(this.userRankingDiv.style.display="none"),this.closeAtWeek=this.getAttribute("data-closeAt"),this.initCountdownTimer(),this._setupWeekOpenRefresh(),this.teams=[];try{this.teams=JSON.parse(this.getAttribute("data-teams")||"[]")}catch(e){this.teams=[]}this.teamMap={},this.teams.forEach((e=>{this.teamMap[e.teamID]=e})),this.overlay=document.createElement("div"),this.renderOverlay(),this.popup=document.createElement("div"),this.renderPopup();const e=document.createElement("style");e.textContent="@keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}",document.head.appendChild(e),this.querySelectorAll(".CustomSelect-input").forEach((e=>{e.addEventListener("change",(()=>{console.log("Dropdown value changed"),this.changeTimeout&&clearTimeout(this.changeTimeout),this.changeTimeout=setTimeout((()=>{this.checkForChanges(),this.checkMinimumSelections()}),10)}))})),this.week=this.getAttribute("data-week"),this.revertButton.addEventListener("click",this.revertChanges.bind(this)),this.revertButtonMobile.addEventListener("click",this.revertChanges.bind(this)),this.sessionId=Ct.getSessionId(),console.log(`[FanPoll] Initial session ID: ${this.sessionId}`),this._lastSessionId=this.sessionId,this.localStorageKey=this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:`fanpoll_${this.fanPollId}_${this.week}`,console.log(`[FanPoll] Initial localStorage key: ${this.localStorageKey}`),this.checkLogin(),document.addEventListener("click",(()=>{this.closeAllDropdowns()})),document.addEventListener("touchend",(e=>{e.target.closest(".CustomSelect")||this.closeAllDropdowns()}));const t=()=>Array.from(this.ballotTable.querySelectorAll(":scope > .FanPollModule-row")),i=e=>{const t=e.querySelector(".CustomSelect-input");return!(!t||!t.value||""===t.value.trim())},n=()=>{const e=t();if(!e.length)return-1;const n=Number.isFinite(this.pollSizeMinimum)?this.pollSizeMinimum:10,s=(()=>{const e=t();let n=0;for(let t=0;t<e.length&&i(e[t]);t++)n++;return n})();if(s<n)return Math.min(n-1,e.length-1);const o=n+Math.max(0,s-(n+2)+1);return Math.min(o,e.length-1)},s=()=>{const e=t(),s=n();return e.forEach(((e,t)=>{let n=!1;n=t<=this.pollSizeMinimum-1||t<=s&&i(e),e.classList.toggle("is-disabled",!n),e.setAttribute("aria-disabled",String(!n));const o=e.querySelector(".FanPollModule-drag");o&&(o.style.pointerEvents=n?"":"none")})),s},o="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;Tn.create(this.ballotTable,{animation:150,handle:".FanPollModule-drag",draggable:".FanPollModule-row",easing:"cubic-bezier(1, 0, 0, 1)",forceFallback:!0,fallbackOnBody:!0,filter:".is-disabled",preventOnFilter:!o,delayOnTouchOnly:!1,delay:0,touchStartThreshold:2,fallbackTolerance:3,onStart:()=>{s()},onMove:e=>{const i=t(),s=i.indexOf(e.dragged);if(-1===s)return!0;const o=n(),a=i.indexOf(e.related);if(-1===a)return!0;let r=a+(e.willInsertAfter?1:0);return s<r&&(r-=1),r<=o},onEnd:()=>{this.updateRanks(),s()}}),this.ballotTable.addEventListener("change",(e=>{e.target.matches('input[type="checkbox"], .FanPollModule-select, .CustomSelect-input')&&s()})),this.initCustomDropdowns(),this.sessionId=Ct.getSessionId(),this.localStorageKey=this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:`fanpoll_${this.fanPollId}_${this.week}`,this.checkForAnonymousSessionData()}_setupWeekOpenRefresh(){try{if(!this.querySelector(".fanpoll-count-down-timer"))return;const e=this.getAttribute("data-weekOpensAt"),t=Number(e);if(!t||Number.isNaN(t))return;const i=t-this.getCurrentTimeInET(),n=()=>{this.querySelector(".fanpoll-count-down-timer")&&this._refreshPageWithoutExposingTokenLikeTimer()};i<=0?n():setTimeout(n,i)}catch(e){console.error("[FanPoll] Error in _setupWeekOpenRefresh:",e)}}async _refreshPageWithoutExposingTokenLikeTimer(){try{if(this._isRefreshing||this._isUnloading)return;this._isRefreshing=!0;const e=`fanpollRefreshDone:${window.location.pathname}`;try{if("1"===sessionStorage.getItem(e))return void(this._isRefreshing=!1);sessionStorage.setItem(e,"1")}catch(e){}const t=this.querySelector(".fanpoll-count-down-timer"),i=t?.getAttribute("cache-token")||"";if(!i)return void(this._isUnloading||window.location.reload());this._refreshAbortController=new AbortController;const{signal:n}=this._refreshAbortController,s=new URL(window.location.href);s.searchParams.set("since",i);try{await fetch(s.toString(),{credentials:"include",cache:"no-store",signal:n})}catch(e){console.warn("[FanPoll] Week-open fetch failed, falling back to reload:",e)}if(!this._isUnloading){try{window.history.replaceState(null,"",window.location.pathname+window.location.hash)}catch(e){}window.location.reload()}}catch(e){console.warn("[FanPoll] Week-open refresh failed, reloading:",e),this._isUnloading||window.location.reload()}finally{this._isRefreshing=!1}}setLoading(e){this.isLoading=e,this.updateSubmitButton(),e?At.showLoader(this.loader):At.hideLoader(this.loader)}_dumpLocalStorage(){console.log("[FanPoll] DEBUG: All localStorage entries:");const e=[],t=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);t.push(i),console.log(`- ${i}`)}console.log(`[FanPoll] Total localStorage entries: ${t.length}`),console.log("[FanPoll] === FanPoll-related keys ===");for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);if(i&&i.startsWith("fanpoll_")){const t=localStorage.getItem(i);let n="null";t&&(n=t.substring(0,30)+"..."),e.push(i),console.log(`- ${i}: ${n}`)}}return console.log(`[FanPoll] Found ${e.length} fanpoll entries`),console.log(`[FanPoll] Current poll ID: ${this.fanPollId}, week: ${this.week}`),e}checkLogin(){Pe.enqueue(((e,t)=>{const i=this._wasLoggedInBefore,n=this._lastSessionId||this._initialSessionId;t&&this.showPopup('Something went wrong. Please refresh the page and submit again. If this problem pesists please contact <a href="https://apmobile.atlassian.net/servicedesk/customer/portal/4/group/73/create/220" target="_blank">AP News support</a>.',!0,(e=>{e.preventDefault(),window.location.reload()}),"Refresh"),this.isLoggedIn=e?.accessDetails?.authenticated,this.hasUsername=e?.accessDetails?.authenticated&&!window.Zephr?.openModal,this.isAuthenticated=this.isLoggedIn&&this.hasUsername,this.isLoggedIn||this._clearPreviousAnonSessionsOnLogout();const s=Ct.getSessionId();this._lastSessionId=s,console.log("[FanPoll] Login check:",{wasLoggedIn:i,isLoggedIn:this.isLoggedIn,initialSessionId:this._initialSessionId,oldSessionId:n,newSessionId:s,hasUsername:this.hasUsername,isAuthenticated:this.isAuthenticated,fanPollId:this.fanPollId,week:this.week}),this._dumpLocalStorage(),this._removePrevAnonSession();const o=i!==this.isLoggedIn,a=n!==s;if(!i&&this.isLoggedIn&&a){console.log("[FanPoll] Login with session change detected - high priority migration");const e=`fanpoll_${this.fanPollId}_${this.week}_${n}`,t=`fanpoll_${this.fanPollId}_${this.week}`;this.sessionId=s,this.localStorageKey=this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:`fanpoll_${this.fanPollId}_${this.week}`,console.log(`[FanPoll] Updated localStorage key to: ${this.localStorageKey}`);let i=!1;if(i||(console.log(`[FanPoll] Trying to migrate from: ${e}`),i=this._migrateDataBetweenKeys(e,this.localStorageKey)),i||(console.log(`[FanPoll] Trying to migrate from: ${t}`),i=this._migrateDataBetweenKeys(t,this.localStorageKey)),!i){console.log("[FanPoll] Scanning for any matching poll data");for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.includes(this.fanPollId)&&t.includes(this.week)&&t!==this.localStorageKey&&(console.log(`[FanPoll] Found potential source key: ${t}`),i=this._migrateDataBetweenKeys(t,this.localStorageKey),i))break}}i?console.log("[FanPoll] Migration was successful - ready for restore"):(console.log("[FanPoll] All migration attempts failed"),this._forceDataMigration())}else o&&this.isLoggedIn?(console.log("[FanPoll] User just logged in - initiating data migration"),this.sessionId=s,this.localStorageKey=this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:`fanpoll_${this.fanPollId}_${this.week}`,console.log(`[FanPoll] Updated localStorage key to: ${this.localStorageKey}`),this._forceDataMigration()):o||a?(console.log("[FanPoll] Login/session state changed - handling transition"),this.updateLocalStorageKey(),this.checkForAnonymousSessionData()):(this.sessionId=s,this.localStorageKey=this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:`fanpoll_${this.fanPollId}_${this.week}`);this._wasLoggedInBefore=this.isLoggedIn,this.isLoggedIn||this.setLoading(!1),this.toggleHeaderWeekVisibility(),this.toggleCountdownVisibility(),this.initAfterLogin()}),{preferRealZephr:!1})}_forceDataMigration(){console.log("[FanPoll] Forcing data migration after login");const e=this._initialSessionId,t=Ct.getSessionId();console.log("[FanPoll] Session transition during login:",{initialSessionId:e,currentSessionId:t,isLoggedIn:this.isLoggedIn,hasInitialIdChanged:e!==t});const i=this._dumpLocalStorage().filter((e=>e.includes(`fanpoll_${this.fanPollId}_${this.week}`)));if(console.log(`[FanPoll] Found ${i.length} relevant keys for migration`),i.length>0){let n=null,s=null;const o=e?`fanpoll_${this.fanPollId}_${this.week}_${e}`:null;if(o&&i.includes(o))try{const e=localStorage.getItem(o);if(e)try{const t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(console.log(`[FanPoll] Found valid data in initial session key: ${o}`),n=e,s=o)}catch(e){console.error(`[FanPoll] Error parsing data from ${o}:`,e)}}catch(e){console.error(`[FanPoll] Error accessing key ${o}:`,e)}if(!n){const e=`fanpoll_${this.fanPollId}_${this.week}`;if(i.includes(e))try{const t=localStorage.getItem(e);if(t)try{const i=JSON.parse(t);Array.isArray(i)&&i.length>0&&(console.log(`[FanPoll] Found valid data in simple key: ${e}`),n=t,s=e)}catch(t){console.error(`[FanPoll] Error parsing data from ${e}:`,t)}}catch(t){console.error(`[FanPoll] Error accessing key ${e}:`,t)}}if(!n){const o=i.filter((i=>i.includes("anonymous")||e&&i.includes(e)||!i.includes(t)));console.log("[FanPoll] Looking at these candidate keys:",o);for(const e of o)try{const t=localStorage.getItem(e);if(t)try{const i=JSON.parse(t);if(Array.isArray(i)&&i.length>0){console.log(`[FanPoll] Found valid data in candidate key: ${e}`),n=t,s=e;break}}catch(t){console.error(`[FanPoll] Error parsing data from ${e}:`,t)}}catch(t){console.error(`[FanPoll] Error accessing key ${e}:`,t)}}if(n&&s){if(console.log(`[FanPoll] Migrating data from ${s} to ${this.localStorageKey}`),this._pendingMigrationData=n,localStorage.setItem(this.localStorageKey,n),s!==this.localStorageKey){console.log(`[FanPoll] Removing old key after migration: ${s}`),localStorage.removeItem(s);for(const e of i)if(e!==this.localStorageKey&&e!==s)try{localStorage.getItem(e)===n&&(localStorage.removeItem(e),console.log(`[FanPoll] Removed duplicate data from key: ${e}`))}catch(e){}}this.restoreRankingsFromLocalStorage()}else console.log("[FanPoll] Could not find any valid data to migrate")}}initAfterLogin(){if(console.log("[FanPoll] Initializing after login check"),this._removePrevAnonSession(),!this.week){const e=this.querySelector('.Select-input[name="Select-week-input"]');e&&e.options&&e.options.length>0&&(this.week=e.options[0].value,console.log("[FanPoll] Week was missing, set to first available option:",this.week))}if(this.closeAtWeek){console.log("[FanPoll] closeAtWeek",this.closeAtWeek);const e=Date.now();if(this.closeAtWeek<e){const e=document.querySelector(".FanPollModule-userRanking"),t=document.querySelector(".FanPollModule");e&&(e.style.display="block"),t&&(t.style.display="none");const i=document.querySelector(".UserRanking");i&&(i.style.display="flex"),this.fetchAndStoreLeaderboard(this.week)}else{const e=document.querySelector(".FanPollModule-userRanking"),t=document.querySelector(".FanPollModule");e&&(e.style.display="none"),t&&(t.style.display="block"),this.fetchExistingRankings().then((()=>{this.checkMinimumSelections(),this.updateSubmitButton(),this.hasExistingRankings?console.log("[FanPoll] Using API rankings, not checking localStorage"):(console.log("[FanPoll] No rankings from API, trying localStorage"),this.restoreRankingsFromLocalStorage())}))}}else{const e=document.querySelector(".FanPollModule-userRanking"),t=document.querySelector(".FanPollModule");e&&(e.style.display="block"),t&&(t.style.display="none");const i=document.querySelector(".UserRanking");i&&(i.style.display="flex"),this.fetchAndStoreLeaderboard(this.week)}this.submitButton.addEventListener("click",this.handleSubmitClick.bind(this)),this.submitButtonMobile.addEventListener("click",this.handleSubmitClick.bind(this)),this.fetchExistingRankings().then((()=>{this.checkMinimumSelections(),this.updateSubmitButton(),this.hasExistingRankings?console.log("[FanPoll] Using API rankings, not checking localStorage"):(console.log("[FanPoll] No rankings from API, trying localStorage"),this.restoreRankingsFromLocalStorage())}));const e=this.querySelector('.Select-input[name="Select-week-input"]');e&&e.addEventListener("change",(e=>{const t=e.target.value;this.week=t,this.updateLocalStorageKey();const i=e.target.selectedOptions?.[0]||e.target.querySelector(`option[value="${t}"]`),n=i?.getAttribute("data-close-at");if(!n)return;const s=Date.now(),o=Number(n)<s,a=document.querySelector(".FanPollModule-userRanking"),r=document.querySelector(".FanPollModule"),l=document.querySelector(".UserRanking");o?(a&&(a.style.display="block"),r&&(r.style.display="none"),l&&(l.style.display="flex"),this.fetchAndStoreLeaderboard(t)):(a&&(a.style.display="none"),r&&(r.style.display="block"),this.fetchExistingRankings().then((()=>{this.checkMinimumSelections(),this.updateSubmitButton(),this.updateLocalStorageKey(),this.restoreRankingsFromLocalStorage()})))})),setTimeout((()=>{const e=this.querySelector('.Select-input[data-parameter="week"]');if(e){const t=e.getAttribute("data-most-recent-value");t&&(e.value=t,this.week||(this.week=t,console.log("Week was missing, set to most recent value:",this.week)))}}),0)}async fetchLeaderboardData(e){const t={rankings:[],username:null,week_rank:null,week_points:null,total_points:null};if(!this.isLoggedIn)return t;try{const i=await Ct.getToken(this.userAggregatorAPIBaseURL);console.log("Token received:",i?"Yes":"No");const n=`${this.userAggregatorAPIBaseURL}/fanpollvotes?fanpollId=${this.fanPollId}&week=${e}`,s=await fetch(n,{headers:{Authorization:`Bearer ${i}`}});if(console.log("API Response status:",s.status),!s.ok)return console.error("Failed to fetch leaderboard data"),t;if(204===s.status)return t;const o=await s.json();return console.log("Leaderboard data:",o),o}catch(e){return console.error("Error in fetchLeaderboardData:",e),t}}async fetchAndStoreLeaderboard(e){console.log("fetchAndStoreLeaderboard",e),this.setLoading(!0);const t=await this.fetchLeaderboardData(e);this.setLoading(!1);const i=this.querySelector("#user-ranking-loading"),n=this.querySelector("#user-ranking-table"),s=this.querySelector(".UserRanking-trophy"),o=this.querySelector(".FanPollModule-header-title");let a=await this.getDisplayName(t);n.style.display="none",o&&(o.textContent=a),s.style.display="none",this.renderTrophySection(s,t,a,e),this.renderLeaderboardTable(n,t?.rankings??[]),i&&(i.style.display="none");const r=this.querySelector(".UserRanking");r&&(r.style.display="flex")}async getDisplayName(e){if(this.displayName)return this.displayName;try{const e=await fetch("/blaize/profile");if(e.ok){const t=await e.json();this.displayName=t?.username}}catch(e){}return this.displayName||(this.displayName=e?.username??"BALLOT PAGE"),this.displayName}renderTrophySection(e,t,i,n){if(e&&t&&this.isLoggedIn){e.style.display="flex";const s=this.querySelector(".UserRanking-points");s&&s.remove();const o=`\n    <div class='UserRanking-points' style='display:none;'>\n      <div class='UserRanking-username'>${i}</div>\n      <div class='UserRanking-points-details'><span class="UserRanking-points-details-label">Weekly Ranking:</span> <span>${null!=t.week_rank?this.getOrdinalSuffix(t.week_rank):"-"}</span></div>\n      <div class='UserRanking-points-details'><span class="UserRanking-points-details-label">${n||""} Points:</span> <span>${t.week_points??"-"}</span></div>\n      <div class='UserRanking-points-details'><span class="UserRanking-points-details-label">Total Points:</span> <span>${t.total_points??"-"}</span></div>\n    </div>`;if(this.isLoggedIn){e.insertAdjacentHTML("beforeend",o);const t=e.querySelector(".UserRanking-points");t&&(t.style.display="block")}}}renderLeaderboardTable(e,t){if(console.log("renderLeaderboardTable",t),console.log("wrapper",e),e&&this.isLoggedIn){let i='\n    <div class="UserRanking-grid">\n      <div class="UserRanking-header">\n        <div class="UserRanking-th UserRanking-th--rank">RANK</div>\n        <div class="UserRanking-th UserRanking-th--team">TEAMS</div>\n        <div class="UserRanking-th UserRanking-th--points">POINTS</div>\n      </div>\n      <div class="UserRanking-body">';t.length>0?t.forEach(((e,t)=>{i+=`\n        <div class="UserRanking-row">\n          <div class="UserRanking-td UserRanking-td--rank">${e.rank??t+1}</div>\n          <div class="UserRanking-td UserRanking-td--team">\n            <span class="UserRanking-teamLogo">${e.team_logo?`<img src="${e.team_logo}" alt="${e.team_name||""} logo" />`:""}</span>\n            <span class="UserRanking-teamName">${e.team_name??""}</span>\n            <span class="UserRanking-teamRecord">${e.win??""}-${e.loss??""}</span>\n            <span class="UserRanking-conference">${e.team_conference??""}</span>\n          </div>\n          <div class="UserRanking-td UserRanking-td--points">${e.points??"-"}</div>\n        </div>`})):i+='\n      <div class="UserRanking-row UserRanking-empty">\n        <div>No rankings available for this week</div>\n      </div>',e.style.display="block",i+="</div></div>",e.innerHTML=i}}async fetchExistingRankings(){try{if(!this.isLoggedIn)return void this.setSubmitButtonsState({text:"Sign In - To Cast your vote",disabled:!1,cursor:"pointer",opacity:"1",showRevert:!1});await this.getDisplayName(),this.setLoading(!0);const e=await Ct.getToken(this.userAggregatorAPIBaseURL),t=`${this.userAggregatorAPIBaseURL}/fanpollvotes?fanpollId=${this.fanPollId}&week=${this.week}`;console.log(`[FanPoll] Fetching existing rankings from API: ${t}`);const i=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(console.log(`[FanPoll] API response status: ${i.status}`),!i.ok)return console.log("[FanPoll] API response not OK, checking localStorage instead"),this.updateSubmitButton(),void this.restoreRankingsFromLocalStorage();if(204===i.status)return this.updateSubmitButton(),void this.restoreRankingsFromLocalStorage();const n=await i.json();if(console.log("[FanPoll] API response data:",n),!Array.isArray(n?.rankings)||!n.rankings.length)return console.log("[FanPoll] No rankings found in API response, checking localStorage"),this.updateSubmitButton(),void this.restoreRankingsFromLocalStorage();console.log(`[FanPoll] Found ${n.rankings.length} rankings from API, using those`),this.clearRankingsFromLocalStorage(),this.hasExistingRankings=!0,this.initialRankings=[...n.rankings];const s=this.ballotTable?.querySelectorAll(".FanPollModule-row")??[];s.forEach((e=>e.classList.remove("is-hidden"))),n.rankings.forEach((e=>this.populateRankingRow(e,s))),this.checkMinimumSelections(),this.updateSubmitButton()}catch(e){console.error("[FanPoll] Error in fetchExistingRankings:",e),this.updateSubmitButton(),this.restoreRankingsFromLocalStorage()}finally{this.setLoading(!1)}}populateRankingRow(e,t){const i=t[e.rank-1];if(!i)return;const n=i.querySelector(".CustomSelect"),s=n?.querySelector(".CustomSelect-input"),o=n?.querySelector(".CustomSelect-label"),a=n?.querySelector(".CustomSelect-logo"),r=n?.querySelector(".CustomSelect-clear"),l=n?.querySelector(`[data-value="${e.team_id}"]`);if(!l||!s)return;const c=l.querySelector(".CustomSelect-name")?.textContent??"",d=l.querySelector(".CustomSelect-wins")?.textContent??"",h=l.querySelector(".CustomSelect-losses")?.textContent??"",u=l.getAttribute("data-logo")||"";s.value=e.team_id,o.innerHTML=`\n    <span class="CustomSelect-name">${c}</span>\n    <span class="CustomSelect-wins">${d}</span>\n    <span class="CustomSelect-wins-dash">-</span>\n    <span class="CustomSelect-losses">${h}</span>`,o.style.color="#000000",a.innerHTML=`<img src="${u}" alt="${c} logo" class="CustomSelect-logo" />`,r.style.display="block",this.querySelectorAll(".CustomSelect-options").forEach((t=>{const i=t.querySelector(`[data-value="${e.team_id}"]`);i&&(i.style.display="none")})),s.dispatchEvent(new Event("change",{bubbles:!0}))}updateSubmitButton(){const e=this.checkMinimumSelections();if(this.isLoading)return void this.setSubmitButtonsState({text:"LOADING...",disabled:!0,opacity:"0.5",cursor:"not-allowed",showRevert:!1});if(!this.isLoggedIn)return this.setSubmitButtonsState({text:"Sign In - To Cast your vote",disabled:!1,opacity:"1",cursor:"pointer",showRevert:!1}),void document.documentElement.removeAttribute("is-fanpoll-reset-btn");let t={text:"",disabled:!1,opacity:"1",cursor:"pointer",showRevert:!1};if(this.hasExistingRankings)if(this.hasUserMadeChanges)t={text:"Save Changes",disabled:!e,opacity:e?"1":"0.5",cursor:e?"pointer":"not-allowed",showRevert:!0},document.documentElement.setAttribute("is-fanpoll-reset-btn","");else{const e=this.querySelector(".FanPollModule-header-title");this.displayName&&(e.textContent=this.displayName),t={text:"Submit Changes",disabled:!0,opacity:"0.5",cursor:"not-allowed",showRevert:!1},document.documentElement.removeAttribute("is-fanpoll-reset-btn")}else t={text:"Submit Your Poll",disabled:!e,opacity:e?"1":"0.5",cursor:e?"pointer":"not-allowed",showRevert:!1},document.documentElement.removeAttribute("is-fanpoll-reset-btn");this.setSubmitButtonsState(t)}setSubmitButtonsState(e){let{text:t,disabled:i,opacity:n,cursor:s,showRevert:o}=e;const a=[this.submitButton,this.submitButtonMobile],r=[this.revertButton,this.revertButtonMobile];a.forEach((e=>{e&&(e.textContent=t,e.disabled=i,e.style.opacity=n,e.style.cursor=s)})),r.forEach((e=>{e&&(e.style.display=o?"inline-block":"none")}))}checkMinimumSelections(){const e=(this.ballotTable?Array.from(this.ballotTable.querySelectorAll(".FanPollModule-row")):[]).map((e=>e.querySelector(".CustomSelect-input"))),t=e.filter((e=>e&&e.value&&""!==e.value.trim())).length,i=Number.isFinite(this.pollSizeMinimum)?this.pollSizeMinimum:10;let n=!0;for(let t=0;t<i;t++){const i=e[t]?.value?.trim();if(!i){n=!1;break}}return this._isUpdatingSelections||(this._isUpdatingSelections=!0,requestAnimationFrame((()=>{this.querySelectorAll(".CustomSelect").forEach(((t,n)=>{const s=t.querySelector(".CustomSelect-selected"),o=t.querySelector(".CustomSelect-input"),a=""!==o?.value?.trim(),r=(()=>{let t=0;for(let i=0;i<e.length;i++){const n=e[i]?.value?.trim();if(!n)break;t++}return t})();n<i||n<=r||a?(s.style.pointerEvents="auto",s.style.opacity="1"):(s.style.pointerEvents="none",s.style.opacity="0.5")})),this._isUpdatingSelections=!1}))),t>=i&&n}closeAllDropdowns(){this.querySelectorAll(".CustomSelect.open").forEach((e=>{e.classList.remove("open");const t=e.querySelector(".CustomSelect-options");t&&(t.style.display="none")}))}getOrdinalSuffix(e){const t=parseInt(e,10);if(isNaN(t))return e;const i=t%10,n=t%100;return 1===i&&11!==n?`${t}st`:2===i&&12!==n?`${t}nd`:3===i&&13!==n?`${t}rd`:`${t}th`}renderPopup(){this.popup.className="FanPollModule-popup",this.popup.style.cssText="position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);background: #fff;padding: 20px;border-radius: 3px;box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);display: none;z-index: 10000;min-width: 300px;text-align: center;border: 1px solid #E6E6E7;",this.popup.innerHTML='<div class="FanPollModule-popup-content"></div><button class="FanPollModule-popup-close" style="margin-top: 15px;padding: 8px 20px;background: transparent;color: #191919;border: 1px solid #191919;border-radius: 4px;cursor: pointer;font-size: 16px;font-weight: 530;line-height: 120%;">OK</button>',document.body.appendChild(this.popup),this.popup.querySelector(".FanPollModule-popup-close").addEventListener("click",(()=>{this.popup.style.display="none",this.overlay.style.display="none",this.popup.querySelector(".FanPollModule-popup-content").textContent.includes("Thanks for submitting")&&window.location.reload()}))}showPopup(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const s=this.popup.querySelector(".FanPollModule-popup-content");t?s.innerHTML=e:s.textContent=e,i&&this.popup.querySelector(".FanPollModule-popup-close").addEventListener("click",i),n&&(this.popup.querySelector(".FanPollModule-popup-close").textContent=n),this.popup.style.display="block",this.overlay.style.display="block"}renderOverlay(){this.overlay.className="FanPollModule-overlay",this.overlay.style.cssText="position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-color: rgba(0, 0, 0, 0.5);z-index: 9999;display: none;",document.body.appendChild(this.overlay)}checkForChanges(){if(!this.initialRankings)return!1;this._cachedRows||(this._cachedRows=this.ballotTable.querySelectorAll(".FanPollModule-row"));const e=[];this._cachedRows.forEach(((t,i)=>{const n=t.querySelector(".CustomSelect-input");n&&n.value&&e.push({team_id:n.value,rank:i+1})})),e.length!==this.initialRankings.length?this.hasUserMadeChanges=!0:this.hasUserMadeChanges=e.some(((e,t)=>e.team_id!==this.initialRankings[t].team_id||e.rank!==this.initialRankings[t].rank)),e.length>=this.pollSizeMinimum||(this.hasUserMadeChanges=!1),this.updateSubmitButton()}async handleSubmitClick(){if(!this.isLoggedIn)return console.log("No session ID found, cannot submit",this.isLoggedIn,this.isAuthenticated,this.hasUsername,!!window.Zephr?.openModal),void window.Zephr?.openModal();if(this.isLoggedIn&&window.Zephr?.openModal)window.Zephr?.openModal();else{if(!this.checkMinimumSelections())return this.submitButton&&(this.submitButton.disabled=!0),this.submitButtonMobile&&(this.submitButtonMobile.disabled=!0),void this.showPopup(`Please select at least ${this.pollSizeMinimum} teams before submitting.`);this.setLoading(!0);try{const e=await Ct.getToken(this.userAggregatorAPIBaseURL),t=Ct.collectRankingsData(this.ballotTable,this.teams),i={fan_poll_id:this.fanPollId,week:this.week,rankings:t},n=await fetch(`${this.userAggregatorAPIBaseURL}/fanpollvotes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(!n.ok){const e=await n.text();throw new Error(`Failed to submit rankings: ${n.status} ${e}`)}this.clearRankingsFromLocalStorage(),await this.fetchExistingRankings(),this.showPopup(`Thanks for submitting! Check back at ${Ct.formatCloseTimeWithDate(this.closeAtWeek)} to see your result.`)}catch(e){console.error("Error submitting rankings:",e),this.showPopup("Failed to submit rankings. Please try again.")}finally{this.setLoading(!1)}}}updateRanks(){if((this.ballotTable?.querySelectorAll(".FanPollModule-row")??[]).forEach(((e,t)=>{const i=e.querySelector(".FanPollModule-rank");i&&(i.textContent=t+1)})),!this.hasExistingRankings||!this.initialRankings?.length)return;const e=Ct.collectRankingsData(this.ballotTable,this.teams);this.hasUserMadeChanges=e.some((e=>{const t=this.initialRankings.find((t=>t.team_id===e.team_id));return t?.rank!==e.rank})),this.updateSubmitButton()}revertChanges(){if(!this.initialRankings?.length)return;const e=this.ballotTable.querySelectorAll(".FanPollModule-row");e.forEach((e=>this.resetRow(e))),this.querySelectorAll(".CustomSelect-option").forEach((e=>{e.style.display="flex"})),this.initialRankings.forEach((t=>{const i=e[t.rank-1];i&&this.populateRowFromRanking(i,t)})),this.hasUserMadeChanges=!1,this.updateSubmitButton(),this.clearRankingsFromLocalStorage()}resetRow(e){const t=e.querySelector(".CustomSelect"),i=t?.querySelector(".CustomSelect-input"),n=t?.querySelector(".CustomSelect-label"),s=t?.querySelector(".CustomSelect-logo"),o=t?.querySelector(".CustomSelect-clear");i&&(i.value=""),n&&(n.innerHTML='<span class="CustomSelect-name">Team</span>',n.style.color="#888888"),s&&(s.innerHTML=""),o&&(o.style.display="none")}populateRowFromRanking(e,t){const i=e.querySelector(".CustomSelect"),n=i?.querySelector(".CustomSelect-input"),s=i?.querySelector(".CustomSelect-label"),o=i?.querySelector(".CustomSelect-logo"),a=i?.querySelector(".CustomSelect-clear"),r=i?.querySelector(`[data-value="${t.team_id}"]`);if(!n||!r)return;const l=r.getAttribute("data-logo")||"",c=r.querySelector(".CustomSelect-name")?.textContent??"",d=r.querySelector(".CustomSelect-wins")?.textContent??"",h=r.querySelector(".CustomSelect-losses")?.textContent??"";n.value=t.team_id,s.innerHTML=`\n    <span class="CustomSelect-name">${c}</span>\n    <span class="CustomSelect-wins">${d}</span>\n    <span class="CustomSelect-wins-dash">-</span>\n    <span class="CustomSelect-losses">${h}</span>`,s.style.color="#000000",o.innerHTML=`<img src="${l}" alt="${c} logo" class="CustomSelect-logo" />`,a.style.display="block",this.querySelectorAll(".CustomSelect-options").forEach((e=>{const i=e.querySelector(`[data-value="${t.team_id}"]`);i&&(i.style.display="none")}))}initCustomDropdowns(){const e=this.querySelectorAll(".CustomSelect");this.cachedInputs=Array.from(this.querySelectorAll(".CustomSelect-input")),this._cachedSelectOptions={},e.forEach((e=>{const t=e.querySelector(".CustomSelect-selected"),i=e.querySelector(".CustomSelect-options"),n=e.querySelector(".CustomSelect-input"),s=t.querySelector(".CustomSelect-label"),o=t.querySelector(".CustomSelect-logo"),a=e.querySelector(".CustomSelect-clear"),r=e.querySelector(".CustomSelect-searchInput"),l=i.querySelector(".CustomSelect-noResults");this._cachedSelectOptions[n.id]=Array.from(i.querySelectorAll(".CustomSelect-option")),Array.from(i.querySelectorAll(".CustomSelect-option")).sort(((e,t)=>{const i=e.querySelector(".CustomSelect-name").textContent.toLowerCase(),n=t.querySelector(".CustomSelect-name").textContent.toLowerCase();return i.localeCompare(n)})).forEach((e=>i.appendChild(e)));const c=()=>{this.querySelectorAll(".CustomSelect.open").forEach((e=>{e.classList.remove("open"),e.querySelector(".CustomSelect-options").style.display="none"}))};this.closeAllDropdowns=c;const d=t=>{t.preventDefault(),t.stopPropagation();const n=e.classList.contains("open");if(c(),n)return;e.classList.add("open"),i.style.display="block",r.focus();const s=Array.from(this.querySelectorAll(".CustomSelect-input")).filter((e=>e.value)).map((e=>e.value));i.querySelectorAll(".CustomSelect-option").forEach((e=>{const t=e.getAttribute("data-value");e.style.display=s.includes(t)?"none":"flex"})),this.checkMinimumSelections(),this.updateSubmitButton();const o=window.innerHeight,a=e.getBoundingClientRect(),l=o-a.bottom,d=a.top,h=`${Math.min(.8*o,l>d?l-20:d-20)}px`;window.innerWidth<=768||l>d?Object.assign(i.style,{maxHeight:h,top:"100%",bottom:"auto"}):Object.assign(i.style,{maxHeight:h,top:"auto",bottom:"100%"})},h=e=>{e.preventDefault(),e.stopPropagation(),n.value="",requestAnimationFrame((()=>{s.innerHTML='<span class="CustomSelect-name">Team</span>',s.style.color="#888",o.innerHTML="",a.style.display="none",r.value="",this.hasExistingRankings&&(this.hasUserMadeChanges=!0);const e=new Set(this.cachedInputs.filter((e=>e!==n&&e.value)).map((e=>e.value)));if(Object.values(this._cachedSelectOptions).forEach((t=>{t.forEach((t=>{const i=t.getAttribute("data-value");t.style.display=e.has(i)?"none":"flex"}))})),!this.hasExistingRankings){const e=[];this.ballotTable.querySelectorAll(".FanPollModule-row").forEach(((t,i)=>{const n=t.querySelector(".CustomSelect-input");n&&n.value&&e.push({team_id:n.value,rank:i+1})})),this.saveRankingsToLocalStorage(e)}n.dispatchEvent(new Event("change",{bubbles:!0}))})),this.checkMinimumSelections(),this.updateSubmitButton()};let u=!1;const p=e=>{if(u)return;if(e.preventDefault(),e.stopPropagation(),"none"===e.currentTarget.style.display)return;const t=e.currentTarget,l=t.getAttribute("data-value"),d=t.getAttribute("data-logo")||"",h=t.querySelector(".CustomSelect-name").textContent,p=t.querySelector(".CustomSelect-wins").textContent,g=t.querySelector(".CustomSelect-losses").textContent;n.value=l,requestAnimationFrame((()=>{s.innerHTML=`\n          <span class="CustomSelect-name">${h}</span>\n          <span class="CustomSelect-wins">${p}</span>\n          <span class="CustomSelect-wins-dash">-</span>\n          <span class="CustomSelect-losses">${g}</span>`,s.style.color="#000000",o.innerHTML=`<img src="${d}" alt="${h}" class="CustomSelect-logo"/>`,a.style.display="block",c(),i.style.display="none",r.value="";const e=new Set(this.cachedInputs.filter((e=>e.value)).map((e=>e.value)));if(Object.values(this._cachedSelectOptions).forEach((t=>{t.forEach((t=>{const i=t.getAttribute("data-value");t.style.display=e.has(i)?"none":"flex"}))})),!this.hasExistingRankings){const e=[];this.ballotTable.querySelectorAll(".FanPollModule-row").forEach(((t,i)=>{const n=t.querySelector(".CustomSelect-input");n&&n.value&&e.push({team_id:n.value,rank:i+1})})),this.saveRankingsToLocalStorage(e)}n.dispatchEvent(new Event("change",{bubbles:!0}))})),this.checkMinimumSelections(),this.updateSubmitButton()};t.addEventListener("click",(e=>{this.updateSubmitButton(),d(e)}));let g=0,m=0,f=!1;t.addEventListener("touchstart",(e=>{const t=e.touches[0];g=t.clientY,m=t.clientX,f=!1}),{passive:!0}),t.addEventListener("touchmove",(e=>{const t=e.touches[0],i=Math.abs(t.clientY-g);i>Math.abs(t.clientX-m)&&i>5&&(f=!0)}),{passive:!0}),t.addEventListener("touchend",(e=>{f||(this.updateSubmitButton(),d(e)),f=!1})),r.addEventListener("focus",(()=>e.classList.add("searching"))),r.addEventListener("blur",(()=>e.classList.remove("searching"))),r.addEventListener("input",(e=>{const t=e.target.value.toLowerCase();let n=0;i.querySelectorAll(".CustomSelect-option").forEach((e=>{const i=e.querySelector(".CustomSelect-name").textContent.toLowerCase(),s=e.getAttribute("data-value"),o=Array.from(this.querySelectorAll(".CustomSelect-input")).some((e=>e.value===s)),a=i.includes(t)&&!o;e.style.display=a?"flex":"none",a&&n++})),l.style.display=0===n?"block":"none"})),a.addEventListener("click",h),a.addEventListener("touchend",h),a.addEventListener("touchstart",(e=>e.preventDefault())),i.querySelectorAll(".CustomSelect-option").forEach((e=>{e.addEventListener("touchstart",(()=>{u=!1})),e.addEventListener("touchmove",(()=>{u=!0})),e.addEventListener("click",p),e.addEventListener("touchend",p)})),n.value||(s.style.color="#A8A8A9")})),document.addEventListener("click",(()=>this.closeAllDropdowns()))}resetDraggedRowStyles(e){e&&(e.style.transform="",e.style.position="",e.style.width="",e.style.height="",e.style.zIndex="",e.style.willChange="",e.style.touchAction="",e.style.userSelect="",e.style.webkitUserSelect="",e.style.left="",e.style.top="",e.style.backgroundColor="")}saveRankingsToLocalStorage(e){try{if(this.hasExistingRankings||!this.sessionId)return;this._pendingMigrationData&&(this._pendingMigrationData=null),console.log(`[FanPoll] Saving rankings to localStorage key: ${this.localStorageKey}`),localStorage.setItem(this.localStorageKey,JSON.stringify(e)),localStorage.getItem(this.localStorageKey)?console.log(`[FanPoll] Save verified: ${this.localStorageKey}`):console.error(`[FanPoll] FAILED to save rankings to: ${this.localStorageKey}`)}catch(e){console.error("[FanPoll] Error saving rankings to localStorage:",e)}}restoreRankingsFromLocalStorage(){try{if(this.hasExistingRankings&&this.initialRankings?.length>0)return void console.log("[FanPoll] Skipping localStorage restore - using existing API rankings");console.log("[FanPoll] Attempting to restore rankings from localStorage"),this._dumpLocalStorage();let e=null,t=null;if(this.sessionId){const i=this.localStorageKey;e=localStorage.getItem(i),e?(console.log(`[FanPoll] Found data in localStorage key: ${i}`),t=i):console.log(`[FanPoll] No data in current key: ${i}`)}if(!e&&this._pendingMigrationData&&(console.log("[FanPoll] Using pending migration data to restore rankings"),e=this._pendingMigrationData,this.sessionId&&(localStorage.setItem(this.localStorageKey,e),console.log(`[FanPoll] Saved migrated data to key: ${this.localStorageKey}`)),this._pendingMigrationData=null),!e){console.log("[FanPoll] Last attempt - checking all possible keys directly");const i=[this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:null,this._initialSessionId?`fanpoll_${this.fanPollId}_${this.week}_${this._initialSessionId}`:null,`fanpoll_${this.fanPollId}_${this.week}`,`fanpoll_${this.fanPollId}_${this.week}_null`,`fanpoll_${this.fanPollId}_${this.week}_undefined`,`fanpoll_${this.fanPollId}_${this.week}_anonymous`].filter(Boolean);console.log("[FanPoll] Checking these keys directly:",i);for(const n of i)try{const i=localStorage.getItem(n);if(i){console.log(`[FanPoll] Found data in key: ${n}`),e=i,t=n;break}}catch(e){console.error(`[FanPoll] Error checking key ${n}:`,e)}if(!e)for(let i=0;i<localStorage.length;i++){const n=localStorage.key(i);if(n&&n.includes(this.fanPollId)&&n.includes(this.week))try{const i=localStorage.getItem(n);if(i){console.log(`[FanPoll] Found data in scan: ${n}`),e=i,t=n,localStorage.setItem(this.localStorageKey,e),console.log(`[FanPoll] Copied data to: ${this.localStorageKey}`);break}}catch(e){console.error(`[FanPoll] Error with key ${n}:`,e)}}e&&t&&t!==this.localStorageKey&&(console.log(`[FanPoll] Cleaning up old key after migration: ${t}`),localStorage.removeItem(t))}if(!e)return void console.log("[FanPoll] No localStorage data found for restoration");try{const t=JSON.parse(e);if(!Array.isArray(t)||0===t.length)return void console.log("[FanPoll] No valid rankings in localStorage data");console.log(`[FanPoll] Restoring ${t.length} rankings from localStorage`);const i=this.ballotTable?.querySelectorAll(".FanPollModule-row")??[];i.forEach((e=>this.resetRow(e))),this.querySelectorAll(".CustomSelect-option").forEach((e=>{e.style.display="flex"})),t.forEach((e=>{const t=i[e.rank-1];t&&this.populateRowFromRanking(t,e)})),this.hasUserMadeChanges=!0,this.updateSubmitButton(),console.log("[FanPoll] Successfully restored rankings from localStorage")}catch(e){console.error("[FanPoll] Error parsing rankings from localStorage:",e)}}catch(e){console.error("[FanPoll] Error in restoreRankingsFromLocalStorage:",e)}}clearRankingsFromLocalStorage(){try{this.sessionId&&localStorage.removeItem(this.localStorageKey),this._removePrevAnonSession(),this._pendingMigrationData&&(this._pendingMigrationData=null)}catch(e){}}toggleHeaderWeekVisibility(){const e=this.querySelector(".FanPollModule-header-week");e&&(e.style.display=this.isLoggedIn?"block":"none")}toggleCountdownVisibility(){const e=this.countDownTimer||this.querySelector(".fanpoll-count-down-timer");e&&(e.style.display=this.isLoggedIn?"none":"block")}checkForAnonymousSessionData(){try{if(!this.isLoggedIn||!this.sessionId)return;this._removePrevAnonSession();const e=[`fanpoll_${this.fanPollId}_${this.week}`,`fanpoll_${this.fanPollId}_${this.week}_null`,`fanpoll_${this.fanPollId}_${this.week}_undefined`,`fanpoll_${this.fanPollId}_${this.week}_anonymous`],t=`fanpoll_${this.fanPollId}_${this.week}_anonymous_`;for(let i=0;i<localStorage.length;i++){const n=localStorage.key(i);n&&n.startsWith(t)&&e.push(n)}for(const t of e){const e=localStorage.getItem(t);if(e){console.log(`[FanPoll] Found anonymous session data in key: ${t}`);try{const i=JSON.parse(e);if(Array.isArray(i)){this._pendingMigrationData=e;const i=`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`;localStorage.setItem(i,e),localStorage.removeItem(t),console.log(`[FanPoll] Removed old anonymous key: ${t}`),console.log(`[FanPoll] Migrated anonymous data to logged-in key: ${i}`);break}}catch(e){console.error("[FanPoll] Invalid data format in anonymous storage:",e),localStorage.removeItem(t)}}}this._pendingMigrationData&&!this.hasExistingRankings&&this.restoreRankingsFromLocalStorage()}catch(e){console.error("[FanPoll] Error in checkForAnonymousSessionData:",e)}}updateLocalStorageKey(){const e=Ct.getSessionId(),t=(!this.sessionId||this.sessionId?.startsWith("anonymous_"))&&e&&!e.startsWith("anonymous_");if(console.log("[FanPoll] Session ID transition:",{oldSession:this.sessionId,newSession:e,isAnonymousToAuth:t,week:this.week,fanPollId:this.fanPollId,hasExistingRankings:this.hasExistingRankings}),e!==this.sessionId||this._wasLoggedInBefore!==this.isLoggedIn){if(t||this._wasLoggedInBefore!==this.isLoggedIn&&this.isLoggedIn){console.log("[FanPoll] Detected transition from anonymous to authenticated session");const e=[this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:null,`fanpoll_${this.fanPollId}_${this.week}`,`fanpoll_${this.fanPollId}_${this.week}_null`,`fanpoll_${this.fanPollId}_${this.week}_undefined`,`fanpoll_${this.fanPollId}_${this.week}_anonymous`].filter(Boolean);console.log("[FanPoll] Checking anonymous keys:",e),console.log("[FanPoll] All localStorage keys:");for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);console.log(`- ${t}`)}let t=null;for(const i of e)try{const e=localStorage.getItem(i);if(e){t=e,console.log(`[FanPoll] Found data in anonymous key: ${i}`,e.substring(0,50)+"..."),localStorage.removeItem(i);break}}catch(e){console.error(`[FanPoll] Error accessing key ${i}:`,e)}if(!t){console.log("[FanPoll] No data found in expected keys, scanning all localStorage");for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);if(i&&i.includes(`fanpoll_${this.fanPollId}_${this.week}`))try{const e=localStorage.getItem(i);if(e){t=e,console.log(`[FanPoll] Found data in key during scan: ${i}`,e.substring(0,50)+"..."),localStorage.removeItem(i);break}}catch(e){console.error(`[FanPoll] Error accessing key ${i}:`,e)}}}t?(this._pendingMigrationData=t,console.log("[FanPoll] Stored pending migration data")):console.log("[FanPoll] No data found in any anonymous keys")}else if(this.sessionId){const e=`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`;try{const t=localStorage.getItem(e);t?(this._pendingMigrationData=t,console.log(`[FanPoll] Found data in previous session key: ${e}`,t.substring(0,50)+"..."),localStorage.removeItem(e)):console.log(`[FanPoll] No data found in previous session key: ${e}`)}catch(e){console.error("[FanPoll] Error migrating data from old session:",e)}}if(this.sessionId=e,this.localStorageKey=this.sessionId?`fanpoll_${this.fanPollId}_${this.week}_${this.sessionId}`:`fanpoll_${this.fanPollId}_${this.week}`,console.log(`[FanPoll] Updated localStorage key to: ${this.localStorageKey}`),this._pendingMigrationData&&!this.hasExistingRankings)try{localStorage.setItem(this.localStorageKey,this._pendingMigrationData),console.log(`[FanPoll] Saved migrated data to key: ${this.localStorageKey}`),this.restoreRankingsFromLocalStorage(),this._pendingMigrationData=null}catch(e){console.error("[FanPoll] Error applying migrated data:",e)}else this._pendingMigrationData&&this.hasExistingRankings?console.log("[FanPoll] Had pending migration data but hasExistingRankings is true, so not applying"):this._pendingMigrationData||console.log("[FanPoll] No pending migration data to apply")}}_migrateDataBetweenKeys(e,t){try{if(!e||!t)return console.error("[FanPoll] Cannot migrate: invalid keys",{sourceKey:e,targetKey:t}),!1;const i=localStorage.getItem(e);if(!i)return console.log(`[FanPoll] No data found in source key: ${e}`),!1;try{const t=JSON.parse(i);if(!Array.isArray(t))return console.log(`[FanPoll] Source key does not contain valid array data: ${e}`),!1}catch(t){return console.error(`[FanPoll] Error parsing source data from ${e}:`,t),!1}return localStorage.setItem(t,i),console.log(`[FanPoll] Successfully migrated data from ${e} to ${t}`),localStorage.getItem(t)?(e!==t&&(localStorage.removeItem(e),console.log(`[FanPoll] Removed old data from source key: ${e}`)),!0):(console.error(`[FanPoll] Migration verification failed for target key: ${t}`),!1)}catch(e){return console.error("[FanPoll] Error in _migrateDataBetweenKeys:",e),!1}}_removePrevAnonSession(){try{localStorage.getItem("blaize_prev_anon_session")&&(localStorage.removeItem("blaize_prev_anon_session"),console.log("[FanPoll] Removed blaize_prev_anon_session from localStorage"));const e=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);i&&(i.startsWith("blaize_prev_anon_")||i.includes("prev_anon_session"))&&e.push(i)}e.length>0&&(console.log("[FanPoll] Removing related prev_anon_session keys:",e),e.forEach((e=>{localStorage.removeItem(e),console.log(`[FanPoll] Removed related key: ${e}`)})))}catch(e){console.error("[FanPoll] Error removing blaize_prev_anon_session:",e)}}_clearPreviousAnonSessionsOnLogout(){try{const e=Ct.getSessionId();for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);i&&i.startsWith("fanpoll_")&&!i.includes(e)&&(localStorage.removeItem(i),console.log(`[FanPoll] Removed localStorage key from previous anon session: ${i}`))}}catch(e){console.error("[FanPoll] Error clearing previous anon sessions on logout:",e)}}initCountdownTimer(){try{let e=this.getAttribute("data-close-at");if(console.log("[FanPoll] Initializing timer with closeAt:",e),!e){console.log("[FanPoll] No close time available, using default future date");const t=new Date;t.setDate(t.getDate()+1),e=t.getTime().toString();const i=this.querySelector("fan-poll-countdown-timer");i&&(i.setAttribute("target-date",e),console.log("[FanPoll] Set default target date:",e))}const t=this.querySelector("fan-poll-countdown-timer");if(!t)return void console.log("[FanPoll] Countdown timer component not found");if(console.log("=============="),console.log(this.originalTimestamp),console.log("=============="),this.originalTimestamp){const e=this.getAttribute("data-original-timestamp");e&&(t.setAttribute("data-original-timestamp",e),console.log("[FanPoll] Set original timestamp:",e)),t.addEventListener("complete",(()=>{console.log("[FanPoll] Countdown timer completed")})),console.log("[FanPoll] Countdown timer initialized")}}catch(e){console.error("[FanPoll] Error initializing countdown timer:",e)}}}class Dn extends HTMLElement{constructor(){super(),this.leaderboardData=null,this.userRank=null,this.currentWeek=null}connectedCallback(){this.currentWeek=this.getAttribute("data-week"),this.leaderboardType=this.getAttribute("data-leaderboard-type"),this.addSessionId="true"===this.getAttribute("data-add-session-id"),this.sessionId=Ct.getSessionId(),this.isLoggedIn=window.Zephr?.accessDetails?.authenticated,this.apiBaseUrl=this.getAttribute("data-user-aggregator-api-base-url"),this.showTheNoOfPlayers="true"===this.getAttribute("data-show-the-no-of-players"),this.leaderboardSize=this.getAttribute("data-leaderboard-size"),this.loader=At.createManagedLoader(this,{className:"leaderboard-loader",text:"Loading",position:"absolute",overlay:!0,zIndex:"999999",spinnerSize:"40px",spinnerColor:"#FF1818"}),this.setupDropdownListener(),this.setInitialSelected(),this.loader.show(),this.addSessionId?Pe.enqueue((e=>{this.isLoggedIn=e?.accessDetails?.authenticated,this.sessionId=Ct.getSessionId(),this.fetchAndStoreData()})):this.fetchAndStoreData()}setInitialSelected(){const e=this.querySelector(".Select-input");e&&this.currentWeek&&e.querySelectorAll("option").forEach((e=>{e.value===this.currentWeek&&(e.selected=!0)}))}setupDropdownListener(){const e=this.querySelector(".Select-input");e&&e.addEventListener("change",(e=>{const t=e.target.value;t&&t!==this.currentWeek&&(this.currentWeek=t,this.updateBallotStatus(t),this.fetchAndStoreData())}))}updateBallotStatus(e){const t=this.querySelector(".ballot-status");t&&(t.textContent=`${e} BALLOT PICKED`)}async fetchAndStoreData(){const e=this.getAttribute("data-fan-poll-id"),t=this.currentWeek||this.getAttribute("data-week");let i="Final"===(this.leaderboardType||this.getAttribute("data-leaderboard-type"))?"Final":t,n=`${this.apiBaseUrl}/leaderboard/result?fanpollId=${e}&week=${i}`;const s=parseInt(this.leaderboardSize,10);!isNaN(s)&&s>0&&(n+=`&leaderboardSize=${s}`),console.log(`fetchAndStoreData ${this.addSessionId}, ${this.isLoggedIn}`),this.sessionId&&this.addSessionId&&this.isLoggedIn&&(n+=`&sessionId=${this.sessionId}`),this.style.cssText="position: relative;display: block;width: 100%;min-height: 100px;";const o=this.querySelector(".leaderboard-container");o&&o.classList.add("loading");try{const e=await fetch(n,{headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch leaderboard data");if(204===e.status)this.leaderboardData=[],this.totalScoreSum=0;else{const t=await e.json();this.leaderboardData=t&&Array.isArray(t.user_ranks)?t.user_ranks:[],this.totalScoreSum=t&&t.leaderboardSize}}catch(e){console.error("Error fetching leaderboard data:",e),this.leaderboardData=[],this.totalScoreSum=0}finally{this.loader.hide(),o&&o.classList.remove("loading")}this.render()}render(){const e=this.querySelector(".grid-body");e&&(e.innerHTML="");const t=parseInt(this.leaderboardSize,10);let i=this.leaderboardData||[],n=[];if(!isNaN(t)&&t>0){const e=i.find((e=>!0===e.logged_in_user));let s=i.filter((t=>!e||t.userName!==e.userName)).sort(((e,t)=>e.rank-t.rank)).slice(0,e?t-1:t);n=e?[e,...s]:s}else n=i;if(n&&n.length>0&&e){const t=n.find((e=>!0===e.logged_in_user));t?this.showUserRankInfo(t):this.hideUserRankInfo(),n.forEach((t=>{const i=document.createElement("div");i.className="grid-row"+(!0===t.logged_in_user?" logged-in-user":""),!0===t.logged_in_user&&(i.style.backgroundColor="#F2F2F2"),i.innerHTML=`\n            <div class="grid-cell">${t.rank}</div>\n            <div class="grid-cell">${t.userName}</div>\n            <div class="grid-cell">${t.total_score}</div>\n          `,e.appendChild(i)}))}else if(e){this.hideUserRankInfo();const t=document.createElement("div");t.className="grid-row no-data-row",t.innerHTML='\n          <div class="grid-cell no-data-message" colspan="3">No data found</div>\n        ',e.appendChild(t)}}showUserRankInfo(e){const t=`Your rank this week: ${e.rank.toLocaleString()}/${this.totalScoreSum.toLocaleString()}`,i=this.querySelector(".desktop-user-rank .user-rank-text"),n=this.querySelector(".mobile-user-rank .user-rank-text");console.log("this.showTheNoOfPlayers",this.showTheNoOfPlayers),i&&this.showTheNoOfPlayers&&(i.textContent=t,i.style.display="block"),n&&this.showTheNoOfPlayers&&(n.textContent=t,n.style.display="block")}hideUserRankInfo(){const e=this.querySelector(".desktop-user-rank .user-rank-text"),t=this.querySelector(".mobile-user-rank .user-rank-text");e&&(e.style.display="none"),t&&(t.style.display="none")}}class qn extends HTMLElement{constructor(){super(),this.fanPollId=this.getAttribute("data-fan-poll-id"),this.week=this.getAttribute("data-week"),this.apiBaseUrl=this.getAttribute("data-user-aggregator-api-base-url"),this.loader=null,this.refreshAbortController=null,this.state={isRefreshing:!1,isUnloading:!1}}getCurrentTimeInET(){const e=new Date;return new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})).getTime()}connectedCallback(){this._onPageHide=()=>{if(this.state.isUnloading=!0,this.refreshAbortController)try{this.refreshAbortController.abort()}catch(e){}},window.addEventListener("pagehide",this._onPageHide),window.addEventListener("beforeunload",this._onPageHide),this.initializeLoader(),this.setupWeekSelector(),this.fetchData();try{const e=this.getAttribute("data-weekopensat")||this.getAttribute("data-weekOpensAt");if(e){const t=Number(String(e).trim()),i=Number.isNaN(t)?Date.parse(e):t<1e12?1e3*t:t;!Number.isNaN(i)&&this.getCurrentTimeInET()>=i&&this._refreshPageWithoutExposingToken()}}catch(e){}setTimeout((()=>{const e=this.querySelector('.Select-input[data-parameter="week"]');if(e){const t=e.getAttribute("data-most-recent-value");t&&(e.value=t)}}),0)}initializeLoader(){this.loader=At.createLoader({className:"FanPollResultsModule-loader",text:"Loading",position:"absolute",overlay:!0,zIndex:"999999",spinnerSize:"40px",spinnerColor:"#FF1818"}),this.style.cssText="position: relative;display: block;width: 100%;min-height: 100px;",this.appendChild(this.loader)}setupWeekSelector(){const e=this.querySelector(".Select-input");e&&e.addEventListener("change",(e=>{this.week=e.target.value,this.fetchData()}))}async fetchData(){if(this.fanPollId&&this.week)try{At.showLoader(this.loader);const e=`${this.apiBaseUrl}/teamResult?fanPollId=${this.fanPollId}&week=${encodeURIComponent(this.week)}`,t=await fetch(e,{headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);if(204===t.status)this.render([]);else{const e=await t.json();this.render(e)}}catch(e){console.error("Error fetching fan poll data:",e),this.renderError()}finally{At.hideLoader(this.loader)}else console.error("Missing required data: fanPollId or week")}renderError(){const e=this.querySelector("#fanpoll-grid");if(e){const t=e.querySelector(".FanPollResultsGrid-header");e.innerHTML="",t&&e.appendChild(t),e.insertAdjacentHTML("beforeend",'\n        <div class="FanPollResultsGrid-error">\n          <p>Unable to load fan poll data. Please try again later.</p>\n        </div>\n      ')}}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";const i=Array.isArray(e.ranks)?e.ranks:[];0===i.length?t='\n        <div class="FanPollResultsGrid-empty">\n          <p>No data available for the selected week.</p>\n        </div>\n      ':i.forEach((e=>{var i;console.log("row",e),t+=`\n          <div class="FanPollResultsGrid-row">\n            <div class="team-rank">${e.rank||"-"}</div>\n            <div class="team-info">\n              <div class="team-logo">\n          <img src="${e.teamLogo}" alt="${e.team}" />\n              </div>\n              <div class="team-info-text"> \n          <span class="team-name">${e.teamName||"-"}</span>\n          <span class="team-record">${e.win+"-"+e.loss}</span>\n          <span class="team-conference">${e.conference}</span>\n              </div>\n            </div>\n            <div>${i=e.trend||0,i>0?`<span class="trend up">\n      <svg width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <g clip-path="url(#clip0_434_10293)">\n            <path d="M11.2969 5.82617C11.2969 6.00195 11.2306 6.15625 11.0979 6.28906C10.9691 6.41797 10.815 6.48242 10.6354 6.48242H1.38048C1.20096 6.48242 1.04681 6.41797 0.918025 6.28906C0.785338 6.15625 0.718994 6.00195 0.718994 5.82617C0.718994 5.64648 0.785338 5.49023 0.918025 5.35742L5.54258 0.728516C5.67526 0.595703 5.82942 0.529297 6.00503 0.529297C6.18455 0.529297 6.34065 0.595703 6.47334 0.728516L11.0979 5.35742C11.2306 5.49023 11.2969 5.64648 11.2969 5.82617Z" fill="#1C6C00"/>\n            </g>\n            <defs>\n            <clipPath id="clip0_434_10293">\n            <rect width="10.62" height="6" fill="white" transform="matrix(1 0 0 -1 0.695068 6.5)"/>\n            </clipPath>\n            </defs>\n            </svg>\n      </span> ${i}`:i<0?`<span class="trend down"><svg width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_434_10332)">\n<path d="M11.2969 1.17383C11.2969 0.998047 11.2306 0.84375 11.0979 0.710938C10.9691 0.582031 10.815 0.517578 10.6354 0.517578H1.38048C1.20096 0.517578 1.04681 0.582031 0.918025 0.710938C0.785338 0.84375 0.718994 0.998047 0.718994 1.17383C0.718994 1.35352 0.785338 1.50977 0.918025 1.64258L5.54258 6.27148C5.67526 6.4043 5.82942 6.4707 6.00503 6.4707C6.18455 6.4707 6.34065 6.4043 6.47334 6.27148L11.0979 1.64258C11.2306 1.50977 11.2969 1.35352 11.2969 1.17383Z" fill="#FF1818"/>\n</g>\n<defs>\n<clipPath id="clip0_434_10332">\n<rect width="10.62" height="6" fill="white" transform="translate(0.695068 0.5)"/>\n</clipPath>\n</defs>\n</svg>\n</span> ${i}`:'<span class="trend">-</span>'}</div>\n            <div class="team-thisweek">${e.thisWeek||"-"}</div>\n            <div class="team-points">\n              <span>${null!=e.points?e.points:"-"}</span>\n              <span>${null!=e.firstPlaceCount?`(${e.firstPlaceCount})`:"-"}</span>\n            </div>\n          </div>\n        `}));const n=this.querySelector("#fanpoll-grid");if(n){const e=n.querySelector(".FanPollResultsGrid-header");n.innerHTML="",e&&n.appendChild(e),n.insertAdjacentHTML("beforeend",t)}}async _refreshPageWithoutExposingToken(){if(this.state.isRefreshing||this.state.isUnloading)return;this.state.isRefreshing=!0;const e=`fanpollRefreshDone:${window.location.pathname}`;try{if("1"===sessionStorage.getItem(e))return void(this.state.isRefreshing=!1);sessionStorage.setItem(e,"1")}catch(e){}const t=this.getAttribute("cache-token")||"";if(t){try{this.refreshAbortController=new AbortController;const{signal:e}=this.refreshAbortController,i=new URL(window.location.href);i.searchParams.set("since",t);const n=await fetch(i.toString(),{credentials:"include",cache:"no-store",signal:e});if(console.log("response",n),!this.state.isUnloading){try{window.history.replaceState(null,"",window.location.pathname+window.location.hash)}catch(e){}return void window.location.reload()}}catch(e){this.state.isUnloading||window.location.reload()}this.state.isRefreshing=!1}else this.state.isUnloading||window.location.reload()}}class Fn extends HTMLElement{constructor(){super(),this._weekList=[],this._currentWeek=null,this._offset=0,this._limit=50,this._nextOffset=null,this._hasMoreData=!0,this._isLoading=!1,this._observer=null}formatDate(e){if(!e)return"";try{let t;if(t="string"==typeof e?isNaN(parseInt(e))?new Date(e):new Date(parseInt(e)):new Date(e),isNaN(t.getTime()))return console.error("Invalid date from timestamp:",e),"Invalid date";const i=["Jan.","Feb.","March","April","May.","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][t.getMonth()],n=t.getDate();let s=t.getHours();const o=s>=12?"p.m.":"a.m.";s%=12,s=s||12;const a=t.getMinutes();return`${i} ${n} - ${0===a?`${s} ${o}`:`${s}:${a<10?"0"+a:a} ${o}`}`}catch(e){return console.error("Error formatting date:",e),"Error formatting date"}}static get observedAttributes(){return["week-list","current-week","next-offset"]}attributeChangedCallback(e,t,i){if("week-list"===e&&i)try{if(!i.startsWith("[")||!i.endsWith("]"))return void console.error("Invalid week-list format: Expected JSON array string");this._weekList=JSON.parse(i),this.renderWeekSelector()}catch(e){console.error("Invalid week-list format:",e)}else"current-week"===e&&i?(this._currentWeek=i,this.renderWeekSelector()):"next-offset"===e&&i&&(this._nextOffset=parseInt(i,10))}connectedCallback(){console.log("GameScheduleModule: DOM loaded"),setTimeout((()=>{const e=this.querySelector(".week-selector-container");if(e){this._weekSelectorContainer=e,this.renderWeekSelector(),this.addWeekSelectorEventListeners(),this.checkUrlParams(),this.initializeSchedule();const t=this.querySelector(".GameScheduleModule-grid");if(t){this.formatDateCells(t);const e=t.querySelectorAll(".grid-row");if(e.length>0){const t=this.closest("bsp-game-schedule-module");if(t){const i=t.getAttribute("next-offset");i?(this._nextOffset=parseInt(i,10),this._offset=this._nextOffset):0===this._offset&&(this._offset=e.length)}this._hasMoreData=e.length>=this._limit,this.setupInfiniteScroll()}}}else{this._weekSelectorContainer=null;const e=this.querySelector(".GameScheduleModule-grid");e&&(e.querySelectorAll(".infinite-scroll-sentinel").forEach((e=>e.remove())),this.formatDateCells(e))}}),0)}disconnectedCallback(){this._observer&&(this._observer.disconnect(),this._observer=null),this._scrollListener&&(window.removeEventListener("scroll",this._scrollListener),this._scrollListener=null)}checkUrlParams(){const e=new URLSearchParams(window.location.search),t=e.get("week");if(t&&(this._currentWeek=t,this._weekSelectorContainer)){const e=this._weekSelectorContainer.querySelector(".week-dropdown");e&&(e.value=this._currentWeek)}const i=e.get("offset");i&&(this._offset=parseInt(i,10));const n=e.get("limit");n&&(this._limit=parseInt(n,10))}renderWeekSelector(){if(!this._weekList||!this._weekList.length)return;const e=this._currentWeek?parseInt(this._currentWeek,10):null,t=this._weekList.map((t=>{const i=e?parseInt(t.weekNumber,10)===e:!!t.selected;return`<option value="${t.weekNumber}" ${i?"selected":""}>Week ${t.weekNumber}</option>`})).join("");this._weekSelectorContainer.innerHTML=`\n      <div class="week-selector">\n        <select class="week-dropdown">\n          ${t}\n        </select>\n        <div class="dropdown-arrow">\n          <svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.10799 4.08803L0.964987 0.158026C0.856349 0.056877 0.713423 0.000641317 0.564987 0.000641317C0.41655 0.000641317 0.273625 0.056877 0.164987 0.158026C0.11296 0.206499 0.0714698 0.265164 0.0431009 0.330368C0.0147319 0.395572 9.15527e-05 0.465918 9.15527e-05 0.537026C9.15527e-05 0.608134 0.0147319 0.678481 0.0431009 0.743685C0.0714698 0.808889 0.11296 0.867554 0.164987 0.916026L5.12999 5.62503L9.84499 0.905026C9.89583 0.855202 9.93584 0.795415 9.96251 0.729409C9.98917 0.663404 10.0019 0.592603 9.99994 0.521442C9.99797 0.450282 9.98133 0.380295 9.95105 0.315867C9.92077 0.251439 9.87751 0.193959 9.82399 0.147026C9.71274 0.0487737 9.56844 -0.00376982 9.42006 -6.02968e-05C9.27168 0.00364922 9.13019 0.0633373 9.02399 0.167026L5.10799 4.08803Z" fill="black"/>\n          </svg>\n        </div>\n      </div>\n      `}addWeekSelectorEventListeners(){if(!this._weekSelectorContainer)return;const e=this._weekSelectorContainer.querySelector(".week-dropdown");e&&e.addEventListener("change",(e=>{const t=e.target.value;this.handleWeekChange(t)}))}handleWeekChange(e){console.log("Week changed to:",e),this._observer&&(this._observer.disconnect(),this._observer=null);const t=this.querySelector(".GameScheduleModule-grid");t&&t.querySelectorAll(".infinite-scroll-sentinel").forEach((e=>e.remove())),this._currentWeek=e,this._offset=0,this._hasMoreData=!0,this.updateUrlParams(e),this.updateScheduleForWeek(e),this.dispatchEvent(new CustomEvent("week-changed",{detail:{weekNumber:e,offset:this._offset,limit:this._limit},bubbles:!0,composed:!0}))}updateUrlParams(e){const t=new URL(window.location.href),i=t.searchParams;i.set("week",e),i.set("offset",this._offset.toString()),i.set("limit",this._limit.toString()),window.history.replaceState({},"",t.toString())}updateUrlParamsWithCurrentState(){const e=new URL(window.location.href),t=e.searchParams;this._currentWeek&&t.set("week",this._currentWeek),t.set("offset",this._offset.toString()),t.set("limit",this._limit.toString()),window.history.replaceState({},"",e.toString())}initializeSchedule(){if(!this._weekSelectorContainer||!this._weekList||!this._weekList.length)return;if(this._currentWeek)return void this.updateScheduleForWeek(this._currentWeek);const e=(new Date).getTime(),t=this._weekList.find((t=>e>=t.startDate&&e<=t.endDate));if(t){if(this._currentWeek=t.weekNumber,this._weekSelectorContainer){const e=this._weekSelectorContainer.querySelector(".week-dropdown");e&&(e.value=this._currentWeek)}this.updateUrlParams(this._currentWeek),this.updateScheduleForWeek(this._currentWeek)}}updateScheduleForWeek(e){if(!this._weekSelectorContainer)return void console.warn("updateScheduleForWeek called for Team Schedule view - ignoring");console.log(`Updating schedule in module for week ${e}, offset: ${this._offset}, limit: ${this._limit}`);const t=new URL(window.location.pathname,window.location.origin);(new URLSearchParams(window.location.search).has("week")||e)&&t.searchParams.set("week",e),t.searchParams.set("offset",this._offset.toString()),t.searchParams.set("limit",this._limit.toString()),this.fetchScheduleData(t.toString(),0===this._offset)}fetchScheduleData(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("Fetching schedule data from:",e),this._isLoading||(this._isLoading=!0,this.showLoading(t),window.fetch(e,{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((e=>{this.renderScheduleData(e,t)})).catch((e=>{console.error("Error fetching schedule data:",e),this.hideLoading(),this._isLoading=!1})))}showLoading(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.querySelector(".GameScheduleModule-grid");if(t)if(e){if(t.classList.add("loading"),!t.querySelector(".loading-indicator")){const e=document.createElement("div");e.className="loading-indicator",e.innerHTML="Loading schedule...",t.appendChild(e)}}else if(!t.querySelector(".infinite-scroll-loader")){const e=document.createElement("div");e.className="infinite-scroll-loader",e.innerHTML='<div class="loader-spinner"></div>',t.appendChild(e)}}hideLoading(){const e=this.querySelector(".GameScheduleModule-grid");if(e){e.classList.remove("loading");const t=e.querySelector(".loading-indicator");t&&t.remove();const i=e.querySelector(".infinite-scroll-loader");i&&i.remove()}}renderScheduleData(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._weekSelectorContainer)return console.warn("renderScheduleData called for Team Schedule view - ignoring"),void(this._isLoading=!1);this.hideLoading();const i=document.createElement("div");i.innerHTML=e;const n=i.querySelector("bsp-game-schedule-module");if(n){const e=n.getAttribute("next-offset");e&&(this._nextOffset=parseInt(e,10),console.log("Next offset from response:",this._nextOffset))}const s=i.querySelector(".GameScheduleModule-grid");if(s){const e=s.querySelectorAll(".grid-row");null!==this._nextOffset&&this._nextOffset,this._hasMoreData=e.length>=this._limit;const i=this.querySelector(".GameScheduleModule-grid");if(i){if(t)i.innerHTML=s.innerHTML,null!==this._nextOffset&&void 0!==this._nextOffset?this._offset=this._nextOffset:this._offset=e.length;else if(e.length>0){const t=i.querySelector(".infinite-scroll-sentinel");t&&t.remove();const n=i.querySelector(".no-games-message")||null;e.forEach((e=>{n?i.insertBefore(e.cloneNode(!0),n):i.appendChild(e.cloneNode(!0))})),null!==this._nextOffset&&void 0!==this._nextOffset?this._offset=this._nextOffset:this._offset+=e.length}else this._hasMoreData=!1;this.updateUrlParamsWithCurrentState(),this.formatDateCells(i),this.dispatchRendered()}}else console.error("Could not find schedule grid in response");if(this._isLoading=!1,this._hasMoreData&&this._weekSelectorContainer)this.setupInfiniteScroll();else if(this._observer){this._observer.disconnect(),this._observer=null;const e=this.querySelector(".GameScheduleModule-grid");if(e){const t=e.querySelector(".infinite-scroll-sentinel");t&&t.remove()}}}formatDateCells(e){const t=e.querySelectorAll(".date-cell"),i=this;t.forEach((e=>{const t=e.getAttribute("data-timestamp");t&&(e.textContent=i.formatDate(t))}))}dispatchRendered(){const e=new CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(e)}setupInfiniteScroll(){if(!this._weekSelectorContainer)return;if(!("IntersectionObserver"in window))return void this.setupScrollEventFallback();if(!this._hasMoreData)return void(this._observer&&(this._observer.disconnect(),this._observer=null));const e=this.querySelector(".GameScheduleModule-grid");if(!e)return;this._observer&&(this._observer.disconnect(),this._observer=null),e.querySelectorAll(".infinite-scroll-sentinel").forEach((e=>e.remove()));const t=document.createElement("div");t.className="infinite-scroll-sentinel",t.style.height="1px",t.style.width="100%",e.appendChild(t),this._observer=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting&&!this._isLoading&&this._hasMoreData){console.log("Infinite scroll triggered, loading more data at offset:",this._offset);const e=new URL(window.location.pathname,window.location.origin);new URLSearchParams(window.location.search).has("week")&&e.searchParams.set("week",this._currentWeek),e.searchParams.set("offset",this._offset.toString()),e.searchParams.set("limit",this._limit.toString()),this.fetchScheduleData(e.toString(),!1)}}))}),{root:null,rootMargin:"200px",threshold:.1}),this._observer.observe(t)}setupScrollEventFallback(){if(!this._weekSelectorContainer)return;const e=()=>{if(this._isLoading||!this._hasMoreData)return;const e=this.querySelector(".GameScheduleModule-grid");if(e&&e.getBoundingClientRect().bottom<=window.innerHeight+200){const e=new URL(window.location.pathname,window.location.origin);new URLSearchParams(window.location.search).has("week")&&e.searchParams.set("week",this._currentWeek),e.searchParams.set("offset",this._offset.toString()),e.searchParams.set("limit",this._limit.toString()),this.fetchScheduleData(e.toString(),!1)}};let t=!1;const i=()=>{t||(window.requestAnimationFrame((()=>{e(),t=!1})),t=!0)};window.addEventListener("scroll",i),this._scrollListener=i}}function Rn(){window.customElements.define("bsp-accordion",e),window.customElements.define("bsp-audio-player",i),window.customElements.define("bsp-audio-wsync",r),window.customElements.define("bsp-banner",l),window.customElements.define("bsp-brightcove-player",u),window.customElements.define("bsp-carousel",b),window.customElements.define("bsp-carousel-read-more",w),window.customElements.define("bsp-collapse",_),window.customElements.define("bsp-copy-link",C),window.customElements.define("bsp-faq-question",A),window.customElements.define("bsp-form",L),window.customElements.define("bsp-gallery-page-carousel",Z),window.customElements.define("bsp-gallery-page",K),window.customElements.define("bsp-header",xe),window.customElements.define("bsp-header-leaderboard",Be),window.customElements.define("bsp-lead-superlead-ui",re),window.customElements.define("bsp-cookie-input",ee),window.customElements.define("bsp-document-referrer-input",te),window.customElements.define("bsp-scroll-shade",ie),window.customElements.define("bsp-html5player",P),window.customElements.define("bsp-jw-player",I),window.customElements.define("bsp-language",M),window.customElements.define("bsp-load-more",G),window.customElements.define("bsp-listcarousel",le),window.customElements.define("bsp-list-loadmore",me),window.customElements.define("bsp-liveblog",O),window.customElements.define("bsp-liveblog-feed",H),window.customElements.define("bsp-liveblog-post",W),window.customElements.define("bsp-liveblog-post-list",z),window.customElements.define("bsp-liveblog-secondary-items",X),window.customElements.define("bsp-page-actions",oe),window.customElements.define("bsp-page-heading-video",ae),window.customElements.define("bsp-poll-module",$e),window.customElements.define("bsp-read-more",Oe),window.customElements.define("bsp-nav",ze),window.customElements.define("bsp-nativo-ad",je),window.customElements.define("bsp-toggler",Qe),window.customElements.define("bsp-search-filters",He),window.customElements.define("bsp-search-results-module",Ue),window.customElements.define("bsp-search-overlay",We),window.customElements.define("bsp-stat-list",Ve),window.customElements.define("bsp-tabs",Ge),window.customElements.define("bsp-timestamp",Ke),window.customElements.define("bsp-timestamp-v2",Je),window.customElements.define("bsp-video-playlist-module",nt),window.customElements.define("bsp-video-card",st),window.customElements.define("bsp-vimeo-player",ot),window.customElements.define("bsp-youtube-player",at),window.customElements.define("bsp-custom-headline",lt),window.customElements.define("bsp-sports-bracket",ct),window.customElements.define("bsp-story-page",ut),window.customElements.define("bsp-news-letter",vt),window.customElements.define("bsp-fragment",J),window.customElements.define("bsp-search-filter-bar",yt),window.customElements.define("bsp-jw-data-store",T),window.customElements.define("bsp-figure",bt),window.customElements.define("bsp-theme-demo",wt),window.customElements.define("bsp-fan-poll-module",Mn),window.customElements.define("bsp-leader-board",Dn),window.customElements.define("bsp-fan-poll-results-module",qn),window.customElements.define("fan-poll-countdown-timer",Pt),window.customElements.define("bsp-game-schedule-module",Fn),new et,new se,new ne,new Le,new it,new tt}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Rn):Rn()}()}();